{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth, { AuthOptions, SessionStrategy } from 'next-auth';\r\nimport CredentialsProvider from 'next-auth/providers/credentials';\r\nimport { PrismaClient } from '@prisma/client';\r\nimport bcrypt from 'bcryptjs';\r\nimport { User } from '@/lib/types';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport const authOptions: AuthOptions = {\r\n  providers: [\r\n    CredentialsProvider({\r\n      name: 'Credentials',\r\n      credentials: {\r\n        email: { label: \"Email\", type: \"text\" },\r\n        password: {  label: \"Password\", type: \"password\" }\r\n      },\r\n      async authorize(credentials) {\r\n        if (!credentials?.email || !credentials.password) {\r\n          return null;\r\n        }\r\n\r\n        const user = await prisma.user.findUnique({\r\n          where: { email: credentials.email.toLowerCase() },\r\n        });\r\n\r\n        if (user && user.password && await bcrypt.compare(credentials.password, user.password)) {\r\n          // Return user object without password\r\n          const { password, ...userWithoutPassword } = user;\r\n          return userWithoutPassword;\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    })\r\n  ],\r\n  session: {\r\n    strategy: 'jwt' as SessionStrategy,\r\n  },\r\n  callbacks: {\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        token.id = (user as any).id;\r\n        token.isSuperAdmin = (user as any).isSuperAdmin;\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n        if (session.user) {\r\n            (session.user as any).id = token.id;\r\n            (session.user as any).isSuperAdmin = token.isSuperAdmin;\r\n        }\r\n      return session;\r\n    }\r\n  },\r\n  pages: {\r\n    signIn: '/auth/login', // This will be the login page\r\n  },\r\n};\r\n\r\nconst handler = NextAuth(authOptions);\r\n\r\nexport { handler as GET, handler as POST };\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAGA,MAAM,SAAS,IAAI,6IAAY;AAExB,MAAM,cAA2B;IACtC,WAAW;QACT,IAAA,mKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAG,OAAO;oBAAY,MAAM;gBAAW;YACnD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,YAAY,QAAQ,EAAE;oBAChD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE,OAAO,YAAY,KAAK,CAAC,WAAW;oBAAG;gBAClD;gBAEA,IAAI,QAAQ,KAAK,QAAQ,IAAI,MAAM,4IAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ,GAAG;oBACtF,sCAAsC;oBACtC,MAAM,EAAE,QAAQ,EAAE,GAAG,qBAAqB,GAAG;oBAC7C,OAAO;gBACT,OAAO;oBACL,OAAO;gBACT;YACF;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,AAAC,KAAa,EAAE;gBAC3B,MAAM,YAAY,GAAG,AAAC,KAAa,YAAY;YACjD;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,EAAE;gBACb,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;gBAClC,QAAQ,IAAI,CAAS,YAAY,GAAG,MAAM,YAAY;YAC3D;YACF,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;AACF;AAEA,MAAM,UAAU,IAAA,gJAAQ,EAAC"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/lib/data.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function getTenantsForUser(userId: string) {\r\n  const memberships = await prisma.userTenantMembership.findMany({\r\n    where: {\r\n      userId: userId,\r\n      status: 'APPROVED',\r\n    },\r\n    include: {\r\n      tenant: true,\r\n    },\r\n  });\r\n\r\n  return memberships.map((membership: any) => membership.tenant);\r\n}\r\n\r\nexport async function getTenantById(tenantId: string) {\r\n  return await prisma.tenant.findUnique({\r\n    where: { id: tenantId },\r\n    include: {\r\n      settings: true,\r\n      branding: true,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getUserById(userId: string) {\r\n  return await prisma.user.findUnique({\r\n    where: { id: userId },\r\n    include: {\r\n      profile: true,\r\n      privacySettings: true,\r\n      accountSettings: true,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getEventsForTenant(tenantId: string) {\r\n  return await prisma.event.findMany({\r\n    where: { tenantId },\r\n    orderBy: { startDateTime: 'asc' },\r\n  });\r\n}\r\n\r\nexport async function getPostsForTenant(tenantId: string) {\r\n  return await prisma.post.findMany({\r\n    where: { tenantId, isPublished: true },\r\n    orderBy: { publishedAt: 'desc' },\r\n    include: {\r\n      author: {\r\n        include: {\r\n          profile: true,\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport async function getMembershipForUserInTenant(userId: string, tenantId: string) {\r\n  return await prisma.userTenantMembership.findUnique({\r\n    where: {\r\n      userId_tenantId: {\r\n        userId,\r\n        tenantId,\r\n      }\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,kBAAkB,MAAc;IACpD,MAAM,cAAc,MAAM,OAAO,oBAAoB,CAAC,QAAQ,CAAC;QAC7D,OAAO;YACL,QAAQ;YACR,QAAQ;QACV;QACA,SAAS;YACP,QAAQ;QACV;IACF;IAEA,OAAO,YAAY,GAAG,CAAC,CAAC,aAAoB,WAAW,MAAM;AAC/D;AAEO,eAAe,cAAc,QAAgB;IAClD,OAAO,MAAM,OAAO,MAAM,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,IAAI;QAAS;QACtB,SAAS;YACP,UAAU;YACV,UAAU;QACZ;IACF;AACF;AAEO,eAAe,YAAY,MAAc;IAC9C,OAAO,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YAAE,IAAI;QAAO;QACpB,SAAS;YACP,SAAS;YACT,iBAAiB;YACjB,iBAAiB;QACnB;IACF;AACF;AAEO,eAAe,mBAAmB,QAAgB;IACvD,OAAO,MAAM,OAAO,KAAK,CAAC,QAAQ,CAAC;QACjC,OAAO;YAAE;QAAS;QAClB,SAAS;YAAE,eAAe;QAAM;IAClC;AACF;AAEO,eAAe,kBAAkB,QAAgB;IACtD,OAAO,MAAM,OAAO,IAAI,CAAC,QAAQ,CAAC;QAChC,OAAO;YAAE;YAAU,aAAa;QAAK;QACrC,SAAS;YAAE,aAAa;QAAO;QAC/B,SAAS;YACP,QAAQ;gBACN,SAAS;oBACP,SAAS;gBACX;YACF;QACF;IACF;AACF;AAEO,eAAe,6BAA6B,MAAc,EAAE,QAAgB;IACjF,OAAO,MAAM,OAAO,oBAAoB,CAAC,UAAU,CAAC;QAClD,OAAO;YACL,iBAAiB;gBACf;gBACA;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/lib/types.ts"],"sourcesContent":["// --- ENUMS ---\r\n\r\nexport enum TenantRole {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  CLERGY = 'CLERGY',\r\n  MODERATOR = 'MODERATOR',\r\n  ADMIN = 'ADMIN',\r\n}\r\n\r\n// Role types for permission mapping\r\nexport enum TenantRoleType {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  MODERATOR = 'MODERATOR',\r\n}\r\n\r\nexport enum MembershipStatus {\r\n  REQUESTED = 'REQUESTED',\r\n  APPROVED = 'APPROVED',\r\n  REJECTED = 'REJECTED',\r\n  BANNED = 'BANNED',\r\n}\r\n\r\nexport enum MembershipApprovalMode {\r\n  OPEN = 'OPEN',\r\n  APPROVAL_REQUIRED = 'APPROVAL_REQUIRED',\r\n}\r\n\r\nexport enum VolunteerStatus {\r\n  CONFIRMED = 'CONFIRMED',\r\n  CANCELED = 'CANCELED',\r\n}\r\n\r\nexport enum SmallGroupRole {\r\n  LEADER = 'LEADER',\r\n  MEMBER = 'MEMBER',\r\n}\r\n\r\nexport enum CommunityPostType {\r\n    PRAYER_REQUEST = 'PRAYER_REQUEST',\r\n    TANGIBLE_NEED = 'TANGIBLE_NEED',\r\n}\r\n\r\nexport enum CommunityPostStatus {\r\n    PENDING_APPROVAL = 'PENDING_APPROVAL',\r\n    PUBLISHED = 'PUBLISHED',\r\n    FULFILLED = 'FULFILLED',\r\n}\r\n\r\nexport enum ResourceVisibility {\r\n    PUBLIC = 'PUBLIC',\r\n    MEMBERS_ONLY = 'MEMBERS_ONLY',\r\n}\r\n\r\nexport enum FileType {\r\n    PDF = 'PDF',\r\n    DOCX = 'DOCX',\r\n    MP3 = 'MP3',\r\n    JPG = 'JPG',\r\n    PNG = 'PNG',\r\n    OTHER = 'OTHER',\r\n}\r\n\r\nexport enum ContactSubmissionStatus {\r\n    UNREAD = 'UNREAD',\r\n    READ = 'READ',\r\n    ARCHIVED = 'ARCHIVED',\r\n}\r\n\r\n\r\n// --- USER-RELATED MODELS ---\r\nexport interface NotificationPreferences {\r\n  email: {\r\n    newAnnouncement: boolean;\r\n    newEvent: boolean;\r\n    directMessage: boolean;\r\n    groupChatMessage: boolean;\r\n    membershipUpdate: boolean;\r\n  };\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  password?: string; // NOTE: For mock login simulation.\r\n  isSuperAdmin: boolean;\r\n  profile: UserProfile;\r\n  privacySettings: UserPrivacySettings;\r\n  accountSettings: AccountSettings;\r\n  notificationPreferences: NotificationPreferences;\r\n}\r\n\r\nexport interface UserProfile {\r\n  displayName: string;\r\n  avatarUrl?: string;\r\n  bio?: string;\r\n  locationCity?: string;\r\n  locationCountry?: string;\r\n  languages?: string[];\r\n}\r\n\r\nexport interface UserPrivacySettings {\r\n  showAffiliations: boolean;\r\n}\r\n\r\nexport interface AccountSettings {\r\n  timezonePreference?: string;\r\n  dateFormat?: string;\r\n  timeFormat?: string;\r\n  languagePreference?: string;\r\n}\r\n\r\n\r\n// --- TENANT-RELATED MODELS ---\r\n\r\nexport interface Tenant {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  creed: string;\r\n  address: {\r\n    street: string;\r\n    city: string;\r\n    state: string;\r\n    country: string;\r\n    postalCode: string;\r\n  };\r\n  contactEmail?: string;\r\n  phoneNumber?: string;\r\n  description: string;\r\n  settings: TenantSettings;\r\n  branding: TenantBranding;\r\n  permissions: TenantFeaturePermissions;\r\n}\r\n\r\nexport interface TenantBranding {\r\n  logoUrl: string;\r\n  bannerImageUrl: string;\r\n  primaryColor: string;\r\n  accentColor: string;\r\n  customLinks: Array<{ label: string; url: string }>;\r\n}\r\n\r\nexport interface LiveStreamSettings {\r\n  provider: 'YOUTUBE' | 'FACEBOOK' | 'VIMEO' | 'OTHER';\r\n  embedUrl: string;\r\n  isLive: boolean; // Manual toggle by admin\r\n}\r\n\r\nexport interface TenantSettings {\r\n  isPublic: boolean;\r\n  membershipApprovalMode: MembershipApprovalMode;\r\n  // Features\r\n  enableCalendar: boolean;\r\n  enablePosts: boolean;\r\n  enableSermons: boolean;\r\n  enablePodcasts: boolean;\r\n  enableBooks: boolean;\r\n  enableMemberDirectory: boolean;\r\n  enableGroupChat: boolean;\r\n  enableComments: boolean;\r\n  enableReactions: boolean;\r\n  enableDonations: boolean;\r\n  enableVolunteering: boolean;\r\n  enableSmallGroups: boolean;\r\n  enableLiveStream: boolean;\r\n  enablePrayerWall: boolean;\r\n  enableResourceCenter: boolean;\r\n  donationSettings: DonationSettings;\r\n  liveStreamSettings: LiveStreamSettings;\r\n  // Visibility (simplified for mock)\r\n  visitorVisibility: {\r\n    calendar: boolean;\r\n    posts: boolean;\r\n    sermons: boolean;\r\n    podcasts: boolean;\r\n    books: boolean;\r\n    prayerWall: boolean;\r\n  };\r\n}\r\n\r\n\r\nexport interface RolePermissions {\r\n  canCreatePosts: boolean;\r\n  canCreateEvents: boolean;\r\n  canCreateSermons: boolean;\r\n  canCreatePodcasts: boolean;\r\n  canCreateBooks: boolean;\r\n  canCreateGroupChats: boolean;\r\n  canInviteMembers: boolean;\r\n  canApproveMembership: boolean;\r\n  canBanMembers: boolean;\r\n  canModeratePosts: boolean;\r\n  canModerateChats: boolean;\r\n  canPostInAnnouncementChannels?: boolean;\r\n  canManagePrayerWall: boolean;\r\n  canUploadResources: boolean;\r\n  canManageResources: boolean;\r\n  canManageContactSubmissions: boolean;\r\n}\r\n\r\n// Sticking with a map for easier frontend access\r\nexport type TenantFeaturePermissions = {\r\n  [key in TenantRoleType]?: RolePermissions;\r\n} & { ADMIN: RolePermissions };\r\n\r\n\r\nexport interface UserTenantMembership {\r\n  id: string;\r\n  userId: string;\r\n  tenantId: string;\r\n  status: MembershipStatus;\r\n  roles: UserTenantRole[];\r\n  displayName?: string; // Tenant-specific display name override\r\n}\r\n\r\nexport interface UserTenantRole {\r\n    id: string;\r\n    role: TenantRole;\r\n    displayTitle?: string;\r\n    isPrimary: boolean;\r\n}\r\n\r\n// Enriched type for displaying members in the UI\r\nexport interface EnrichedMember extends User {\r\n  membership: UserTenantMembership;\r\n}\r\n\r\n\r\n// --- CONTENT & MESSAGING (Largely Unchanged) ---\r\n\r\nexport interface Post {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  title: string;\r\n  body: string;\r\n  isPublished: boolean;\r\n  publishedAt: Date;\r\n}\r\nexport interface PostInput {\r\n  title: string;\r\n  body: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  isPublished: boolean;\r\n}\r\nexport interface PostWithAuthor extends Post {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface Event {\r\n  id:string;\r\n  tenantId: string;\r\n  createdByUserId: string;\r\n  title: string;\r\n  description: string;\r\n  startDateTime: Date;\r\n  endDateTime: Date;\r\n  locationText: string;\r\n  isOnline: boolean;\r\n  onlineUrl?: string;\r\n}\r\nexport interface EventWithCreator extends Event {\r\n    creatorDisplayName: string;\r\n    creatorAvatarUrl?: string;\r\n}\r\n\r\nexport interface MediaItem {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'SERMON_VIDEO' | 'PODCAST_AUDIO';\r\n  title: string;\r\n  description: string;\r\n  embedUrl: string;\r\n  publishedAt: Date;\r\n}\r\nexport interface EnrichedMediaItem extends MediaItem {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  text: string;\r\n  createdAt: Date;\r\n  isDeleted?: boolean;\r\n}\r\n\r\nexport interface EnrichedChatMessage extends ChatMessage {\r\n  userDisplayName: string;\r\n  userAvatarUrl?: string;\r\n}\r\n\r\nexport interface Conversation {\r\n  id: string;\r\n  isDirect: boolean;\r\n  tenantId: string | null;\r\n  isPrivateGroup: boolean;\r\n  name?: string; // For group channels\r\n  description?: string; // Description for channels\r\n  createdByUserId: string;\r\n  isDefaultChannel: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface ConversationParticipant {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  lastReadMessageId?: string | null;\r\n}\r\n\r\nexport interface EnrichedConversation extends Conversation {\r\n    participants: User[];\r\n    unreadCount: number;\r\n    lastMessage?: EnrichedChatMessage;\r\n    displayName: string;\r\n}\r\n\r\n\r\n// --- ADMIN & AUDIT TYPES ---\r\n\r\nexport enum ActionType {\r\n  IMPERSONATE_START = 'IMPERSONATE_START',\r\n  IMPERSONATE_END = 'IMPERSONATE_END',\r\n  CREATE_POST = 'CREATE_POST',\r\n  DELETE_POST = 'DELETE_POST',\r\n  BAN_USER = 'BAN_USER',\r\n  UNBAN_USER = 'UNBAN_USER',\r\n  DELETE_MESSAGE = 'DELETE_MESSAGE',\r\n  USER_JOINED_TENANT = 'USER_JOINED_TENANT',\r\n  MEMBERSHIP_STATUS_UPDATED = 'MEMBERSHIP_STATUS_UPDATED',\r\n  MEMBER_ROLES_UPDATED = 'MEMBER_ROLES_UPDATED',\r\n  MEMBERSHIP_PROFILE_UPDATED = 'MEMBERSHIP_PROFILE_UPDATED',\r\n  USER_REGISTERED = 'USER_REGISTERED',\r\n  USER_PROFILE_UPDATED = 'USER_PROFILE_UPDATED',\r\n  ADMIN_UPDATED_USER_PROFILE = 'ADMIN_UPDATED_USER_PROFILE',\r\n  TENANT_PERMISSIONS_UPDATED = 'TENANT_PERMISSIONS_UPDATED',\r\n}\r\n\r\nexport interface AuditLog {\r\n  id: string;\r\n  actorUserId: string;\r\n  effectiveUserId?: string;\r\n  actionType: ActionType;\r\n  entityType?: string;\r\n  entityId?: string;\r\n  metadata?: Record<string, any>;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- NOTIFICATION MODELS ---\r\nexport type NotificationType =\r\n  | 'NEW_DIRECT_MESSAGE'\r\n  | 'NEW_ANNOUNCEMENT'\r\n  | 'MEMBERSHIP_APPROVED'\r\n  | 'NEW_CONTACT_SUBMISSION';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  userId: string; // The recipient\r\n  actorUserId?: string; // The user who caused the notification\r\n  type: NotificationType;\r\n  message: string;\r\n  link?: string; // e.g., messages, tenant/tenant-1\r\n  isRead: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- DONATION MODELS ---\r\nexport interface DonationSettings {\r\n  mode: 'EXTERNAL' | 'INTEGRATED';\r\n  externalUrl?: string;\r\n  integratedProvider?: 'STRIPE' | 'PAYPAL';\r\n  currency: string;\r\n  suggestedAmounts: number[];\r\n  allowCustomAmounts: boolean;\r\n  leaderboardEnabled: boolean;\r\n  leaderboardVisibility: 'PUBLIC' | 'MEMBERS_ONLY';\r\n  leaderboardTimeframe: 'ALL_TIME' | 'YEARLY' | 'MONTHLY';\r\n}\r\n\r\nexport interface DonationRecord {\r\n  id: string;\r\n  tenantId: string;\r\n  userId: string | null; // null for anonymous from public page\r\n  displayName: string; // denormalized for anonymous/guest donations\r\n  amount: number;\r\n  currency: string;\r\n  donatedAt: Date;\r\n  isAnonymousOnLeaderboard: boolean;\r\n  message?: string;\r\n}\r\n\r\nexport interface EnrichedDonationRecord extends DonationRecord {\r\n    userAvatarUrl?: string;\r\n}\r\n\r\n// --- VOLUNTEER MODELS ---\r\nexport interface VolunteerNeed {\r\n  id: string;\r\n  tenantId: string;\r\n  eventId?: string; // Optional link to an Event\r\n  title: string;\r\n  description: string;\r\n  date: Date;\r\n  slotsNeeded: number;\r\n}\r\n\r\nexport interface VolunteerSignup {\r\n  id: string;\r\n  needId: string;\r\n  userId: string;\r\n  signedUpAt: Date;\r\n  status: VolunteerStatus;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedSignup {\r\n  signup: VolunteerSignup;\r\n  user: User;\r\n}\r\n\r\nexport interface EnrichedVolunteerNeed extends VolunteerNeed {\r\n  signups: EnrichedSignup[];\r\n}\r\n\r\n// --- SMALL GROUP MODELS ---\r\nexport interface SmallGroup {\r\n  id: string;\r\n  tenantId: string;\r\n  name: string;\r\n  description: string;\r\n  leaderUserId: string;\r\n  meetingSchedule: string; // e.g., \"Tuesdays at 7 PM\"\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface SmallGroupMembership {\r\n  id: string;\r\n  groupId: string;\r\n  userId: string;\r\n  role: SmallGroupRole;\r\n  joinedAt: Date;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedGroupMember {\r\n    membership: SmallGroupMembership;\r\n    user: User;\r\n}\r\n\r\nexport interface EnrichedSmallGroup extends SmallGroup {\r\n    leader: User;\r\n    members: EnrichedGroupMember[];\r\n}\r\n\r\n// --- COMMUNITY BOARD / PRAYER WALL MODELS ---\r\nexport interface CommunityPost {\r\n    id: string;\r\n    tenantId: string;\r\n    authorUserId: string | null; // Null for anonymous\r\n    type: CommunityPostType;\r\n    body: string;\r\n    isAnonymous: boolean;\r\n    status: CommunityPostStatus;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedCommunityPost extends CommunityPost {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\n// --- RESOURCE CENTER MODELS ---\r\nexport interface ResourceItem {\r\n    id: string;\r\n    tenantId: string;\r\n    uploaderUserId: string;\r\n    title: string;\r\n    description: string;\r\n    fileUrl: string; // For mock, this is just a string. In real app, it would be a URL to a file.\r\n    fileType: FileType;\r\n    visibility: ResourceVisibility;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedResourceItem extends ResourceItem {\r\n    uploaderDisplayName: string;\r\n    uploaderAvatarUrl?: string;\r\n}\r\n\r\n// --- CONTACT & SUBMISSIONS ---\r\nexport interface ContactSubmission {\r\n    id: string;\r\n    tenantId: string;\r\n    name: string;\r\n    email: string;\r\n    message: string;\r\n    status: ContactSubmissionStatus;\r\n    createdAt: Date;\r\n}"],"names":[],"mappings":"AAAA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAET,IAAA,AAAK,oCAAA;;;;;;WAAA;;AASL,IAAA,AAAK,wCAAA;;;;WAAA;;AAML,IAAA,AAAK,0CAAA;;;;;WAAA;;AAOL,IAAA,AAAK,gDAAA;;;WAAA;;AAKL,IAAA,AAAK,yCAAA;;;WAAA;;AAKL,IAAA,AAAK,wCAAA;;;WAAA;;AAKL,IAAA,AAAK,2CAAA;;;WAAA;;AAKL,IAAA,AAAK,6CAAA;;;;WAAA;;AAML,IAAA,AAAK,4CAAA;;;WAAA;;AAKL,IAAA,AAAK,kCAAA;;;;;;;WAAA;;AASL,IAAA,AAAK,iDAAA;;;;WAAA;;AAyQL,IAAA,AAAK,oCAAA;;;;;;;;;;;;;;;;WAAA"}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/lib/permissions.ts"],"sourcesContent":["import { TenantRole, type User, type Tenant, type RolePermissions, type EnrichedChatMessage, type Conversation } from '@/lib/types';\r\nimport { TenantRoleType } from '@/lib/types';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nasync function getMembershipForUserInTenant(userId: string, tenantId: string) {\r\n    return prisma.membership.findUnique({\r\n        where: {\r\n            userId_tenantId: {\r\n                userId,\r\n                tenantId,\r\n            },\r\n        },\r\n        include: {\r\n            roles: true,\r\n        }\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * Maps a specific TenantRole to a more general TenantRoleType for permission lookups.\r\n */\r\nfunction getRoleType(role: TenantRole): TenantRoleType | 'ADMIN' {\r\n    switch (role) {\r\n        case TenantRole.ADMIN:\r\n            return 'ADMIN';\r\n        case TenantRole.STAFF:\r\n        case TenantRole.CLERGY:\r\n            return TenantRoleType.STAFF;\r\n        case TenantRole.MODERATOR:\r\n            return TenantRoleType.MODERATOR;\r\n        case TenantRole.MEMBER:\r\n            return TenantRoleType.MEMBER;\r\n        default:\r\n            return TenantRoleType.MEMBER;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Checks if a user has a specific permission within a tenant.\r\n * This is the centralized source of truth for all permission checks.\r\n *\r\n * @param user The user to check.\r\n * @param tenant The tenant context for the permission.\r\n * @param permission The permission to check for (e.g., 'canCreatePosts').\r\n * @returns {boolean} True if the user has the permission, false otherwise.\r\n */\r\nexport async function can(user: User, tenant: Tenant, permission: keyof RolePermissions): Promise<boolean> {\r\n  // Super Admins can do anything.\r\n  if (user.isSuperAdmin) {\r\n    return true;\r\n  }\r\n\r\n  // Find the user's membership for this specific tenant.\r\n  const membership = await getMembershipForUserInTenant(user.id, tenant.id);\r\n\r\n  // If the user is not a member or not approved, they have no permissions.\r\n  if (!membership || membership.status !== 'APPROVED') {\r\n    return false;\r\n  }\r\n  \r\n  // Check if any of the user's roles grant the required permission.\r\n  for (const roleInfo of membership.roles) {\r\n    const roleType = getRoleType(roleInfo.role);\r\n\r\n    if (roleType === 'ADMIN') {\r\n        // Admins have all permissions defined under the ADMIN key.\r\n        if (tenant.permissions.ADMIN[permission]) {\r\n            return true;\r\n        }\r\n    } else {\r\n        // For other roles, check against their TenantRoleType.\r\n        const rolePerms = tenant.permissions[roleType];\r\n        if (rolePerms && rolePerms[permission]) {\r\n            return true; // Permission granted by at least one role.\r\n        }\r\n    }\r\n  }\r\n\r\n  return false; // No role granted the permission.\r\n}\r\n\r\n/**\r\n * Checks if a user has a specific role within a tenant.\r\n *\r\n * @param user The user to check.\r\n * @param tenantId The ID of the tenant context for the role.\r\n * @param role The role to check for.\r\n * @returns {boolean} True if the user has the role, false otherwise.\r\n */\r\nexport async function hasRole(user: User, tenantId: string, role: TenantRole): Promise<boolean> {\r\n  // Super admin implicitly has ADMIN role for any tenant\r\n  if (user.isSuperAdmin && role === TenantRole.ADMIN) {\r\n    return true;\r\n  }\r\n\r\n  const membership = await getMembershipForUserInTenant(user.id, tenantId);\r\n  \r\n  if (!membership || membership.status !== 'APPROVED') {\r\n    return false;\r\n  }\r\n\r\n  return membership.roles.some((r: { role: TenantRole; }) => r.role === role);\r\n}\r\n\r\n/**\r\n * Checks if a user can view a certain type of content (e.g., posts, events).\r\n * It checks tenant settings for public visibility and feature enablement.\r\n *\r\n * @param userId The ID of the user attempting to view. Can be null for anonymous users.\r\n * @param tenantId The ID of the tenant where the content resides.\r\n * @param contentType The key for the content type in tenant settings (e.g., 'posts', 'calendar').\r\n * @returns {Promise<boolean>} True if the user can view the content.\r\n */\r\nexport async function canUserViewContent(userId: string | null, tenantId: string, contentType: 'posts' | 'calendar' | 'sermons' | 'podcasts' | 'books' | 'prayerWall'): Promise<boolean> {\r\n    const tenant = await prisma.tenant.findUnique({\r\n        where: { id: tenantId },\r\n        include: { settings: true }\r\n    });\r\n\r\n    if (!tenant || !tenant.settings) return false;\r\n\r\n    // Check if the entire feature is disabled\r\n    const featureFlag = `enable${contentType.charAt(0).toUpperCase() + contentType.slice(1)}`;\r\n    if (!(tenant.settings as any)[featureFlag]) {\r\n        return false;\r\n    }\r\n\r\n    const membership = userId ? await getMembershipForUserInTenant(userId, tenantId) : null;\r\n\r\n    // If user is not a member, check public visibility settings\r\n    if (!membership || membership.status !== 'APPROVED') {\r\n        return tenant.settings.visitorVisibility[contentType];\r\n    }\r\n\r\n    // If they are an approved member, they can view it as long as the feature is enabled.\r\n    return true;\r\n}\r\n\r\n/**\r\n * Checks if a user has permission to create a post in a tenant.\r\n *\r\n * @param userId The ID of the user.\r\n * @param tenantId The ID of the tenant.\r\n * @param isAnnouncement Whether the post is an announcement.\r\n * @returns {Promise<boolean>} True if the user can create the post.\r\n */\r\nexport async function canUserPost(userId: string, tenantId: string, isAnnouncement: boolean): Promise<boolean> {\r\n    const user = await prisma.user.findUnique({ where: { id: userId } });\r\n    const tenant = await prisma.tenant.findUnique({ where: { id: tenantId }, include: { permissions: true } });\r\n\r\n    if (!user || !tenant) return false;\r\n\r\n    if (isAnnouncement) {\r\n        return can(user, tenant, 'canPostInAnnouncementChannels');\r\n    }\r\n    return can(user, tenant, 'canCreatePosts');\r\n}\r\n\r\n\r\n/**\r\n * Checks if a user can delete a specific message.\r\n */\r\nexport async function canDeleteMessage(\r\n  user: User,\r\n  message: { authorId: string }, // Assuming EnrichedChatMessage has authorId\r\n  conversation: Conversation,\r\n  tenant: Tenant\r\n): Promise<boolean> {\r\n  if (user.isSuperAdmin) {\r\n    return true;\r\n  }\r\n  // User can delete their own message\r\n  if (message.authorId === user.id) {\r\n    return true;\r\n  }\r\n  // Check for moderation permissions\r\n  if (!conversation.isDirect) { // isGroupChat\r\n    if (await can(user, tenant, 'canModerateChats')) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/tenants/%5BtenantId%5D/TenantNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/tenants/[tenantId]/TenantNav.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/tenants/[tenantId]/TenantNav.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/tenants/%5BtenantId%5D/TenantNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/tenants/[tenantId]/TenantNav.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/tenants/[tenantId]/TenantNav.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0]}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/tenants/%5BtenantId%5D/layout.tsx"],"sourcesContent":["import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getTenantById, getUserById } from '@/lib/data';\r\nimport { hasRole, can } from '@/lib/permissions';\r\nimport { TenantRole } from '@/lib/types';\r\nimport Link from 'next/link';\r\nimport TenantNav from './TenantNav'; // This will be the client component for navigation\r\n\r\nexport default async function TenantLayout({\r\n  children,\r\n  params,\r\n}: {\r\n  children: React.ReactNode;\r\n  params: { tenantId: string };\r\n}) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session || !session.user) {\r\n    redirect('/auth/login');\r\n  }\r\n\r\n  const tenant = await getTenantById(params.tenantId);\r\n  const user = await getUserById((session.user as any).id);\r\n\r\n  if (!tenant || !user) {\r\n    redirect('/');\r\n  }\r\n\r\n  const canViewSettings = user.isSuperAdmin || \r\n                          hasRole(user, tenant.id, TenantRole.ADMIN) ||\r\n                          can(user, tenant, 'canApproveMembership') ||\r\n                          can(user, tenant, 'canBanMembers') ||\r\n                          can(user, tenant, 'canManagePrayerWall') ||\r\n                          can(user, tenant, 'canManageResources') ||\r\n                          can(user, tenant, 'canManageContactSubmissions');\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen\">\r\n      <header className=\"bg-white shadow-sm sticky top-0 z-20\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"flex justify-between items-center py-3\">\r\n                 <div className=\"flex items-center space-x-4\">\r\n                    {tenant.branding?.logoUrl ? (\r\n                         <img src={tenant.branding.logoUrl} alt={`${tenant.name} Logo`} className=\"h-8 w-auto\" />\r\n                    ) : (\r\n                         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-amber-600\" viewBox=\"http://www.w3.org/2000/svg\" fill=\"currentColor\">\r\n                            <path d=\"M12 2L1 9l4 2.18v6.32L12 22l7-4.5V11.18L23 9l-3-1.68V5h-2v1.32L12 2zm0 16.5l-5-3.25V11.4l5 2.75v5.6zM12 12L7 9.25 12 6.5 17 9.25 12 12z\"/>\r\n                         </svg>\r\n                    )}\r\n                    <h1 className=\"text-xl font-bold text-gray-800 hidden md:block\">{tenant.name}</h1>\r\n                 </div>\r\n                 <div className=\"flex items-center space-x-2 md:space-x-4\">\r\n                    <Link href=\"/\" className=\"text-sm font-medium text-gray-600 hover:text-amber-700 hidden sm:block\">\r\n                        &larr; Switch Tenant\r\n                    </Link>\r\n                    {/* NotificationBell will be added later */}\r\n                    <Link href=\"/messages\" className=\"text-sm font-medium text-gray-600 hover:text-amber-700\">Global Messages</Link>\r\n                    <Link href=\"/account\" className=\"text-sm font-medium text-gray-600 hover:text-amber-700\">Account</Link>\r\n                    {user.isSuperAdmin && (\r\n                        <Link href=\"/admin\" className=\"text-sm font-medium text-red-600 hover:text-red-800\">Admin Console</Link>\r\n                    )}\r\n                    <div className=\"flex items-center space-x-2\">\r\n                         <img src={user.profile?.avatarUrl} alt={user.profile?.displayName} className=\"h-8 w-8 rounded-full\"/>\r\n                         <p className=\"font-semibold text-amber-700 text-sm hidden sm:block\">{user.profile?.displayName}</p>\r\n                    </div>\r\n                     <Link href=\"/api/auth/signout\" className=\"text-sm font-medium text-gray-600 hover:text-amber-700\">Logout</Link>\r\n                 </div>\r\n            </div>\r\n            <TenantNav tenant={tenant} canViewSettings={canViewSettings} />\r\n        </div>\r\n      </header>\r\n       <main className=\"py-10\">\r\n        <div className=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\r\n          {children}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA,qPAAqC,mDAAmD;;;;;;;;;;AAEzE,eAAe,aAAa,EACzC,QAAQ,EACR,MAAM,EAIP;IACC,MAAM,UAAU,MAAM,IAAA,iKAAgB,EAAC,gKAAW;IAElD,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,EAAE;QAC7B,IAAA,iMAAQ,EAAC;IACX;IAEA,MAAM,SAAS,MAAM,IAAA,4HAAa,EAAC,OAAO,QAAQ;IAClD,MAAM,OAAO,MAAM,IAAA,0HAAW,EAAC,AAAC,QAAQ,IAAI,CAAS,EAAE;IAEvD,IAAI,CAAC,UAAU,CAAC,MAAM;QACpB,IAAA,iMAAQ,EAAC;IACX;IAEA,MAAM,kBAAkB,KAAK,YAAY,IACjB,IAAA,6HAAO,EAAC,MAAM,OAAO,EAAE,EAAE,0HAAU,CAAC,KAAK,KACzC,IAAA,yHAAG,EAAC,MAAM,QAAQ,2BAClB,IAAA,yHAAG,EAAC,MAAM,QAAQ,oBAClB,IAAA,yHAAG,EAAC,MAAM,QAAQ,0BAClB,IAAA,yHAAG,EAAC,MAAM,QAAQ,yBAClB,IAAA,yHAAG,EAAC,MAAM,QAAQ;IAE1C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACV,8OAAC;oCAAI,WAAU;;wCACX,OAAO,QAAQ,EAAE,wBACb,8OAAC;4CAAI,KAAK,OAAO,QAAQ,CAAC,OAAO;4CAAE,KAAK,GAAG,OAAO,IAAI,CAAC,KAAK,CAAC;4CAAE,WAAU;;;;;iEAEzE,8OAAC;4CAAI,OAAM;4CAA6B,WAAU;4CAAyB,SAAQ;4CAA6B,MAAK;sDAClH,cAAA,8OAAC;gDAAK,GAAE;;;;;;;;;;;sDAGhB,8OAAC;4CAAG,WAAU;sDAAmD,OAAO,IAAI;;;;;;;;;;;;8CAE/E,8OAAC;oCAAI,WAAU;;sDACZ,8OAAC,0LAAI;4CAAC,MAAK;4CAAI,WAAU;sDAAyE;;;;;;sDAIlG,8OAAC,0LAAI;4CAAC,MAAK;4CAAY,WAAU;sDAAyD;;;;;;sDAC1F,8OAAC,0LAAI;4CAAC,MAAK;4CAAW,WAAU;sDAAyD;;;;;;wCACxF,KAAK,YAAY,kBACd,8OAAC,0LAAI;4CAAC,MAAK;4CAAS,WAAU;sDAAsD;;;;;;sDAExF,8OAAC;4CAAI,WAAU;;8DACV,8OAAC;oDAAI,KAAK,KAAK,OAAO,EAAE;oDAAW,KAAK,KAAK,OAAO,EAAE;oDAAa,WAAU;;;;;;8DAC7E,8OAAC;oDAAE,WAAU;8DAAwD,KAAK,OAAO,EAAE;;;;;;;;;;;;sDAEvF,8OAAC,0LAAI;4CAAC,MAAK;4CAAoB,WAAU;sDAAyD;;;;;;;;;;;;;;;;;;sCAG3G,8OAAC,uJAAS;4BAAC,QAAQ;4BAAQ,iBAAiB;;;;;;;;;;;;;;;;;0BAGjD,8OAAC;gBAAK,WAAU;0BACf,cAAA,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX"}}]
}