{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/ui/Input.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label: string;\r\n  containerClassName?: string;\r\n}\r\n\r\nconst Input: React.FC<InputProps> = ({ label, id, containerClassName, ...props }) => {\r\n  return (\r\n    <div className={containerClassName}>\r\n      <label htmlFor={id} className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n        {label}\r\n      </label>\r\n      <input\r\n        id={id}\r\n        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;"],"names":[],"mappings":";;;;;;AAOA,MAAM,QAA8B,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,kBAAkB,EAAE,GAAG,OAAO;IAC9E,qBACE,8OAAC;QAAI,WAAW;;0BACd,8OAAC;gBAAM,SAAS;gBAAI,WAAU;0BAC3B;;;;;;0BAEH,8OAAC;gBACC,IAAI;gBACJ,WAAU;gBACT,GAAG,KAAK;;;;;;;;;;;;AAIjB;uCAEe"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/messages/ConversationList.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport type { EnrichedConversation, User } from '../../types';\r\nimport Input from '../ui/Input';\r\n\r\ninterface ConversationListProps {\r\n  conversations: EnrichedConversation[];\r\n  currentUser: User;\r\n  activeConversationId?: string | null;\r\n  onConversationSelect: (conversation: EnrichedConversation) => void;\r\n  searchTerm?: string;\r\n  onSearchChange?: (term: string) => void;\r\n}\r\n\r\nconst ConversationList: React.FC<ConversationListProps> = ({\r\n  conversations,\r\n  currentUser,\r\n  activeConversationId,\r\n  onConversationSelect,\r\n  searchTerm,\r\n  onSearchChange,\r\n}) => {\r\n  const getOtherParticipant = (conv: EnrichedConversation) => {\r\n    return conv.participants.find((p) => p.id !== currentUser.id);\r\n  };\r\n\r\n  const filteredConversations = useMemo(() => {\r\n    if (!searchTerm) return conversations;\r\n    const lowercasedTerm = searchTerm.toLowerCase();\r\n    return conversations.filter((c) => c.displayName.toLowerCase().includes(lowercasedTerm));\r\n  }, [conversations, searchTerm]);\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col\">\r\n      {onSearchChange && searchTerm !== undefined && (\r\n        <div className=\"p-4 border-b border-gray-200\">\r\n          <Input\r\n            label=\"\"\r\n            id=\"conversation-search\"\r\n            type=\"search\"\r\n            placeholder=\"Search conversations...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n          />\r\n        </div>\r\n      )}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {filteredConversations.map((conv) => {\r\n            const otherParticipant = conv.isDirect ? getOtherParticipant(conv) : null;\r\n            const isActive = conv.id === activeConversationId;\r\n            const lastMessageText = conv.lastMessage\r\n              ? `${conv.lastMessage.userId === currentUser.id ? 'You: ' : ''}${conv.lastMessage.text}`\r\n              : 'No messages yet';\r\n\r\n            return (\r\n              <li\r\n                key={conv.id}\r\n                onClick={() => onConversationSelect(conv)}\r\n                className={`p-4 cursor-pointer transition-colors ${\r\n                  isActive ? 'bg-amber-50' : 'hover:bg-gray-50'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"relative\">\r\n                    {conv.isDirect && otherParticipant ? (\r\n                      <img\r\n                        className=\"h-10 w-10 rounded-full\"\r\n                        // FIX: Access avatarUrl and displayName from the nested profile object.\r\n                        src={otherParticipant.profile.avatarUrl}\r\n                        alt={otherParticipant.profile.displayName}\r\n                      />\r\n                    ) : (\r\n                      <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                        <span className=\"text-gray-500 font-bold\">#</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <p className=\"text-sm font-semibold text-gray-900 truncate\">\r\n                        {conv.displayName}\r\n                      </p>\r\n                      {conv.lastMessage && (\r\n                        <div className=\"text-xs text-gray-400 self-start flex-shrink-0 ml-2\">\r\n                          {conv.lastMessage.createdAt.toLocaleTimeString([], {\r\n                            hour: '2-digit',\r\n                            minute: '2-digit',\r\n                          })}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center\">\r\n                       <p className=\"text-sm text-gray-500 truncate\">{lastMessageText}</p>\r\n                       {conv.unreadCount > 0 && (\r\n                         <span className=\"ml-2 flex-shrink-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full\">\r\n                           {conv.unreadCount}\r\n                         </span>\r\n                       )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversationList;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAWA,MAAM,mBAAoD,CAAC,EACzD,aAAa,EACb,WAAW,EACX,oBAAoB,EACpB,oBAAoB,EACpB,UAAU,EACV,cAAc,EACf;IACC,MAAM,sBAAsB,CAAC;QAC3B,OAAO,KAAK,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,YAAY,EAAE;IAC9D;IAEA,MAAM,wBAAwB,IAAA,gNAAO,EAAC;QACpC,IAAI,CAAC,YAAY,OAAO;QACxB,MAAM,iBAAiB,WAAW,WAAW;QAC7C,OAAO,cAAc,MAAM,CAAC,CAAC,IAAM,EAAE,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC;IAC1E,GAAG;QAAC;QAAe;KAAW;IAE9B,qBACE,8OAAC;QAAI,WAAU;;YACZ,kBAAkB,eAAe,2BAChC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,4IAAK;oBACJ,OAAM;oBACN,IAAG;oBACH,MAAK;oBACL,aAAY;oBACZ,OAAO;oBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;0BAIpD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BACX,sBAAsB,GAAG,CAAC,CAAC;wBAC1B,MAAM,mBAAmB,KAAK,QAAQ,GAAG,oBAAoB,QAAQ;wBACrE,MAAM,WAAW,KAAK,EAAE,KAAK;wBAC7B,MAAM,kBAAkB,KAAK,WAAW,GACpC,GAAG,KAAK,WAAW,CAAC,MAAM,KAAK,YAAY,EAAE,GAAG,UAAU,KAAK,KAAK,WAAW,CAAC,IAAI,EAAE,GACtF;wBAEJ,qBACE,8OAAC;4BAEC,SAAS,IAAM,qBAAqB;4BACpC,WAAW,CAAC,qCAAqC,EAC/C,WAAW,gBAAgB,oBAC3B;sCAEF,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACZ,KAAK,QAAQ,IAAI,iCAChB,8OAAC;4CACC,WAAU;4CACV,wEAAwE;4CACxE,KAAK,iBAAiB,OAAO,CAAC,SAAS;4CACvC,KAAK,iBAAiB,OAAO,CAAC,WAAW;;;;;qGAG3C,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAK,WAAU;0DAA0B;;;;;;;;;;;;;;;;kDAIhD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEACV,KAAK,WAAW;;;;;;oDAElB,KAAK,WAAW,kBACf,8OAAC;wDAAI,WAAU;kEACZ,KAAK,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,EAAE;4DACjD,MAAM;4DACN,QAAQ;wDACV;;;;;;;;;;;;0DAIN,8OAAC;gDAAI,WAAU;;kEACZ,8OAAC;wDAAE,WAAU;kEAAkC;;;;;;oDAC9C,KAAK,WAAW,GAAG,mBAClB,8OAAC;wDAAK,WAAU;kEACb,KAAK,WAAW;;;;;;;;;;;;;;;;;;;;;;;;2BAvCvB,KAAK,EAAE;;;;;oBA+ClB;;;;;;;;;;;;;;;;;AAKV;uCAEe"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/messages/MessageStream.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/messages/MessageStream.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/messages/MessageStream.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6S,GAC1U,2EACA","ignoreList":[0]}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/messages/MessageStream.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/messages/MessageStream.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/messages/MessageStream.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyR,GACtT,uDACA","ignoreList":[0]}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n"],"names":[],"mappings":";;;;;;AAQA,MAAM,SAAgC,CAAC,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,SAAS,EAAE,GAAG,OAAO;IACxG,MAAM,cAAc;IAEpB,MAAM,iBAAiB;QACrB,SAAS;QACT,WAAW;QACX,QAAQ;IACV;IAEA,MAAM,cAAc;QAChB,IAAI;QACJ,IAAI;IACR;IAEA,qBACE,8OAAC;QAAO,WAAW,GAAG,YAAY,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QAAG,GAAG,KAAK;kBACxG;;;;;;AAGP;uCAEe"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/ui/Modal.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/ui/Modal.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ui/Modal.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","ignoreList":[0]}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/ui/Modal.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/ui/Modal.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ui/Modal.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2Q,GACxS,yCACA","ignoreList":[0]}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/ui/ToggleSwitch.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\ninterface ToggleSwitchProps {\r\n  label: string;\r\n  enabled: boolean;\r\n  onChange: (enabled: boolean) => void;\r\n  description?: string;\r\n}\r\n\r\nconst ToggleSwitch: React.FC<ToggleSwitchProps> = ({ label, enabled, onChange, description }) => {\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <span className=\"flex-grow flex flex-col\">\r\n        <span className=\"text-sm font-medium text-gray-900\">{label}</span>\r\n        {description && <span className=\"text-sm text-gray-500\">{description}</span>}\r\n      </span>\r\n      <button\r\n        type=\"button\"\r\n        className={`${\r\n          enabled ? 'bg-amber-600' : 'bg-gray-200'\r\n        } relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`}\r\n        role=\"switch\"\r\n        aria-checked={enabled}\r\n        onClick={() => onChange(!enabled)}\r\n      >\r\n        <span\r\n          aria-hidden=\"true\"\r\n          className={`${\r\n            enabled ? 'translate-x-5' : 'translate-x-0'\r\n          } pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`}\r\n        />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToggleSwitch;\r\n"],"names":[],"mappings":";;;;;;AAUA,MAAM,eAA4C,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE;IAC1F,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAK,WAAU;kCAAqC;;;;;;oBACpD,6BAAe,8OAAC;wBAAK,WAAU;kCAAyB;;;;;;;;;;;;0BAE3D,8OAAC;gBACC,MAAK;gBACL,WAAW,GACT,UAAU,iBAAiB,cAC5B,wNAAwN,CAAC;gBAC1N,MAAK;gBACL,gBAAc;gBACd,SAAS,IAAM,SAAS,CAAC;0BAEzB,cAAA,8OAAC;oBACC,eAAY;oBACZ,WAAW,GACT,UAAU,kBAAkB,gBAC7B,2HAA2H,CAAC;;;;;;;;;;;;;;;;;AAKvI;uCAEe"}},
    {"offset": {"line": 413, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/messages/CreateChannelForm.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User } from '../../types';\r\nimport { getMembersForTenant } from '../../../lib/data';\r\nimport Input from '../ui/Input';\r\nimport Button from '../ui/Button';\r\nimport ToggleSwitch from '../ui/ToggleSwitch';\r\n\r\ninterface CreateChannelFormProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onSubmit: (data: { name: string; isPrivate: boolean; participantIds: string[] }) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst CreateChannelForm: React.FC<CreateChannelFormProps> = ({ tenant, currentUser, onSubmit, onCancel }) => {\r\n  const [name, setName] = useState('');\r\n  const [isPrivate, setIsPrivate] = useState(false);\r\n  const [selectedParticipants, setSelectedParticipants] = useState<Set<string>>(() => new Set([currentUser.id]));\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const members = useMemo(() => getMembersForTenant(tenant.id), [tenant.id]);\r\n\r\n  const handleParticipantToggle = (userId: string) => {\r\n    if (userId === currentUser.id) return; // Current user cannot be deselected\r\n    setSelectedParticipants(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(userId)) {\r\n        newSet.delete(userId);\r\n      } else {\r\n        newSet.add(userId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n  \r\n  const filteredMembers = useMemo(() => {\r\n    if (!searchTerm) return members;\r\n    // FIX: Access displayName from the nested profile object.\r\n    return members.filter(m => m.profile.displayName.toLowerCase().includes(searchTerm.toLowerCase()));\r\n  }, [members, searchTerm]);\r\n\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) {\r\n      alert('Please enter a channel name.');\r\n      return;\r\n    }\r\n    onSubmit({\r\n      name: name.trim(),\r\n      isPrivate,\r\n      participantIds: Array.from(selectedParticipants),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <Input\r\n        label=\"Channel Name\"\r\n        id=\"channel-name\"\r\n        name=\"name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        required\r\n        placeholder=\"# announcements\"\r\n      />\r\n      \r\n      <ToggleSwitch\r\n        label=\"Private Channel\"\r\n        description=\"If enabled, only selected members can see and join this channel.\"\r\n        enabled={isPrivate}\r\n        onChange={setIsPrivate}\r\n      />\r\n\r\n      {isPrivate && (\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-medium text-gray-900\">Select Members</h3>\r\n          <Input\r\n            label=\"\"\r\n            id=\"member-search\"\r\n            placeholder=\"Search members to add...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n          />\r\n          <div className=\"max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2 space-y-2\">\r\n            {filteredMembers.map(member => (\r\n              <div key={member.id} className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {/* FIX: Access avatarUrl and displayName from the nested profile object. */}\r\n                  <img src={member.profile.avatarUrl} alt={member.profile.displayName} className=\"w-8 h-8 rounded-full\" />\r\n                  <span className=\"text-sm text-gray-800\">{member.profile.displayName}</span>\r\n                </div>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500\"\r\n                  checked={selectedParticipants.has(member.id)}\r\n                  onChange={() => handleParticipantToggle(member.id)}\r\n                  disabled={member.id === currentUser.id}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\">\r\n          Create Channel\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CreateChannelForm;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;AASA,MAAM,oBAAsD,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACtG,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAc,IAAM,IAAI,IAAI;YAAC,YAAY,EAAE;SAAC;IAC5G,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,UAAU,IAAA,gNAAO,EAAC,IAAM,IAAA,kIAAmB,EAAC,OAAO,EAAE,GAAG;QAAC,OAAO,EAAE;KAAC;IAEzE,MAAM,0BAA0B,CAAC;QAC/B,IAAI,WAAW,YAAY,EAAE,EAAE,QAAQ,oCAAoC;QAC3E,wBAAwB,CAAA;YACtB,MAAM,SAAS,IAAI,IAAI;YACvB,IAAI,OAAO,GAAG,CAAC,SAAS;gBACtB,OAAO,MAAM,CAAC;YAChB,OAAO;gBACL,OAAO,GAAG,CAAC;YACb;YACA,OAAO;QACT;IACF;IAEA,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,IAAI,CAAC,YAAY,OAAO;QACxB,0DAA0D;QAC1D,OAAO,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,CAAC,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;IAChG,GAAG;QAAC;QAAS;KAAW;IAGxB,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,KAAK,IAAI,IAAI;YAChB,MAAM;YACN;QACF;QACA,SAAS;YACP,MAAM,KAAK,IAAI;YACf;YACA,gBAAgB,MAAM,IAAI,CAAC;QAC7B;IACF;IAEA,qBACE,8OAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,8OAAC,4IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,QAAQ;gBACR,aAAY;;;;;;0BAGd,8OAAC,mJAAY;gBACX,OAAM;gBACN,aAAY;gBACZ,SAAS;gBACT,UAAU;;;;;;YAGX,2BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC,4IAAK;wBACJ,OAAM;wBACN,IAAG;wBACH,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE/C,8OAAC;wBAAI,WAAU;kCACZ,gBAAgB,GAAG,CAAC,CAAA,uBACnB,8OAAC;gCAAoB,WAAU;;kDAC7B,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDAAI,KAAK,OAAO,OAAO,CAAC,SAAS;gDAAE,KAAK,OAAO,OAAO,CAAC,WAAW;gDAAE,WAAU;;;;;;0DAC/E,8OAAC;gDAAK,WAAU;0DAAyB,OAAO,OAAO,CAAC,WAAW;;;;;;;;;;;;kDAErE,8OAAC;wCACC,MAAK;wCACL,WAAU;wCACV,SAAS,qBAAqB,GAAG,CAAC,OAAO,EAAE;wCAC3C,UAAU,IAAM,wBAAwB,OAAO,EAAE;wCACjD,UAAU,OAAO,EAAE,KAAK,YAAY,EAAE;;;;;;;+BAXhC,OAAO,EAAE;;;;;;;;;;;;;;;;0BAmB3B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6IAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAY,SAAS;kCAAU;;;;;;kCAG7D,8OAAC,6IAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAM9B;uCAEe"}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/messages/ConversationDetailsPanel.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\n// FIX: Changed 'import type' for TenantRole to a value import.\r\nimport { TenantRole, type EnrichedConversation, type Tenant, type User, type UserTenantMembership } from '../../types';\r\nimport { getMembershipForUserInTenant } from '../../../lib/data';\r\n\r\ninterface ConversationDetailsPanelProps {\r\n  conversation: EnrichedConversation;\r\n  tenant: Tenant;\r\n  onViewProfile: (userId: string) => void;\r\n}\r\n\r\ninterface EnrichedParticipant extends User {\r\n  roles: TenantRole[];\r\n  membership: UserTenantMembership;\r\n}\r\n\r\nconst ConversationDetailsPanel: React.FC<ConversationDetailsPanelProps> = ({ conversation, tenant, onViewProfile }) => {\r\n  const enrichedParticipants = useMemo((): EnrichedParticipant[] => {\r\n    return conversation.participants.map(p => {\r\n        const membership = getMembershipForUserInTenant(p.id, tenant.id);\r\n        if (!membership) return null; // Should not happen for channel members\r\n        return {\r\n            ...p,\r\n            roles: membership.roles.map(r => r.role),\r\n            membership,\r\n        }\r\n    }).filter((p): p is EnrichedParticipant => p !== null)\r\n    .sort((a,b) => {\r\n        const roleOrder = { [TenantRole.ADMIN]: 0, [TenantRole.STAFF]: 1, [TenantRole.CLERGY]: 1, [TenantRole.MODERATOR]: 2, [TenantRole.MEMBER]: 3 };\r\n        const aRole = a.roles[0] || TenantRole.MEMBER;\r\n        const bRole = b.roles[0] || TenantRole.MEMBER;\r\n        if (roleOrder[aRole] < roleOrder[bRole]) return -1;\r\n        if (roleOrder[aRole] > roleOrder[bRole]) return 1;\r\n        return a.profile.displayName.localeCompare(b.profile.displayName);\r\n    });\r\n  }, [conversation.participants, tenant.id]);\r\n\r\n  const roleColors: { [key: string]: string } = {\r\n    ADMIN: 'bg-red-100 text-red-800',\r\n    STAFF: 'bg-sky-100 text-sky-800',\r\n    CLERGY: 'bg-emerald-100 text-emerald-800',\r\n    MODERATOR: 'bg-indigo-100 text-indigo-800',\r\n    MEMBER: 'bg-gray-100 text-gray-800',\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-200\">\r\n        <h3 className=\"font-bold text-lg text-gray-900\">{conversation.displayName}</h3>\r\n        {conversation.description && (\r\n          <p className=\"text-sm text-gray-500 mt-1\">{conversation.description}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Members List */}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        <div className=\"p-4\">\r\n          <h4 className=\"text-xs font-bold uppercase text-gray-500\">\r\n            Members &mdash; {enrichedParticipants.length}\r\n          </h4>\r\n        </div>\r\n        <ul>\r\n          {enrichedParticipants.map(participant => (\r\n            <li \r\n              key={participant.id} \r\n              className=\"px-4 py-2 hover:bg-gray-50 cursor-pointer\"\r\n              onClick={() => onViewProfile(participant.id)}\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <img src={participant.profile.avatarUrl} alt={participant.profile.displayName} className=\"w-8 h-8 rounded-full\" />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm font-semibold text-gray-800\">{participant.membership.displayName || participant.profile.displayName}</p>\r\n                  <div className=\"flex flex-wrap gap-1 mt-0.5\">\r\n                    {participant.roles.map(role => (\r\n                       <span key={role} className={`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${roleColors[role] || 'bg-gray-100 text-gray-800'}`}>\r\n                         {role}\r\n                       </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversationDetailsPanel;"],"names":[],"mappings":";;;;;AAAA;;;;;;AAGA;;;;;AAaA,MAAM,2BAAoE,CAAC,EAAE,YAAY,EAAE,MAAM,EAAE,aAAa,EAAE;IAChH,MAAM,uBAAuB,IAAA,gNAAO,EAAC;QACnC,OAAO,aAAa,YAAY,CAAC,GAAG,CAAC,CAAA;YACjC,MAAM,aAAa,IAAA,2IAA4B,EAAC,EAAE,EAAE,EAAE,OAAO,EAAE;YAC/D,IAAI,CAAC,YAAY,OAAO,MAAM,wCAAwC;YACtE,OAAO;gBACH,GAAG,CAAC;gBACJ,OAAO,WAAW,KAAK,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;gBACvC;YACJ;QACJ,GAAG,MAAM,CAAC,CAAC,IAAgC,MAAM,MAChD,IAAI,CAAC,CAAC,GAAE;YACL,MAAM,YAAY;gBAAE,CAAC,WAAW,KAAK,CAAC,EAAE;gBAAG,CAAC,WAAW,KAAK,CAAC,EAAE;gBAAG,CAAC,WAAW,MAAM,CAAC,EAAE;gBAAG,CAAC,WAAW,SAAS,CAAC,EAAE;gBAAG,CAAC,WAAW,MAAM,CAAC,EAAE;YAAE;YAC5I,MAAM,QAAQ,EAAE,KAAK,CAAC,EAAE,IAAI,WAAW,MAAM;YAC7C,MAAM,QAAQ,EAAE,KAAK,CAAC,EAAE,IAAI,WAAW,MAAM;YAC7C,IAAI,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,EAAE,OAAO,CAAC;YACjD,IAAI,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,EAAE,OAAO;YAChD,OAAO,EAAE,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,EAAE,OAAO,CAAC,WAAW;QACpE;IACF,GAAG;QAAC,aAAa,YAAY;QAAE,OAAO,EAAE;KAAC;IAEzC,MAAM,aAAwC;QAC5C,OAAO;QACP,OAAO;QACP,QAAQ;QACR,WAAW;QACX,QAAQ;IACV;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC,aAAa,WAAW;;;;;;oBACxE,aAAa,WAAW,kBACvB,8OAAC;wBAAE,WAAU;kCAA8B,aAAa,WAAW;;;;;;;;;;;;0BAKvE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAG,WAAU;;gCAA4C;gCACvC,qBAAqB,MAAM;;;;;;;;;;;;kCAGhD,8OAAC;kCACE,qBAAqB,GAAG,CAAC,CAAA,4BACxB,8OAAC;gCAEC,WAAU;gCACV,SAAS,IAAM,cAAc,YAAY,EAAE;0CAE3C,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,KAAK,YAAY,OAAO,CAAC,SAAS;4CAAE,KAAK,YAAY,OAAO,CAAC,WAAW;4CAAE,WAAU;;;;;;sDACzF,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAuC,YAAY,UAAU,CAAC,WAAW,IAAI,YAAY,OAAO,CAAC,WAAW;;;;;;8DACzH,8OAAC;oDAAI,WAAU;8DACZ,YAAY,KAAK,CAAC,GAAG,CAAC,CAAA,qBACpB,8OAAC;4DAAgB,WAAW,CAAC,sEAAsE,EAAE,UAAU,CAAC,KAAK,IAAI,6BAA6B;sEACnJ;2DADQ;;;;;;;;;;;;;;;;;;;;;;+BAVf,YAAY,EAAE;;;;;;;;;;;;;;;;;;;;;;AAuBjC;uCAEe"}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/components/tenant/ChatPage.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect, useCallback } from 'react';\r\nimport type { Tenant, User, EnrichedConversation } from '../../types';\r\nimport { getConversationsForUser, createConversation } from '../../../lib/data';\r\nimport ConversationList from '../messages/ConversationList';\r\nimport MessageStream from '../messages/MessageStream';\r\nimport { can } from '../../lib/permissions';\r\nimport Button from '../ui/Button';\r\nimport Modal from '../ui/Modal';\r\nimport CreateChannelForm from '../messages/CreateChannelForm';\r\nimport ConversationDetailsPanel from '../messages/ConversationDetailsPanel';\r\n\r\ninterface ChatPageProps {\r\n  tenant: Tenant;\r\n  user: User;\r\n  onViewProfile: (userId: string) => void;\r\n}\r\n\r\nconst ChatPage: React.FC<ChatPageProps> = ({ tenant, user, onViewProfile }) => {\r\n  const [updateTrigger, setUpdateTrigger] = useState(0);\r\n  const [isDetailsPanelOpen, setIsDetailsPanelOpen] = useState(true);\r\n\r\n  const tenantConversations = useMemo(() => {\r\n    const all = getConversationsForUser(user.id);\r\n    return all.filter((c) => c.tenantId === tenant.id);\r\n  }, [user.id, tenant.id, updateTrigger]);\r\n\r\n  const [activeConversation, setActiveConversation] = useState<EnrichedConversation | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [newlyCreatedConvId, setNewlyCreatedConvId] = useState<string | null>(null);\r\n\r\n  const canCreate = can(user, tenant, 'canCreateGroupChats');\r\n\r\n  useEffect(() => {\r\n    if (newlyCreatedConvId) {\r\n      // A new channel was just created\r\n      const newConv = tenantConversations.find((c) => c.id === newlyCreatedConvId);\r\n      if (newConv) {\r\n        setActiveConversation(newConv);\r\n        setNewlyCreatedConvId(null); // Reset\r\n      }\r\n    } else {\r\n      // Normal behavior: check if active is still valid or pick a default\r\n      const activeConvStillExists = tenantConversations.some((c) => c.id === activeConversation?.id);\r\n      if (!activeConvStillExists) {\r\n        const announcementChannel = tenantConversations.find(c => c.name === '#announcements');\r\n        const defaultChannel = tenantConversations.find((c) => c.isDefaultChannel);\r\n        setActiveConversation(announcementChannel || defaultChannel || tenantConversations[0] || null);\r\n      }\r\n    }\r\n  }, [tenantConversations, activeConversation, newlyCreatedConvId]);\r\n\r\n  const handleCreateChannel = (data: { name: string; isPrivate: boolean; participantIds: string[] }) => {\r\n    const newConv = createConversation(tenant.id, user.id, data.name, data.isPrivate, data.participantIds);\r\n    setIsModalOpen(false);\r\n    setNewlyCreatedConvId(newConv.id);\r\n    setUpdateTrigger((c) => c + 1);\r\n  };\r\n\r\n  const handleConversationSelect = useCallback((conversation: EnrichedConversation) => {\r\n    setActiveConversation(conversation);\r\n  }, []);\r\n\r\n  const forceConversationListUpdate = useCallback(() => {\r\n    setUpdateTrigger(c => c + 1);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex h-[calc(100vh-170px)] bg-white rounded-lg shadow-sm overflow-hidden\">\r\n        {/* Left Panel: Conversation List */}\r\n        <div className=\"w-full sm:w-1/3 md:w-1/4 border-r border-gray-200 flex flex-col\">\r\n          <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Channels</h2>\r\n              <p className=\"text-sm text-gray-500\">Conversations in {tenant.name}</p>\r\n            </div>\r\n            {canCreate && (\r\n              <Button size=\"sm\" onClick={() => setIsModalOpen(true)}>\r\n                New\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <ConversationList\r\n            conversations={tenantConversations}\r\n            currentUser={user}\r\n            activeConversationId={activeConversation?.id}\r\n            onConversationSelect={handleConversationSelect}\r\n          />\r\n        </div>\r\n\r\n        {/* Middle Panel: Message Stream */}\r\n        <div className=\"flex-1 flex flex-col\">\r\n          {activeConversation ? (\r\n            <MessageStream\r\n              key={activeConversation.id} // Re-mount component when conversation changes\r\n              currentUser={user}\r\n              conversation={activeConversation}\r\n              onViewProfile={onViewProfile}\r\n              tenant={tenant}\r\n              isDetailsPanelOpen={isDetailsPanelOpen}\r\n              onToggleDetailsPanel={() => setIsDetailsPanelOpen(!isDetailsPanelOpen)}\r\n              onMarkAsRead={forceConversationListUpdate}\r\n            />\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center text-center\">\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900\">No Channels Available</h3>\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  {canCreate ? 'Create a channel to start chatting.' : 'There are no channels for you in this tenant yet.'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Panel: Conversation Details */}\r\n        {isDetailsPanelOpen && activeConversation && (\r\n            <div className=\"hidden lg:block w-full sm:w-1/3 md:w-1/4 border-l border-gray-200\">\r\n                <ConversationDetailsPanel \r\n                    key={activeConversation.id}\r\n                    conversation={activeConversation}\r\n                    tenant={tenant}\r\n                    onViewProfile={onViewProfile}\r\n                />\r\n            </div>\r\n        )}\r\n\r\n      </div>\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Create a New Channel\">\r\n        <CreateChannelForm\r\n          tenant={tenant}\r\n          currentUser={user}\r\n          onSubmit={handleCreateChannel}\r\n          onCancel={() => setIsModalOpen(false)}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatPage;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/josep/VSCODEprojects/Temple/Temple4/app/tenants/%5BtenantId%5D/chat/page.tsx"],"sourcesContent":["import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getTenantById, getUserById } from '@/lib/data';\r\nimport ChatPage from '@/app/components/tenant/ChatPage';\r\n\r\nexport default async function TenantChatPage({ params }: { params: Promise<{ tenantId: string }> }) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session || !session.user) {\r\n    redirect('/auth/login');\r\n  }\r\n\r\n  const resolvedParams = await params;\r\n  const tenant = await getTenantById(resolvedParams.tenantId);\r\n  const user = await getUserById((session.user as any).id);\r\n\r\n  if (!tenant || !user) {\r\n    redirect('/');\r\n  }\r\n\r\n  return <ChatPage tenant={tenant} user={user} />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;;;;;;;AAEe,eAAe,eAAe,EAAE,MAAM,EAA6C;IAChG,MAAM,UAAU,MAAM,IAAA,iKAAgB,EAAC,gKAAW;IAElD,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,EAAE;QAC7B,IAAA,iMAAQ,EAAC;IACX;IAEA,MAAM,iBAAiB,MAAM;IAC7B,MAAM,SAAS,MAAM,IAAA,4HAAa,EAAC,eAAe,QAAQ;IAC1D,MAAM,OAAO,MAAM,IAAA,0HAAW,EAAC,AAAC,QAAQ,IAAI,CAAS,EAAE;IAEvD,IAAI,CAAC,UAAU,CAAC,MAAM;QACpB,IAAA,iMAAQ,EAAC;IACX;IAEA,qBAAO,8OAAC,mJAAQ;QAAC,QAAQ;QAAQ,MAAM;;;;;;AACzC"}}]
}