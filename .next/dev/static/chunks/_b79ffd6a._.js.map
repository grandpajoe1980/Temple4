{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/types.ts"],"sourcesContent":["// --- ENUMS ---\r\n\r\nexport enum TenantRole {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  CLERGY = 'CLERGY',\r\n  MODERATOR = 'MODERATOR',\r\n  ADMIN = 'ADMIN',\r\n}\r\n\r\n// Role types for permission mapping\r\nexport enum TenantRoleType {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  MODERATOR = 'MODERATOR',\r\n}\r\n\r\nexport enum MembershipStatus {\r\n  REQUESTED = 'REQUESTED',\r\n  APPROVED = 'APPROVED',\r\n  REJECTED = 'REJECTED',\r\n  BANNED = 'BANNED',\r\n}\r\n\r\nexport enum MembershipApprovalMode {\r\n  OPEN = 'OPEN',\r\n  APPROVAL_REQUIRED = 'APPROVAL_REQUIRED',\r\n}\r\n\r\nexport enum VolunteerStatus {\r\n  CONFIRMED = 'CONFIRMED',\r\n  CANCELED = 'CANCELED',\r\n}\r\n\r\nexport enum SmallGroupRole {\r\n  LEADER = 'LEADER',\r\n  MEMBER = 'MEMBER',\r\n}\r\n\r\nexport enum CommunityPostType {\r\n    PRAYER_REQUEST = 'PRAYER_REQUEST',\r\n    TANGIBLE_NEED = 'TANGIBLE_NEED',\r\n}\r\n\r\nexport enum CommunityPostStatus {\r\n    PENDING_APPROVAL = 'PENDING_APPROVAL',\r\n    PUBLISHED = 'PUBLISHED',\r\n    FULFILLED = 'FULFILLED',\r\n}\r\n\r\nexport enum ResourceVisibility {\r\n    PUBLIC = 'PUBLIC',\r\n    MEMBERS_ONLY = 'MEMBERS_ONLY',\r\n}\r\n\r\nexport enum FileType {\r\n    PDF = 'PDF',\r\n    DOCX = 'DOCX',\r\n    MP3 = 'MP3',\r\n    JPG = 'JPG',\r\n    PNG = 'PNG',\r\n    OTHER = 'OTHER',\r\n}\r\n\r\nexport enum ContactSubmissionStatus {\r\n    UNREAD = 'UNREAD',\r\n    READ = 'READ',\r\n    ARCHIVED = 'ARCHIVED',\r\n}\r\n\r\n\r\n// --- USER-RELATED MODELS ---\r\nexport interface NotificationPreferences {\r\n  email: {\r\n    newAnnouncement: boolean;\r\n    newEvent: boolean;\r\n    directMessage: boolean;\r\n    groupChatMessage: boolean;\r\n    membershipUpdate: boolean;\r\n  };\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  password?: string; // NOTE: For mock login simulation.\r\n  isSuperAdmin: boolean;\r\n  profile: UserProfile;\r\n  privacySettings: UserPrivacySettings;\r\n  accountSettings: AccountSettings;\r\n  notificationPreferences: NotificationPreferences;\r\n}\r\n\r\nexport interface UserProfile {\r\n  displayName: string;\r\n  avatarUrl?: string;\r\n  bio?: string;\r\n  locationCity?: string;\r\n  locationCountry?: string;\r\n  languages?: string[];\r\n}\r\n\r\nexport interface UserPrivacySettings {\r\n  showAffiliations: boolean;\r\n}\r\n\r\nexport interface AccountSettings {\r\n  timezonePreference?: string;\r\n  dateFormat?: string;\r\n  timeFormat?: string;\r\n  languagePreference?: string;\r\n}\r\n\r\n\r\n// --- TENANT-RELATED MODELS ---\r\n\r\nexport interface Tenant {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  creed: string;\r\n  address: {\r\n    street: string;\r\n    city: string;\r\n    state: string;\r\n    country: string;\r\n    postalCode: string;\r\n  };\r\n  contactEmail?: string;\r\n  phoneNumber?: string;\r\n  description: string;\r\n  settings: TenantSettings;\r\n  branding: TenantBranding;\r\n  permissions: TenantFeaturePermissions;\r\n}\r\n\r\nexport interface TenantBranding {\r\n  logoUrl: string;\r\n  bannerImageUrl: string;\r\n  primaryColor: string;\r\n  accentColor: string;\r\n  customLinks: Array<{ label: string; url: string }>;\r\n}\r\n\r\nexport interface LiveStreamSettings {\r\n  provider: 'YOUTUBE' | 'FACEBOOK' | 'VIMEO' | 'OTHER';\r\n  embedUrl: string;\r\n  isLive: boolean; // Manual toggle by admin\r\n}\r\n\r\nexport interface TenantSettings {\r\n  isPublic: boolean;\r\n  membershipApprovalMode: MembershipApprovalMode;\r\n  // Features\r\n  enableCalendar: boolean;\r\n  enablePosts: boolean;\r\n  enableSermons: boolean;\r\n  enablePodcasts: boolean;\r\n  enableBooks: boolean;\r\n  enableMemberDirectory: boolean;\r\n  enableGroupChat: boolean;\r\n  enableComments: boolean;\r\n  enableReactions: boolean;\r\n  enableDonations: boolean;\r\n  enableVolunteering: boolean;\r\n  enableSmallGroups: boolean;\r\n  enableLiveStream: boolean;\r\n  enablePrayerWall: boolean;\r\n  enableResourceCenter: boolean;\r\n  donationSettings: DonationSettings;\r\n  liveStreamSettings: LiveStreamSettings;\r\n  // Visibility (simplified for mock)\r\n  visitorVisibility: {\r\n    calendar: boolean;\r\n    posts: boolean;\r\n    sermons: boolean;\r\n    podcasts: boolean;\r\n    books: boolean;\r\n    prayerWall: boolean;\r\n  };\r\n}\r\n\r\n\r\nexport interface RolePermissions {\r\n  canCreatePosts: boolean;\r\n  canCreateEvents: boolean;\r\n  canCreateSermons: boolean;\r\n  canCreatePodcasts: boolean;\r\n  canCreateBooks: boolean;\r\n  canCreateGroupChats: boolean;\r\n  canInviteMembers: boolean;\r\n  canApproveMembership: boolean;\r\n  canBanMembers: boolean;\r\n  canModeratePosts: boolean;\r\n  canModerateChats: boolean;\r\n  canPostInAnnouncementChannels?: boolean;\r\n  canManagePrayerWall: boolean;\r\n  canUploadResources: boolean;\r\n  canManageResources: boolean;\r\n  canManageContactSubmissions: boolean;\r\n}\r\n\r\n// Sticking with a map for easier frontend access\r\nexport type TenantFeaturePermissions = {\r\n  [key in TenantRoleType]?: RolePermissions;\r\n} & { ADMIN: RolePermissions };\r\n\r\n\r\nexport interface UserTenantMembership {\r\n  id: string;\r\n  userId: string;\r\n  tenantId: string;\r\n  status: MembershipStatus;\r\n  roles: UserTenantRole[];\r\n  displayName?: string; // Tenant-specific display name override\r\n}\r\n\r\nexport interface UserTenantRole {\r\n    id: string;\r\n    role: TenantRole;\r\n    displayTitle?: string;\r\n    isPrimary: boolean;\r\n}\r\n\r\n// Enriched type for displaying members in the UI\r\nexport interface EnrichedMember extends User {\r\n  membership: UserTenantMembership;\r\n}\r\n\r\n\r\n// --- CONTENT & MESSAGING (Largely Unchanged) ---\r\n\r\nexport interface Post {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  title: string;\r\n  body: string;\r\n  isPublished: boolean;\r\n  publishedAt: Date;\r\n}\r\nexport interface PostInput {\r\n  title: string;\r\n  body: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  isPublished: boolean;\r\n}\r\nexport interface PostWithAuthor extends Post {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface Event {\r\n  id:string;\r\n  tenantId: string;\r\n  createdByUserId: string;\r\n  title: string;\r\n  description: string;\r\n  startDateTime: Date;\r\n  endDateTime: Date;\r\n  locationText: string;\r\n  isOnline: boolean;\r\n  onlineUrl?: string;\r\n}\r\nexport interface EventWithCreator extends Event {\r\n    creatorDisplayName: string;\r\n    creatorAvatarUrl?: string;\r\n}\r\n\r\nexport interface MediaItem {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'SERMON_VIDEO' | 'PODCAST_AUDIO';\r\n  title: string;\r\n  description: string;\r\n  embedUrl: string;\r\n  publishedAt: Date;\r\n}\r\nexport interface EnrichedMediaItem extends MediaItem {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  text: string;\r\n  createdAt: Date;\r\n  isDeleted?: boolean;\r\n}\r\n\r\nexport interface EnrichedChatMessage extends ChatMessage {\r\n  userDisplayName: string;\r\n  userAvatarUrl?: string;\r\n}\r\n\r\nexport interface Conversation {\r\n  id: string;\r\n  isDirect: boolean;\r\n  tenantId: string | null;\r\n  isPrivateGroup: boolean;\r\n  name?: string; // For group channels\r\n  description?: string; // Description for channels\r\n  createdByUserId: string;\r\n  isDefaultChannel: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface ConversationParticipant {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  lastReadMessageId?: string | null;\r\n}\r\n\r\nexport interface EnrichedConversation extends Conversation {\r\n    participants: User[];\r\n    unreadCount: number;\r\n    lastMessage?: EnrichedChatMessage;\r\n    displayName: string;\r\n}\r\n\r\n\r\n// --- ADMIN & AUDIT TYPES ---\r\n\r\nexport enum ActionType {\r\n  IMPERSONATE_START = 'IMPERSONATE_START',\r\n  IMPERSONATE_END = 'IMPERSONATE_END',\r\n  CREATE_POST = 'CREATE_POST',\r\n  DELETE_POST = 'DELETE_POST',\r\n  BAN_USER = 'BAN_USER',\r\n  UNBAN_USER = 'UNBAN_USER',\r\n  DELETE_MESSAGE = 'DELETE_MESSAGE',\r\n  USER_JOINED_TENANT = 'USER_JOINED_TENANT',\r\n  MEMBERSHIP_STATUS_UPDATED = 'MEMBERSHIP_STATUS_UPDATED',\r\n  MEMBER_ROLES_UPDATED = 'MEMBER_ROLES_UPDATED',\r\n  MEMBERSHIP_PROFILE_UPDATED = 'MEMBERSHIP_PROFILE_UPDATED',\r\n  USER_REGISTERED = 'USER_REGISTERED',\r\n  USER_PROFILE_UPDATED = 'USER_PROFILE_UPDATED',\r\n  ADMIN_UPDATED_USER_PROFILE = 'ADMIN_UPDATED_USER_PROFILE',\r\n  TENANT_PERMISSIONS_UPDATED = 'TENANT_PERMISSIONS_UPDATED',\r\n}\r\n\r\nexport interface AuditLog {\r\n  id: string;\r\n  actorUserId: string;\r\n  effectiveUserId?: string;\r\n  actionType: ActionType;\r\n  entityType?: string;\r\n  entityId?: string;\r\n  metadata?: Record<string, any>;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- NOTIFICATION MODELS ---\r\nexport type NotificationType =\r\n  | 'NEW_DIRECT_MESSAGE'\r\n  | 'NEW_ANNOUNCEMENT'\r\n  | 'MEMBERSHIP_APPROVED'\r\n  | 'NEW_CONTACT_SUBMISSION';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  userId: string; // The recipient\r\n  actorUserId?: string; // The user who caused the notification\r\n  type: NotificationType;\r\n  message: string;\r\n  link?: string; // e.g., messages, tenant/tenant-1\r\n  isRead: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- DONATION MODELS ---\r\nexport interface DonationSettings {\r\n  mode: 'EXTERNAL' | 'INTEGRATED';\r\n  externalUrl?: string;\r\n  integratedProvider?: 'STRIPE' | 'PAYPAL';\r\n  currency: string;\r\n  suggestedAmounts: number[];\r\n  allowCustomAmounts: boolean;\r\n  leaderboardEnabled: boolean;\r\n  leaderboardVisibility: 'PUBLIC' | 'MEMBERS_ONLY';\r\n  leaderboardTimeframe: 'ALL_TIME' | 'YEARLY' | 'MONTHLY';\r\n}\r\n\r\nexport interface DonationRecord {\r\n  id: string;\r\n  tenantId: string;\r\n  userId: string | null; // null for anonymous from public page\r\n  displayName: string; // denormalized for anonymous/guest donations\r\n  amount: number;\r\n  currency: string;\r\n  donatedAt: Date;\r\n  isAnonymousOnLeaderboard: boolean;\r\n  message?: string;\r\n}\r\n\r\nexport interface EnrichedDonationRecord extends DonationRecord {\r\n    userAvatarUrl?: string;\r\n}\r\n\r\n// --- VOLUNTEER MODELS ---\r\nexport interface VolunteerNeed {\r\n  id: string;\r\n  tenantId: string;\r\n  eventId?: string; // Optional link to an Event\r\n  title: string;\r\n  description: string;\r\n  date: Date;\r\n  slotsNeeded: number;\r\n}\r\n\r\nexport interface VolunteerSignup {\r\n  id: string;\r\n  needId: string;\r\n  userId: string;\r\n  signedUpAt: Date;\r\n  status: VolunteerStatus;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedSignup {\r\n  signup: VolunteerSignup;\r\n  user: User;\r\n}\r\n\r\nexport interface EnrichedVolunteerNeed extends VolunteerNeed {\r\n  signups: EnrichedSignup[];\r\n}\r\n\r\n// --- SMALL GROUP MODELS ---\r\nexport interface SmallGroup {\r\n  id: string;\r\n  tenantId: string;\r\n  name: string;\r\n  description: string;\r\n  leaderUserId: string;\r\n  meetingSchedule: string; // e.g., \"Tuesdays at 7 PM\"\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface SmallGroupMembership {\r\n  id: string;\r\n  groupId: string;\r\n  userId: string;\r\n  role: SmallGroupRole;\r\n  joinedAt: Date;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedGroupMember {\r\n    membership: SmallGroupMembership;\r\n    user: User;\r\n}\r\n\r\nexport interface EnrichedSmallGroup extends SmallGroup {\r\n    leader: User;\r\n    members: EnrichedGroupMember[];\r\n}\r\n\r\n// --- COMMUNITY BOARD / PRAYER WALL MODELS ---\r\nexport interface CommunityPost {\r\n    id: string;\r\n    tenantId: string;\r\n    authorUserId: string | null; // Null for anonymous\r\n    type: CommunityPostType;\r\n    body: string;\r\n    isAnonymous: boolean;\r\n    status: CommunityPostStatus;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedCommunityPost extends CommunityPost {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\n// --- RESOURCE CENTER MODELS ---\r\nexport interface ResourceItem {\r\n    id: string;\r\n    tenantId: string;\r\n    uploaderUserId: string;\r\n    title: string;\r\n    description: string;\r\n    fileUrl: string; // For mock, this is just a string. In real app, it would be a URL to a file.\r\n    fileType: FileType;\r\n    visibility: ResourceVisibility;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedResourceItem extends ResourceItem {\r\n    uploaderDisplayName: string;\r\n    uploaderAvatarUrl?: string;\r\n}\r\n\r\n// --- CONTACT & SUBMISSIONS ---\r\nexport interface ContactSubmission {\r\n    id: string;\r\n    tenantId: string;\r\n    name: string;\r\n    email: string;\r\n    message: string;\r\n    status: ContactSubmissionStatus;\r\n    createdAt: Date;\r\n}"],"names":[],"mappings":"AAAA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAET,IAAA,AAAK,oCAAA;;;;;;WAAA;;AASL,IAAA,AAAK,wCAAA;;;;WAAA;;AAML,IAAA,AAAK,0CAAA;;;;;WAAA;;AAOL,IAAA,AAAK,gDAAA;;;WAAA;;AAKL,IAAA,AAAK,yCAAA;;;WAAA;;AAKL,IAAA,AAAK,wCAAA;;;WAAA;;AAKL,IAAA,AAAK,2CAAA;;;WAAA;;AAKL,IAAA,AAAK,6CAAA;;;;WAAA;;AAML,IAAA,AAAK,4CAAA;;;WAAA;;AAKL,IAAA,AAAK,kCAAA;;;;;;;WAAA;;AASL,IAAA,AAAK,iDAAA;;;;WAAA;;AAyQL,IAAA,AAAK,oCAAA;;;;;;;;;;;;;;;;WAAA"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/Tabs.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\ninterface TabsProps {\r\n  tabs: string[];\r\n  activeTab: string;\r\n  onTabClick: (tab: string) => void;\r\n}\r\n\r\nconst Tabs: React.FC<TabsProps> = ({ tabs, activeTab, onTabClick }) => {\r\n  return (\r\n    <div className=\"border-b border-gray-200\">\r\n      <nav className=\"-mb-px flex space-x-6 overflow-x-auto\" aria-label=\"Tabs\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab}\r\n            onClick={() => onTabClick(tab)}\r\n            className={`${\r\n              activeTab === tab\r\n                ? 'border-amber-500 text-amber-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n            } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\r\n            aria-current={activeTab === tab ? 'page' : undefined}\r\n          >\r\n            {tab}\r\n          </button>\r\n        ))}\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n"],"names":[],"mappings":";;;;;;AASA,MAAM,OAA4B,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE;IAChE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;YAAwC,cAAW;sBAC/D,KAAK,GAAG,CAAC,CAAC,oBACT,6LAAC;oBAEC,SAAS,IAAM,WAAW;oBAC1B,WAAW,GACT,cAAc,MACV,oCACA,6EACL,2DAA2D,CAAC;oBAC7D,gBAAc,cAAc,MAAM,SAAS;8BAE1C;mBATI;;;;;;;;;;;;;;;AAejB;KArBM;uCAuBS"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/Card.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  title?: string;\r\n  description?: string;\r\n}\r\n\r\nconst Card: React.FC<CardProps> = ({ children, className, title, description }) => {\r\n  return (\r\n    <div className={`bg-white shadow-md rounded-lg overflow-hidden ${className}`}>\r\n        {title && (\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-semibold leading-6 text-gray-900\">{title}</h3>\r\n                {description && <p className=\"mt-1 text-sm text-gray-500\">{description}</p>}\r\n            </div>\r\n        )}\r\n      <div className=\"p-6\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n"],"names":[],"mappings":";;;;;;AAUA,MAAM,OAA4B,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE;IAC5E,qBACE,6LAAC;QAAI,WAAW,CAAC,8CAA8C,EAAE,WAAW;;YACvE,uBACG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAiD;;;;;;oBAC9D,6BAAe,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;0BAGrE,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KAdM;uCAgBS"}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/constants.ts"],"sourcesContent":["import type { Tenant, TenantFeaturePermissions, RolePermissions } from './types';\r\nimport { MembershipApprovalMode, TenantRoleType } from './types';\r\n\r\nexport const CONTROL_PANEL_TABS = ['General', 'Branding', 'Features', 'Permissions', 'Membership & Moderation', 'User Profiles', 'Donations', 'Volunteering', 'Small Groups', 'Live Stream', 'Prayer Wall', 'Resource Center', 'Contact Submissions'];\r\n\r\nconst defaultRolePermissions: RolePermissions = {\r\n  canCreatePosts: false,\r\n  canCreateEvents: false,\r\n  canCreateSermons: false,\r\n  canCreatePodcasts: false,\r\n  canCreateBooks: false,\r\n  canCreateGroupChats: false,\r\n  canInviteMembers: false,\r\n  canApproveMembership: false,\r\n  canBanMembers: false,\r\n  canModeratePosts: false,\r\n  canModerateChats: false,\r\n  canPostInAnnouncementChannels: false,\r\n  canManagePrayerWall: false,\r\n  canUploadResources: false,\r\n  canManageResources: false,\r\n  canManageContactSubmissions: false,\r\n};\r\n\r\nexport const adminPermissions: RolePermissions = {\r\n  canCreatePosts: true,\r\n  canCreateEvents: true,\r\n  canCreateSermons: true,\r\n  canCreatePodcasts: true,\r\n  canCreateBooks: true,\r\n  canCreateGroupChats: true,\r\n  canInviteMembers: true,\r\n  canApproveMembership: true,\r\n  canBanMembers: true,\r\n  canModeratePosts: true,\r\n  canModerateChats: true,\r\n  canPostInAnnouncementChannels: true,\r\n  canManagePrayerWall: true,\r\n  canUploadResources: true,\r\n  canManageResources: true,\r\n  canManageContactSubmissions: true,\r\n};\r\n\r\nconst defaultPermissions: TenantFeaturePermissions = {\r\n  [TenantRoleType.MEMBER]: {\r\n    ...defaultRolePermissions,\r\n    canCreatePosts: true,\r\n    canUploadResources: true, // Allow members to upload resources by default\r\n  },\r\n  [TenantRoleType.STAFF]: {\r\n    ...defaultRolePermissions,\r\n    canCreatePosts: true,\r\n    canCreateEvents: true,\r\n    canCreateSermons: true,\r\n    canInviteMembers: true,\r\n    canModeratePosts: true,\r\n    canModerateChats: true,\r\n    canPostInAnnouncementChannels: true,\r\n    canManagePrayerWall: true,\r\n    canUploadResources: true,\r\n    canManageResources: true,\r\n    canManageContactSubmissions: true,\r\n  },\r\n  [TenantRoleType.MODERATOR]: {\r\n    ...defaultRolePermissions,\r\n    canModeratePosts: true,\r\n    canModerateChats: true,\r\n    canApproveMembership: true,\r\n    canBanMembers: true,\r\n    canManagePrayerWall: true,\r\n    canManageResources: true, // Moderators can manage resources\r\n  },\r\n  ADMIN: {\r\n    ...adminPermissions,\r\n  },\r\n};\r\n\r\n\r\nexport const getInitialTenant = (): Omit<Tenant, 'id' | 'name' | 'slug' | 'creed' | 'address' | 'description'> => ({\r\n  settings: {\r\n    isPublic: true,\r\n    membershipApprovalMode: MembershipApprovalMode.OPEN,\r\n    enableCalendar: true,\r\n    enablePosts: true,\r\n    enableSermons: true,\r\n    enablePodcasts: false,\r\n    enableBooks: false,\r\n    enableMemberDirectory: true,\r\n    enableGroupChat: true,\r\n    enableComments: true,\r\n    enableReactions: true,\r\n    enableDonations: false,\r\n    enableVolunteering: true,\r\n    enableSmallGroups: true,\r\n    enableLiveStream: false,\r\n    enablePrayerWall: false,\r\n    enableResourceCenter: false,\r\n    donationSettings: {\r\n      mode: 'EXTERNAL',\r\n      externalUrl: '',\r\n      currency: 'USD',\r\n      suggestedAmounts: [10, 25, 50, 100],\r\n      allowCustomAmounts: true,\r\n      leaderboardEnabled: false,\r\n      leaderboardVisibility: 'MEMBERS_ONLY',\r\n      leaderboardTimeframe: 'ALL_TIME',\r\n    },\r\n    liveStreamSettings: {\r\n        provider: 'YOUTUBE',\r\n        embedUrl: '',\r\n        isLive: false,\r\n    },\r\n    visitorVisibility: {\r\n      calendar: true,\r\n      posts: true,\r\n      sermons: true,\r\n      podcasts: false,\r\n      books: false,\r\n      prayerWall: false,\r\n    },\r\n  },\r\n  branding: {\r\n    logoUrl: '',\r\n    bannerImageUrl: '',\r\n    primaryColor: '#8B5CF6', // A warm purple\r\n    accentColor: '#F59E0B', // A warm amber\r\n    customLinks: [],\r\n  },\r\n  permissions: defaultPermissions,\r\n});"],"names":[],"mappings":";;;;;;;;AACA;;AAEO,MAAM,qBAAqB;IAAC;IAAW;IAAY;IAAY;IAAe;IAA2B;IAAiB;IAAa;IAAgB;IAAgB;IAAe;IAAe;IAAmB;CAAsB;AAErP,MAAM,yBAA0C;IAC9C,gBAAgB;IAChB,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;IACnB,gBAAgB;IAChB,qBAAqB;IACrB,kBAAkB;IAClB,sBAAsB;IACtB,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,+BAA+B;IAC/B,qBAAqB;IACrB,oBAAoB;IACpB,oBAAoB;IACpB,6BAA6B;AAC/B;AAEO,MAAM,mBAAoC;IAC/C,gBAAgB;IAChB,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;IACnB,gBAAgB;IAChB,qBAAqB;IACrB,kBAAkB;IAClB,sBAAsB;IACtB,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,+BAA+B;IAC/B,qBAAqB;IACrB,oBAAoB;IACpB,oBAAoB;IACpB,6BAA6B;AAC/B;AAEA,MAAM,qBAA+C;IACnD,CAAC,0HAAc,CAAC,MAAM,CAAC,EAAE;QACvB,GAAG,sBAAsB;QACzB,gBAAgB;QAChB,oBAAoB;IACtB;IACA,CAAC,0HAAc,CAAC,KAAK,CAAC,EAAE;QACtB,GAAG,sBAAsB;QACzB,gBAAgB;QAChB,iBAAiB;QACjB,kBAAkB;QAClB,kBAAkB;QAClB,kBAAkB;QAClB,kBAAkB;QAClB,+BAA+B;QAC/B,qBAAqB;QACrB,oBAAoB;QACpB,oBAAoB;QACpB,6BAA6B;IAC/B;IACA,CAAC,0HAAc,CAAC,SAAS,CAAC,EAAE;QAC1B,GAAG,sBAAsB;QACzB,kBAAkB;QAClB,kBAAkB;QAClB,sBAAsB;QACtB,eAAe;QACf,qBAAqB;QACrB,oBAAoB;IACtB;IACA,OAAO;QACL,GAAG,gBAAgB;IACrB;AACF;AAGO,MAAM,mBAAmB,IAAkF,CAAC;QACjH,UAAU;YACR,UAAU;YACV,wBAAwB,kIAAsB,CAAC,IAAI;YACnD,gBAAgB;YAChB,aAAa;YACb,eAAe;YACf,gBAAgB;YAChB,aAAa;YACb,uBAAuB;YACvB,iBAAiB;YACjB,gBAAgB;YAChB,iBAAiB;YACjB,iBAAiB;YACjB,oBAAoB;YACpB,mBAAmB;YACnB,kBAAkB;YAClB,kBAAkB;YAClB,sBAAsB;YACtB,kBAAkB;gBAChB,MAAM;gBACN,aAAa;gBACb,UAAU;gBACV,kBAAkB;oBAAC;oBAAI;oBAAI;oBAAI;iBAAI;gBACnC,oBAAoB;gBACpB,oBAAoB;gBACpB,uBAAuB;gBACvB,sBAAsB;YACxB;YACA,oBAAoB;gBAChB,UAAU;gBACV,UAAU;gBACV,QAAQ;YACZ;YACA,mBAAmB;gBACjB,UAAU;gBACV,OAAO;gBACP,SAAS;gBACT,UAAU;gBACV,OAAO;gBACP,YAAY;YACd;QACF;QACA,UAAU;YACR,SAAS;YACT,gBAAgB;YAChB,cAAc;YACd,aAAa;YACb,aAAa,EAAE;QACjB;QACA,aAAa;IACf,CAAC"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/Input.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label: string;\r\n  containerClassName?: string;\r\n}\r\n\r\nconst Input: React.FC<InputProps> = ({ label, id, containerClassName, ...props }) => {\r\n  return (\r\n    <div className={containerClassName}>\r\n      <label htmlFor={id} className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n        {label}\r\n      </label>\r\n      <input\r\n        id={id}\r\n        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;"],"names":[],"mappings":";;;;;;AAOA,MAAM,QAA8B,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,kBAAkB,EAAE,GAAG,OAAO;IAC9E,qBACE,6LAAC;QAAI,WAAW;;0BACd,6LAAC;gBAAM,SAAS;gBAAI,WAAU;0BAC3B;;;;;;0BAEH,6LAAC;gBACC,IAAI;gBACJ,WAAU;gBACT,GAAG,KAAK;;;;;;;;;;;;AAIjB;KAbM;uCAeS"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n"],"names":[],"mappings":";;;;;;AAQA,MAAM,SAAgC,CAAC,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,OAAO,IAAI,EAAE,SAAS,EAAE,GAAG,OAAO;IACxG,MAAM,cAAc;IAEpB,MAAM,iBAAiB;QACrB,SAAS;QACT,WAAW;QACX,QAAQ;IACV;IAEA,MAAM,cAAc;QAChB,IAAI;QACJ,IAAI;IACR;IAEA,qBACE,6LAAC;QAAO,WAAW,GAAG,YAAY,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;QAAG,GAAG,KAAK;kBACxG;;;;;;AAGP;KAnBM;uCAqBS"}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/ToggleSwitch.tsx"],"sourcesContent":["\r\nimport React from 'react';\r\n\r\ninterface ToggleSwitchProps {\r\n  label: string;\r\n  enabled: boolean;\r\n  onChange: (enabled: boolean) => void;\r\n  description?: string;\r\n}\r\n\r\nconst ToggleSwitch: React.FC<ToggleSwitchProps> = ({ label, enabled, onChange, description }) => {\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <span className=\"flex-grow flex flex-col\">\r\n        <span className=\"text-sm font-medium text-gray-900\">{label}</span>\r\n        {description && <span className=\"text-sm text-gray-500\">{description}</span>}\r\n      </span>\r\n      <button\r\n        type=\"button\"\r\n        className={`${\r\n          enabled ? 'bg-amber-600' : 'bg-gray-200'\r\n        } relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`}\r\n        role=\"switch\"\r\n        aria-checked={enabled}\r\n        onClick={() => onChange(!enabled)}\r\n      >\r\n        <span\r\n          aria-hidden=\"true\"\r\n          className={`${\r\n            enabled ? 'translate-x-5' : 'translate-x-0'\r\n          } pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`}\r\n        />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToggleSwitch;\r\n"],"names":[],"mappings":";;;;;;AAUA,MAAM,eAA4C,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE;IAC1F,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAK,WAAU;;kCACd,6LAAC;wBAAK,WAAU;kCAAqC;;;;;;oBACpD,6BAAe,6LAAC;wBAAK,WAAU;kCAAyB;;;;;;;;;;;;0BAE3D,6LAAC;gBACC,MAAK;gBACL,WAAW,GACT,UAAU,iBAAiB,cAC5B,wNAAwN,CAAC;gBAC1N,MAAK;gBACL,gBAAc;gBACd,SAAS,IAAM,SAAS,CAAC;0BAEzB,cAAA,6LAAC;oBACC,eAAY;oBACZ,WAAW,GACT,UAAU,kBAAkB,gBAC7B,2HAA2H,CAAC;;;;;;;;;;;;;;;;;AAKvI;KAzBM;uCA2BS"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/GeneralTab.tsx"],"sourcesContent":["import React from 'react';\r\nimport type { Tenant } from '../../../types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\nimport ToggleSwitch from '../../ui/ToggleSwitch';\r\n\r\ninterface GeneralTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n}\r\n\r\nconst GeneralTab: React.FC<GeneralTabProps> = ({ tenant, onUpdate }) => {\r\n  \r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    onUpdate({ ...tenant, [name]: value });\r\n  };\r\n  \r\n  const handleAddressChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    onUpdate({\r\n        ...tenant,\r\n        address: { ...tenant.address, [name]: value },\r\n    });\r\n  };\r\n\r\n  const handleToggle = (isPublic: boolean) => {\r\n    onUpdate({\r\n        ...tenant,\r\n        settings: { ...tenant.settings, isPublic }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n        <div>\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Basic Information</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Update your community's public details.</p>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n            <Input label=\"Temple Name\" id=\"name\" name=\"name\" value={tenant.name} onChange={handleInputChange} />\r\n            <Input label=\"Creed / Religion\" id=\"creed\" name=\"creed\" value={tenant.creed} onChange={handleInputChange} />\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input label=\"Contact Email\" id=\"contactEmail\" name=\"contactEmail\" type=\"email\" value={tenant.contactEmail || ''} onChange={handleInputChange} />\r\n                <Input label=\"Phone Number\" id=\"phoneNumber\" name=\"phoneNumber\" type=\"tel\" value={tenant.phoneNumber || ''} onChange={handleInputChange} />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n              <textarea\r\n                id=\"description\" name=\"description\" rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n                value={tenant.description} onChange={handleInputChange}\r\n              />\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"border-t border-gray-200 pt-8\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Location</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Where your community is located.</p>\r\n        </div>\r\n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <Input containerClassName=\"md:col-span-2\" label=\"Street Address\" id=\"street\" name=\"street\" value={tenant.address.street || ''} onChange={handleAddressChange} />\r\n            <Input label=\"City\" id=\"city\" name=\"city\" value={tenant.address.city} onChange={handleAddressChange} />\r\n            <Input label=\"State / Province\" id=\"state\" name=\"state\" value={tenant.address.state} onChange={handleAddressChange} />\r\n            <Input label=\"Country\" id=\"country\" name=\"country\" value={tenant.address.country} onChange={handleAddressChange} />\r\n            <Input label=\"Postal Code\" id=\"postalCode\" name=\"postalCode\" value={tenant.address.postalCode} onChange={handleAddressChange} />\r\n        </div>\r\n        \r\n        <div className=\"border-t border-gray-200 pt-8\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Visibility</h3>\r\n        </div>\r\n        <ToggleSwitch\r\n            label=\"Public Tenant\"\r\n            description=\"Allow this temple to be discovered in public search results.\"\r\n            enabled={tenant.settings.isPublic}\r\n            onChange={handleToggle}\r\n        />\r\n        \r\n        <div className=\"text-right border-t border-gray-200 pt-6\">\r\n            <Button onClick={() => alert('Settings saved (mock)!')}>Save Changes</Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GeneralTab;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 849, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/BrandingTab.tsx"],"sourcesContent":["import React from 'react';\r\nimport type { Tenant } from '@/types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface BrandingTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n}\r\n\r\nconst BrandingTab: React.FC<BrandingTabProps> = ({ tenant, onUpdate }) => {\r\n\r\n  const handleColorChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    onUpdate({\r\n        ...tenant,\r\n        branding: { ...tenant.branding, [name]: value },\r\n    });\r\n  };\r\n  \r\n  const handleLinkChange = (index: number, field: 'label' | 'url', value: string) => {\r\n    const newLinks = [...tenant.branding.customLinks];\r\n    newLinks[index] = { ...newLinks[index], [field]: value };\r\n    onUpdate({\r\n      ...tenant,\r\n      branding: { ...tenant.branding, customLinks: newLinks },\r\n    });\r\n  };\r\n\r\n  const handleAddLink = () => {\r\n    const newLinks = [...(tenant.branding.customLinks || []), { label: '', url: '' }];\r\n    onUpdate({\r\n      ...tenant,\r\n      branding: { ...tenant.branding, customLinks: newLinks },\r\n    });\r\n  };\r\n\r\n  const handleRemoveLink = (index: number) => {\r\n    const newLinks = tenant.branding.customLinks.filter((_, i) => i !== index);\r\n    onUpdate({\r\n      ...tenant,\r\n      branding: { ...tenant.branding, customLinks: newLinks },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Branding</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Customize the look and feel of your temple's pages.</p>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        <Input label=\"Logo URL\" id=\"logoUrl\" name=\"logoUrl\" type=\"text\" placeholder=\"https://example.com/logo.png\"\r\n               value={tenant.branding.logoUrl}\r\n               onChange={(e) => onUpdate({ ...tenant, branding: {...tenant.branding, logoUrl: e.target.value}})}\r\n        />\r\n        <Input label=\"Banner Image URL\" id=\"bannerImageUrl\" name=\"bannerImageUrl\" type=\"text\" placeholder=\"https://example.com/banner.png\"\r\n               value={tenant.branding.bannerImageUrl}\r\n               onChange={(e) => onUpdate({ ...tenant, branding: {...tenant.branding, bannerImageUrl: e.target.value}})}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"border-t border-gray-200 pt-8\">\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Colors</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Choose colors that match your community's identity.</p>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n              <label htmlFor=\"primaryColor\" className=\"block text-sm font-medium text-gray-700\">Primary Color</label>\r\n              <div className=\"mt-1 flex items-center space-x-3\">\r\n                  <input type=\"color\" id=\"primaryColor\" name=\"primaryColor\" value={tenant.branding.primaryColor} onChange={handleColorChange} className=\"h-10 w-10 rounded-md border-gray-300\" />\r\n                  <Input id=\"primaryColorText\" name=\"primaryColor\" type=\"text\" label=\"\" value={tenant.branding.primaryColor} onChange={handleColorChange} />\r\n              </div>\r\n          </div>\r\n          <div>\r\n              <label htmlFor=\"accentColor\" className=\"block text-sm font-medium text-gray-700\">Accent Color</label>\r\n              <div className=\"mt-1 flex items-center space-x-3\">\r\n                  <input type=\"color\" id=\"accentColor\" name=\"accentColor\" value={tenant.branding.accentColor} onChange={handleColorChange} className=\"h-10 w-10 rounded-md border-gray-300\" />\r\n                  <Input id=\"accentColorText\" name=\"accentColor\" type=\"text\" label=\"\" value={tenant.branding.accentColor} onChange={handleColorChange} />\r\n              </div>\r\n          </div>\r\n      </div>\r\n      \r\n      <div className=\"border-t border-gray-200 pt-8\">\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Custom Links</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Add custom links to your temple's public page (e.g., website, donations).</p>\r\n        <p className=\"mt-1 text-xs text-amber-700\">To enable the 'Donate' button on your home page, add a link with the exact label \"Donate\".</p>\r\n      </div>\r\n      <div className=\"space-y-4\">\r\n        {(tenant.branding.customLinks || []).map((link, index) => (\r\n          <div key={index} className=\"flex items-end space-x-4\">\r\n            <div className=\"grid grid-cols-2 gap-4 flex-grow\">\r\n              <Input \r\n                label=\"Label\" \r\n                id={`linkLabel-${index}`} \r\n                name=\"label\" \r\n                value={link.label} \r\n                onChange={(e) => handleLinkChange(index, 'label', e.target.value)} \r\n                placeholder=\"e.g., Our Website\" \r\n              />\r\n              <Input \r\n                label=\"URL\" \r\n                id={`linkUrl-${index}`} \r\n                name=\"url\" \r\n                type=\"url\" \r\n                value={link.url} \r\n                onChange={(e) => handleLinkChange(index, 'url', e.target.value)} \r\n                placeholder=\"https://...\" \r\n              />\r\n            </div>\r\n            <Button \r\n              type=\"button\" \r\n              variant=\"danger\" \r\n              size=\"sm\" \r\n              onClick={() => handleRemoveLink(index)} \r\n              aria-label=\"Remove link\"\r\n              className=\"!p-2\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n            </Button>\r\n          </div>\r\n        ))}\r\n        <Button type=\"button\" variant=\"secondary\" onClick={handleAddLink}>+ Add Link</Button>\r\n      </div>\r\n\r\n       <div className=\"text-right border-t border-gray-200 pt-6\">\r\n          <Button onClick={() => alert('Branding saved (mock)!')}>Save Branding</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BrandingTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/FeaturesTab.tsx"],"sourcesContent":["import React from 'react';\r\nimport type { Tenant } from '../../../types';\r\nimport ToggleSwitch from '../../ui/ToggleSwitch';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface FeaturesTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n}\r\n\r\nconst FeaturesTab: React.FC<FeaturesTabProps> = ({ tenant, onUpdate }) => {\r\n  const handleFeatureToggle = (feature: keyof Omit<Tenant['settings'], 'isPublic' | 'membershipApprovalMode' | 'visitorVisibility' | 'donationSettings' | 'liveStreamSettings'>, enabled: boolean) => {\r\n    onUpdate({\r\n      ...tenant,\r\n      settings: {\r\n        ...tenant.settings,\r\n        [feature]: enabled,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleVisibilityToggle = (feature: keyof Tenant['settings']['visitorVisibility'], enabled: boolean) => {\r\n    onUpdate({\r\n      ...tenant,\r\n      settings: {\r\n        ...tenant.settings,\r\n        visitorVisibility: {\r\n          ...tenant.settings.visitorVisibility,\r\n          [feature]: enabled,\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  const featureKeys: (keyof Omit<Tenant['settings'], 'isPublic' | 'membershipApprovalMode' | 'visitorVisibility' | 'donationSettings' | 'liveStreamSettings'>)[] = [\r\n    'enableCalendar',\r\n    'enablePosts',\r\n    'enableSermons',\r\n    'enablePodcasts',\r\n    'enableBooks',\r\n    'enableMemberDirectory',\r\n    'enableGroupChat',\r\n    'enableComments',\r\n    'enableReactions',\r\n    'enableDonations',\r\n    'enableVolunteering',\r\n    'enableSmallGroups',\r\n    'enableLiveStream',\r\n    'enablePrayerWall',\r\n    'enableResourceCenter',\r\n  ];\r\n\r\n  const visibilityKeys = Object.keys(tenant.settings.visitorVisibility) as (keyof Tenant['settings']['visitorVisibility'])[];\r\n\r\n  const formatLabel = (key: string) => {\r\n    return key.replace('enable', '').replace(/([A-Z])/g, ' $1').replace(/^./, (str) => str.toUpperCase());\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Feature Toggles</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Enable or disable major features for your members.</p>\r\n      </div>\r\n      <div className=\"space-y-4\">\r\n        {featureKeys.map((key) => (\r\n          <ToggleSwitch\r\n            key={key}\r\n            label={formatLabel(key)}\r\n            enabled={tenant.settings[key]}\r\n            onChange={(enabled) => handleFeatureToggle(key, enabled)}\r\n          />\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"border-t border-gray-200 pt-8\">\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Visitor Visibility</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Control what non-members can see. Features must be enabled above to be visible.</p>\r\n      </div>\r\n       <div className=\"space-y-4\">\r\n        {visibilityKeys.map((key) => (\r\n          <ToggleSwitch\r\n            key={`vis-${key}`}\r\n            label={`Show ${formatLabel(key)} to Visitors`}\r\n            enabled={tenant.settings.visitorVisibility[key] && (tenant.settings as any)[`enable${key.charAt(0).toUpperCase() + key.slice(1)}`]}\r\n            onChange={(enabled) => handleVisibilityToggle(key, enabled)}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"text-right border-t border-gray-200 pt-6\">\r\n        <Button onClick={() => alert('Features saved (mock)!')}>Save Feature Settings</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeaturesTab;"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAOA,MAAM,cAA0C,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE;IACnE,MAAM,sBAAsB,CAAC,SAAkJ;QAC7K,SAAS;YACP,GAAG,MAAM;YACT,UAAU;gBACR,GAAG,OAAO,QAAQ;gBAClB,CAAC,QAAQ,EAAE;YACb;QACF;IACF;IAEA,MAAM,yBAAyB,CAAC,SAAwD;QACtF,SAAS;YACP,GAAG,MAAM;YACT,UAAU;gBACR,GAAG,OAAO,QAAQ;gBAClB,mBAAmB;oBACjB,GAAG,OAAO,QAAQ,CAAC,iBAAiB;oBACpC,CAAC,QAAQ,EAAE;gBACb;YACF;QACF;IACF;IAEA,MAAM,cAA2J;QAC/J;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,iBAAiB,OAAO,IAAI,CAAC,OAAO,QAAQ,CAAC,iBAAiB;IAEpE,MAAM,cAAc,CAAC;QACnB,OAAO,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,YAAY,OAAO,OAAO,CAAC,MAAM,CAAC,MAAQ,IAAI,WAAW;IACpG;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAC5D,6LAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAE5C,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,oBAChB,6LAAC,sJAAY;wBAEX,OAAO,YAAY;wBACnB,SAAS,OAAO,QAAQ,CAAC,IAAI;wBAC7B,UAAU,CAAC,UAAY,oBAAoB,KAAK;uBAH3C;;;;;;;;;;0BAQX,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAC5D,6LAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAE3C,6LAAC;gBAAI,WAAU;0BACb,eAAe,GAAG,CAAC,CAAC,oBACnB,6LAAC,sJAAY;wBAEX,OAAO,CAAC,KAAK,EAAE,YAAY,KAAK,YAAY,CAAC;wBAC7C,SAAS,OAAO,QAAQ,CAAC,iBAAiB,CAAC,IAAI,IAAI,AAAC,OAAO,QAAQ,AAAQ,CAAC,CAAC,MAAM,EAAE,IAAI,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC;wBAClI,UAAU,CAAC,UAAY,uBAAuB,KAAK;uBAH9C,CAAC,IAAI,EAAE,KAAK;;;;;;;;;;0BAQvB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,gJAAM;oBAAC,SAAS,IAAM,MAAM;8BAA2B;;;;;;;;;;;;;;;;;AAIhE;KArFM;uCAuFS"}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\ndeclare global {\r\n  // allow global `var` declarations\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  globalThis.prisma ||\r\n  new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAYI;AAZJ;;AAQO,MAAM,SACX,WAAW,MAAM,IACjB,IAAI,yKAAY;AAElB,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/lib/data.ts"],"sourcesContent":["import { prisma } from './db';\r\nimport { Tenant, User, Post, Event, UserTenantMembership, Notification, AuditLog, Conversation, TenantRole, MembershipStatus, TenantSettings, TenantBranding } from '@prisma/client';\r\nimport bcrypt from 'bcryptjs';\r\n\r\ntype TenantWithDetails = Tenant & {\r\n    settings: TenantSettings | null;\r\n    branding: TenantBranding | null;\r\n};\r\n\r\nexport async function getTenantsForUser(userId: string): Promise<Tenant[]> {\r\n  const memberships = await prisma.userTenantMembership.findMany({\r\n    where: {\r\n      userId: userId,\r\n      status: 'APPROVED',\r\n    },\r\n    include: {\r\n      tenant: true,\r\n    },\r\n  });\r\n\r\n  return memberships.map((membership: { tenant: Tenant; }) => membership.tenant);\r\n}\r\n\r\nexport async function getTenantById(tenantId: string) {\r\n  return await prisma.tenant.findUnique({\r\n    where: { id: tenantId },\r\n    include: {\r\n      settings: true,\r\n      branding: true,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getUserById(userId: string) {\r\n  return await prisma.user.findUnique({\r\n    where: { id: userId },\r\n    include: {\r\n      profile: true,\r\n      privacySettings: true,\r\n      accountSettings: true,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getTenants(): Promise<Tenant[]> {\r\n    const tenants = await prisma.tenant.findMany({\r\n        include: {\r\n            settings: true,\r\n            branding: true,\r\n        }\r\n    });\r\n    \r\n    // Transform Prisma data to match Tenant interface with nested address\r\n    return tenants.map(tenant => ({\r\n        ...tenant,\r\n        address: {\r\n            street: tenant.street,\r\n            city: tenant.city,\r\n            state: tenant.state,\r\n            country: tenant.country,\r\n            postalCode: tenant.postalCode,\r\n        },\r\n        settings: tenant.settings || {\r\n            isPublic: true,\r\n            allowMemberDirectory: true,\r\n            allowEvents: true,\r\n            allowDonations: true,\r\n            allowSmallGroups: true,\r\n            allowMessaging: true,\r\n        },\r\n        branding: tenant.branding || {\r\n            logoUrl: '',\r\n            bannerImageUrl: '',\r\n            primaryColor: '#d97706',\r\n            accentColor: '#92400e',\r\n        },\r\n        permissions: tenant.permissions as any || {},\r\n    })) as Tenant[];\r\n}\r\n\r\nexport async function getEventsForTenant(tenantId: string): Promise<Event[]> {\r\n  return await prisma.event.findMany({\r\n    where: { tenantId },\r\n    orderBy: { startDateTime: 'asc' },\r\n  });\r\n}\r\n\r\nexport async function getPostsForTenant(tenantId: string): Promise<Post[]> {\r\n  return await prisma.post.findMany({\r\n    where: { tenantId, isPublished: true },\r\n    orderBy: { publishedAt: 'desc' },\r\n    include: {\r\n      author: {\r\n        include: {\r\n          profile: true,\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport async function getMembershipForUserInTenant(userId: string, tenantId: string): Promise<UserTenantMembership | null> {\r\n  return await prisma.userTenantMembership.findUnique({\r\n    where: {\r\n      userId_tenantId: {\r\n        userId,\r\n        tenantId,\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getNotificationsForUser(userId: string): Promise<Notification[]> {\r\n    return await prisma.notification.findMany({\r\n        where: { userId },\r\n        orderBy: { createdAt: 'desc' },\r\n    });\r\n}\r\n\r\nexport async function markNotificationAsRead(notificationId: string): Promise<Notification> {\r\n    return await prisma.notification.update({\r\n        where: { id: notificationId },\r\n        data: { isRead: true },\r\n    });\r\n}\r\n\r\nexport async function markAllNotificationsAsRead(userId: string) {\r\n    return await prisma.notification.updateMany({\r\n        where: { userId },\r\n        data: { isRead: true },\r\n    });\r\n}\r\n\r\nexport async function getUserByEmail(email: string) {\r\n    return await prisma.user.findUnique({\r\n        where: { email },\r\n        include: {\r\n            profile: true,\r\n            privacySettings: true,\r\n            accountSettings: true,\r\n        },\r\n    });\r\n}\r\n\r\nexport async function registerUser(displayName: string, email: string, pass: string) {\r\n    const existingUser = await getUserByEmail(email);\r\n    if (existingUser) {\r\n        return { success: false, message: 'User with this email already exists.' };\r\n    }\r\n    const hashedPassword = await bcrypt.hash(pass, 10);\r\n    const user = await prisma.user.create({\r\n        data: {\r\n            email,\r\n            password: hashedPassword,\r\n            profile: {\r\n                create: {\r\n                    displayName,\r\n                },\r\n            },\r\n            accountSettings: { create: {} },\r\n            privacySettings: { create: {} },\r\n        },\r\n        include: {\r\n            profile: true,\r\n            privacySettings: true,\r\n            accountSettings: true,\r\n        }\r\n    });\r\n    return { success: true, user };\r\n}\r\n\r\nexport async function createTenant(tenantDetails: Omit<Tenant, 'id' | 'slug' | 'permissions'>, ownerId: string): Promise<Tenant> {\r\n    const tenant = await prisma.tenant.create({\r\n        data: {\r\n            ...tenantDetails,\r\n            slug: tenantDetails.name.toLowerCase().replace(/ /g, '-'),\r\n            memberships: {\r\n                create: {\r\n                    userId: ownerId,\r\n                    roles: {\r\n                        create: {\r\n                            role: TenantRole.ADMIN,\r\n                        }\r\n                    },\r\n                    status: MembershipStatus.APPROVED,\r\n                }\r\n            },\r\n            settings: { \r\n                create: {\r\n                    isPublic: false,\r\n                    membershipApprovalMode: 'APPROVAL_REQUIRED',\r\n                    enableCalendar: true,\r\n                    enablePosts: true,\r\n                    enableSermons: true,\r\n                    enablePodcasts: true,\r\n                    enableBooks: true,\r\n                    enableDonations: true,\r\n                    enableVolunteering: true,\r\n                    enableSmallGroups: true,\r\n                    enableLiveStream: true,\r\n                    enablePrayerWall: true,\r\n                    enableResourceCenter: true,\r\n                    visitorVisibility: {},\r\n                    donationSettings: {},\r\n                    liveStreamSettings: {},\r\n                } \r\n            },\r\n            branding: { \r\n                create: {\r\n                    logoUrl: '',\r\n                    bannerImageUrl: '',\r\n                    primaryColor: '#000000',\r\n                    accentColor: '#FFFFFF',\r\n                    customLinks: [],\r\n                } \r\n            },\r\n        }\r\n    });\r\n    return tenant;\r\n}\r\n\r\nexport async function updateTenant(tenant: Partial<TenantWithDetails>): Promise<Tenant> {\r\n    const { id, settings, branding, ...data } = tenant;\r\n    \r\n    const updateData: any = { ...data };\r\n\r\n    if (settings) {\r\n        const { id: settingsId, tenantId: settingsTenantId, ...restOfSettings } = settings;\r\n        updateData.settings = {\r\n            update: {\r\n                ...restOfSettings,\r\n                visitorVisibility: restOfSettings.visitorVisibility || undefined,\r\n                donationSettings: restOfSettings.donationSettings || undefined,\r\n                liveStreamSettings: restOfSettings.liveStreamSettings || undefined,\r\n            }\r\n        };\r\n    }\r\n\r\n    if (branding) {\r\n        const { id: brandingId, tenantId: brandingTenantId, ...restOfBranding } = branding;\r\n        updateData.branding = {\r\n            update: {\r\n                ...restOfBranding,\r\n                customLinks: restOfBranding.customLinks || undefined,\r\n            }\r\n        };\r\n    }\r\n\r\n    return await prisma.tenant.update({\r\n        where: { id },\r\n        data: updateData,\r\n    });\r\n}\r\n\r\nexport async function requestToJoinTenant(userId: string, tenantId: string): Promise<UserTenantMembership> {\r\n    const existingMembership = await getMembershipForUserInTenant(userId, tenantId);\r\nif (existingMembership) {\r\n        return existingMembership;\r\n    }\r\n    return await prisma.userTenantMembership.create({\r\n        data: {\r\n            userId,\r\n            tenantId,\r\n            roles: {\r\n                create: {\r\n                    role: TenantRole.MEMBER,\r\n                }\r\n            },\r\n            status: MembershipStatus.PENDING,\r\n        }\r\n    });\r\n}\r\n\r\n// NOTE: These are not secure and are for demonstration only.\r\n// In a real app, you'd use secure tokens and a proper reset flow.\r\nexport async function requestPasswordReset(email: string): Promise<boolean> {\r\n    const user = await getUserByEmail(email);\r\n    if (!user) return false;\r\n    // In a real app, generate a token, save it, and email a link.\r\n    console.log(`Password reset requested for ${email}. In this demo, we'll just allow a direct reset.`);\r\n    return true;\r\n}\r\n\r\nexport async function resetPassword(email: string, newPass: string) {\r\n    const user = await getUserByEmail(email);\r\n    if (!user) return { success: false, message: \"User not found.\" };\r\n    const hashedPassword = await bcrypt.hash(newPass, 10);\r\n    await prisma.user.update({\r\n        where: { email },\r\n        data: { password: hashedPassword },\r\n    });\r\n    return { success: true };\r\n}\r\n\r\nexport async function logAuditEvent(event: Omit<AuditLog, 'id' | 'createdAt'>): Promise<AuditLog> {\r\n    return await prisma.auditLog.create({\r\n        data: {\r\n            ...event,\r\n            metadata: event.metadata || {},\r\n        },\r\n    });\r\n}\r\n\r\nexport async function getOrCreateDirectConversation(userId1: string, userId2: string): Promise<Conversation> {\r\n    const existing = await prisma.conversation.findFirst({\r\n        where: {\r\n            isDirectMessage: true,\r\n            participants: {\r\n                every: {\r\n                    userId: { in: [userId1, userId2] }\r\n                }\r\n            }\r\n        },\r\n        include: { participants: true }\r\n    });\r\n\r\n    if (existing) return existing;\r\n\r\n    return await prisma.conversation.create({\r\n        data: {\r\n            isDirectMessage: true,\r\n            participants: {\r\n                create: [\r\n                    { userId: userId1 },\r\n                    { userId: userId2 },\r\n                ]\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport async function getConversationsForUser(userId: string) {\r\n    return await prisma.conversation.findMany({\r\n        where: {\r\n            participants: {\r\n                some: {\r\n                    userId: userId\r\n                }\r\n            }\r\n        },\r\n        include: {\r\n            participants: {\r\n                include: {\r\n                    user: {\r\n                        include: {\r\n                            profile: true\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            messages: {\r\n                orderBy: {\r\n                    createdAt: 'desc'\r\n                },\r\n                take: 1,\r\n                include: {\r\n                    user: {\r\n                        include: {\r\n                            profile: true\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        orderBy: {\r\n            id: 'desc'\r\n        }\r\n    });\r\n}\r\n\r\nexport async function getMessagesForConversation(conversationId: string) {\r\n    return await prisma.chatMessage.findMany({\r\n        where: {\r\n            conversationId: conversationId\r\n        },\r\n        include: {\r\n            user: {\r\n                include: {\r\n                    profile: true\r\n                }\r\n            }\r\n        },\r\n        orderBy: {\r\n            createdAt: 'asc'\r\n        }\r\n    });\r\n}\r\n\r\nexport async function addMessage(conversationId: string, senderId: string, content: string) {\r\n    const message = await prisma.chatMessage.create({\r\n        data: {\r\n            conversationId,\r\n            userId: senderId,\r\n            text: content\r\n        },\r\n        include: {\r\n            user: {\r\n                include: {\r\n                    profile: true\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return message;\r\n}\r\n\r\nexport async function deleteMessage(messageId: string) {\r\n    return await prisma.chatMessage.delete({\r\n        where: { id: messageId }\r\n    });\r\n}\r\n\r\nexport async function markConversationAsRead(conversationId: string, userId: string) {\r\n    // This would update read receipts via ConversationParticipant's lastReadMessageId\r\n    // For now, just return success\r\n    return { success: true };\r\n}\r\n\r\nexport async function getAllUsers() {\r\n    return await prisma.user.findMany({\r\n        include: {\r\n            profile: true\r\n        }\r\n    });\r\n}\r\n\r\nexport async function getAuditLogs() {\r\n    return await prisma.auditLog.findMany({\r\n        include: {\r\n            actorUser: {\r\n                include: {\r\n                    profile: true\r\n                }\r\n            },\r\n            effectiveUser: {\r\n                include: {\r\n                    profile: true\r\n                }\r\n            }\r\n        },\r\n        orderBy: {\r\n            createdAt: 'desc'\r\n        },\r\n        take: 100\r\n    });\r\n}\r\n\r\n// Get enriched memberships for a user (includes tenant details)\r\nexport async function getEnrichedMembershipsForUser(userId: string) {\r\n    const memberships = await prisma.userTenantMembership.findMany({\r\n        where: { userId },\r\n        include: {\r\n            tenant: {\r\n                include: {\r\n                    settings: true,\r\n                    branding: true,\r\n                }\r\n            }\r\n        }\r\n    });\r\n    \r\n    return memberships.map(m => ({\r\n        membership: m,\r\n        tenant: m.tenant\r\n    }));\r\n}\r\n\r\n// Update membership profile (display name and title within a tenant)\r\nexport async function updateMembershipProfile(\r\n    userId: string, \r\n    membershipId: string, \r\n    data: { displayName?: string; displayTitle?: string }\r\n) {\r\n    return await prisma.userTenantMembership.update({\r\n        where: { id: membershipId, userId },\r\n        data: {\r\n            displayName: data.displayName,\r\n            displayTitle: data.displayTitle\r\n        }\r\n    });\r\n}\r\n\r\n// Update user notification preferences\r\nexport async function updateUserNotificationPreferences(\r\n    userId: string,\r\n    preferences: any\r\n) {\r\n    // Note: This assumes notification preferences are stored in a JSON field or separate table\r\n    // Adjust based on your actual schema\r\n    return await prisma.user.update({\r\n        where: { id: userId },\r\n        data: {\r\n            // If you have a notificationPreferences JSON field:\r\n            // notificationPreferences: preferences\r\n        }\r\n    });\r\n}\r\n\r\n// ===== MISSING FUNCTION STUBS =====\r\n// These functions are called by components but not yet fully implemented\r\n\r\nexport async function getMembersForTenant(tenantId: string) {\r\n    // TODO: Implement member fetching with enriched data\r\n    return [];\r\n}\r\n\r\nexport async function updateMembershipStatus(userId: string, tenantId: string, status: string) {\r\n    // TODO: Implement membership status update\r\n    return null;\r\n}\r\n\r\nexport async function updateMemberRolesAndTitle(userId: string, tenantId: string, roles: any[], title: string) {\r\n    // TODO: Implement member roles and title update\r\n    return null;\r\n}\r\n\r\nexport async function getSmallGroupsForTenant(tenantId: string) {\r\n    // TODO: Implement small groups fetching\r\n    return [];\r\n}\r\n\r\nexport async function createSmallGroup(tenantId: string, groupData: any) {\r\n    // TODO: Implement small group creation\r\n    return null;\r\n}\r\n\r\nexport async function getVolunteerNeedsForTenant(tenantId: string) {\r\n    // TODO: Implement volunteer needs fetching\r\n    return [];\r\n}\r\n\r\nexport async function addVolunteerNeed(tenantId: string, needData: any) {\r\n    // TODO: Implement volunteer need creation\r\n    return null;\r\n}\r\n\r\nexport async function getResourceItemsForTenant(tenantId: string) {\r\n    // TODO: Implement resource items fetching\r\n    return [];\r\n}\r\n\r\nexport async function addResourceItem(tenantId: string, itemData: any) {\r\n    // TODO: Implement resource item creation\r\n    return null;\r\n}\r\n\r\nexport async function deleteResourceItem(itemId: string) {\r\n    // TODO: Implement resource item deletion\r\n    return null;\r\n}\r\n\r\nexport async function getCommunityPostsForTenant(tenantId: string) {\r\n    // TODO: Implement community posts fetching\r\n    return [];\r\n}\r\n\r\nexport async function updateCommunityPostStatus(postId: string, status: string) {\r\n    // TODO: Implement community post status update\r\n    return null;\r\n}\r\n\r\nexport async function getContactSubmissionsForTenant(tenantId: string) {\r\n    // TODO: Implement contact submissions fetching\r\n    return [];\r\n}\r\n\r\nexport async function updateContactSubmissionStatus(submissionId: string, status: string) {\r\n    // TODO: Implement contact submission status update\r\n    return null;\r\n}\r\n\r\nexport async function respondToContactSubmission(submissionId: string, response: string) {\r\n    // TODO: Implement contact submission response\r\n    return null;\r\n}\r\n\r\nexport async function updateTenantPermissions(tenantId: string, permissions: any) {\r\n    // TODO: Implement tenant permissions update\r\n    return null;\r\n}\r\n\r\nexport async function addPost(tenantId: string, postData: any) {\r\n    // TODO: Implement post creation\r\n    return null;\r\n}\r\n\r\nexport async function addEvent(tenantId: string, eventData: any) {\r\n    // TODO: Implement event creation\r\n    return null;\r\n}\r\n\r\nexport async function getSermonsForTenant(tenantId: string) {\r\n    // TODO: Implement sermons fetching\r\n    return [];\r\n}\r\n\r\nexport async function getPodcastsForTenant(tenantId: string) {\r\n    // TODO: Implement podcasts fetching\r\n    return [];\r\n}\r\n\r\nexport async function getBooksForTenant(tenantId: string) {\r\n    // TODO: Implement books fetching\r\n    return [];\r\n}\r\n\r\nexport async function getDonationsForTenant(tenantId: string) {\r\n    // TODO: Implement donations fetching\r\n    return [];\r\n}\r\n\r\nexport async function addDonationRecord(tenantId: string, donationData: any) {\r\n    // TODO: Implement donation record creation\r\n    return null;\r\n}\r\n\r\nexport async function addContactSubmission(tenantId: string, submissionData: any) {\r\n    // TODO: Implement contact submission creation\r\n    return null;\r\n}\r\n\r\nexport async function addCommunityPost(tenantId: string, postData: any) {\r\n    // TODO: Implement community post creation\r\n    return null;\r\n}\r\n\r\nexport async function joinSmallGroup(groupId: string, userId: string) {\r\n    // TODO: Implement small group join\r\n    return null;\r\n}\r\n\r\nexport async function leaveSmallGroup(groupId: string, userId: string) {\r\n    // TODO: Implement small group leave\r\n    return null;\r\n}\r\n\r\nexport async function signUpForNeed(needId: string, userId: string) {\r\n    // TODO: Implement volunteer need sign up\r\n    return null;\r\n}\r\n\r\nexport async function cancelSignUp(needId: string, userId: string) {\r\n    // TODO: Implement volunteer need cancellation\r\n    return null;\r\n}\r\n\r\nexport async function createConversation(conversationData: any) {\r\n    // TODO: Implement conversation creation\r\n    return null;\r\n}\r\n\r\nexport async function adminUpdateUserProfile(userId: string, profileData: any) {\r\n    // TODO: Implement admin user profile update\r\n    return null;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/PermissionsTab.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport type { Tenant, RolePermissions, User } from '@/types';\r\nimport { TenantRoleType } from '@/types';\r\nimport Button from '../../ui/Button';\r\nimport { updateTenantPermissions } from '@/lib/data';\r\nimport { adminPermissions } from '@/constants';\r\n\r\ninterface PermissionsTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n  currentUser: User;\r\n}\r\n\r\nconst PermissionsTab: React.FC<PermissionsTabProps> = ({ tenant, onUpdate, currentUser }) => {\r\n  const [localPermissions, setLocalPermissions] = useState(tenant.permissions);\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLocalPermissions(tenant.permissions);\r\n    setHasChanges(false);\r\n  }, [tenant.permissions]);\r\n\r\n  const handlePermissionChange = (\r\n    roleType: TenantRoleType,\r\n    permission: keyof RolePermissions,\r\n    value: boolean\r\n  ) => {\r\n    setLocalPermissions(prev => {\r\n      const newPerms = JSON.parse(JSON.stringify(prev)); // Deep copy\r\n      if (!newPerms[roleType]) {\r\n        newPerms[roleType] = {};\r\n      }\r\n      newPerms[roleType][permission] = value;\r\n      return newPerms;\r\n    });\r\n    setHasChanges(true);\r\n  };\r\n  \r\n  const handleSaveChanges = () => {\r\n    updateTenantPermissions(tenant.id, localPermissions, currentUser.id);\r\n    onUpdate({ ...tenant, permissions: localPermissions });\r\n    setHasChanges(false);\r\n    alert('Permissions saved successfully!');\r\n  };\r\n\r\n  const formatLabel = (key: string) => {\r\n    return key.replace('can', '').replace(/([A-Z])/g, ' $1').trim();\r\n  };\r\n\r\n  const editableRoleTypes = [TenantRoleType.MEMBER, TenantRoleType.STAFF, TenantRoleType.MODERATOR];\r\n  const permissionKeys = Object.keys(adminPermissions) as Array<keyof RolePermissions>;\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n        <div>\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Role Permissions</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Define what different roles can do within your community. Note: The 'Clergy' role uses 'Staff' permissions.</p>\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            Permission\r\n                        </th>\r\n                        {editableRoleTypes.map(roleType => (\r\n                            <th key={roleType} scope=\"col\" className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                {roleType}\r\n                            </th>\r\n                        ))}\r\n                         <th scope=\"col\" className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            ADMIN\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {permissionKeys.map(permission => (\r\n                        <tr key={permission}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                {formatLabel(permission)}\r\n                            </td>\r\n                            {editableRoleTypes.map(roleType => (\r\n                                <td key={`${roleType}-${permission}`} className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        className=\"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500\"\r\n                                        checked={localPermissions[roleType]?.[permission] || false}\r\n                                        onChange={(e) => handlePermissionChange(roleType, permission, e.target.checked)}\r\n                                    />\r\n                                </td>\r\n                            ))}\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    className=\"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500\"\r\n                                    checked={true}\r\n                                    disabled={true}\r\n                                />\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div className=\"text-right border-t border-gray-200 pt-6\">\r\n            <Button onClick={handleSaveChanges} disabled={!hasChanges}>\r\n                Save Permissions\r\n            </Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PermissionsTab;"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAQA,MAAM,iBAAgD,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE;;IACtF,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC,OAAO,WAAW;IAC3E,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;oCAAC;YACR,oBAAoB,OAAO,WAAW;YACtC,cAAc;QAChB;mCAAG;QAAC,OAAO,WAAW;KAAC;IAEvB,MAAM,yBAAyB,CAC7B,UACA,YACA;QAEA,oBAAoB,CAAA;YAClB,MAAM,WAAW,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,QAAQ,YAAY;YAC/D,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;gBACvB,QAAQ,CAAC,SAAS,GAAG,CAAC;YACxB;YACA,QAAQ,CAAC,SAAS,CAAC,WAAW,GAAG;YACjC,OAAO;QACT;QACA,cAAc;IAChB;IAEA,MAAM,oBAAoB;QACxB,IAAA,yIAAuB,EAAC,OAAO,EAAE,EAAE,kBAAkB,YAAY,EAAE;QACnE,SAAS;YAAE,GAAG,MAAM;YAAE,aAAa;QAAiB;QACpD,cAAc;QACd,MAAM;IACR;IAEA,MAAM,cAAc,CAAC;QACnB,OAAO,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,YAAY,OAAO,IAAI;IAC/D;IAEA,MAAM,oBAAoB;QAAC,0HAAc,CAAC,MAAM;QAAE,0HAAc,CAAC,KAAK;QAAE,0HAAc,CAAC,SAAS;KAAC;IACjG,MAAM,iBAAiB,OAAO,IAAI,CAAC,gIAAgB;IAEnD,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;;kCACG,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAC5D,6LAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAE9C,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;4BAAM,WAAU;sCACb,cAAA,6LAAC;;kDACG,6LAAC;wCAAG,OAAM;wCAAM,WAAU;kDAAiF;;;;;;oCAG1G,kBAAkB,GAAG,CAAC,CAAA,yBACnB,6LAAC;4CAAkB,OAAM;4CAAM,WAAU;sDACpC;2CADI;;;;;kDAIZ,6LAAC;wCAAG,OAAM;wCAAM,WAAU;kDAAmF;;;;;;;;;;;;;;;;;sCAKtH,6LAAC;4BAAM,WAAU;sCACZ,eAAe,GAAG,CAAC,CAAA,2BAChB,6LAAC;;sDACG,6LAAC;4CAAG,WAAU;sDACT,YAAY;;;;;;wCAEhB,kBAAkB,GAAG,CAAC,CAAA,yBACnB,6LAAC;gDAAqC,WAAU;0DAC5C,cAAA,6LAAC;oDACG,MAAK;oDACL,WAAU;oDACV,SAAS,gBAAgB,CAAC,SAAS,EAAE,CAAC,WAAW,IAAI;oDACrD,UAAU,CAAC,IAAM,uBAAuB,UAAU,YAAY,EAAE,MAAM,CAAC,OAAO;;;;;;+CAL7E,GAAG,SAAS,CAAC,EAAE,YAAY;;;;;sDASxC,6LAAC;4CAAG,WAAU;sDACV,cAAA,6LAAC;gDACG,MAAK;gDACL,WAAU;gDACV,SAAS;gDACT,UAAU;;;;;;;;;;;;mCAnBb;;;;;;;;;;;;;;;;;;;;;0BA2BzB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,gJAAM;oBAAC,SAAS;oBAAmB,UAAU,CAAC;8BAAY;;;;;;;;;;;;;;;;;AAMvE;GAlGM;KAAA;uCAoGS"}},
    {"offset": {"line": 2468, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/lib/permissions.ts"],"sourcesContent":["import { TenantRole, User, Tenant, ChatMessage, Conversation, UserTenantMembership } from '@prisma/client';\r\nimport { prisma } from './db';\r\n\r\n// Define RolePermissions based on your application's logic, as it's not in Prisma schema\r\nexport interface RolePermissions {\r\n  canCreatePosts: boolean;\r\n  canCreateEvents: boolean;\r\n  canCreateSermons: boolean;\r\n  canCreatePodcasts: boolean;\r\n  canCreateBooks: boolean;\r\n  canCreateGroupChats: boolean;\r\n  canInviteMembers: boolean;\r\n  canApproveMembership: boolean;\r\n  canBanMembers: boolean;\r\n  canModeratePosts: boolean;\r\n  canModerateChats: boolean;\r\n  canPostInAnnouncementChannels?: boolean;\r\n  canManagePrayerWall: boolean;\r\n  canUploadResources: boolean;\r\n  canManageResources: boolean;\r\n  canManageContactSubmissions: boolean;\r\n}\r\n\r\n// This can be a simple enum if you don't need the string values\r\nexport enum TenantRoleType {\r\n    MEMBER = 'MEMBER',\r\n    STAFF = 'STAFF',\r\n    MODERATOR = 'MODERATOR',\r\n}\r\n\r\nasync function getMembershipForUserInTenant(userId: string, tenantId: string): Promise<(UserTenantMembership & { roles: { role: TenantRole }[] }) | null> {\r\n    return prisma.userTenantMembership.findUnique({\r\n        where: {\r\n            userId_tenantId: {\r\n                userId,\r\n                tenantId,\r\n            },\r\n        },\r\n        include: {\r\n            roles: {\r\n                select: {\r\n                    role: true\r\n                }\r\n            },\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n/**\r\n * Maps a specific TenantRole to a more general TenantRoleType for permission lookups.\r\n */\r\nfunction getRoleType(role: TenantRole): TenantRoleType | 'ADMIN' {\r\n    switch (role) {\r\n        case TenantRole.ADMIN:\r\n            return 'ADMIN';\r\n        case TenantRole.STAFF:\r\n        case TenantRole.CLERGY:\r\n            return TenantRoleType.STAFF;\r\n        case TenantRole.MODERATOR:\r\n            return TenantRoleType.MODERATOR;\r\n        case TenantRole.MEMBER:\r\n            return TenantRoleType.MEMBER;\r\n        default:\r\n            return TenantRoleType.MEMBER;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Checks if a user has a specific permission within a tenant.\r\n * This is the centralized source of truth for all permission checks.\r\n *\r\n * @param user The user to check.\r\n * @param tenant The tenant context for the permission.\r\n * @param permission The permission to check for (e.g., 'canCreatePosts').\r\n * @returns {boolean} True if the user has the permission, false otherwise.\r\n */\r\nexport async function can(user: User, tenant: Tenant, permission: keyof RolePermissions): Promise<boolean> {\r\n  // Super Admins can do anything.\r\n  if (user.isSuperAdmin) {\r\n    return true;\r\n  }\r\n\r\n  // Find the user's membership for this specific tenant.\r\n  const membership = await getMembershipForUserInTenant(user.id, tenant.id);\r\n\r\n  // If the user is not a member or not approved, they have no permissions.\r\n  if (!membership || membership.status !== 'APPROVED') {\r\n    return false;\r\n  }\r\n  \r\n  // Check if any of the user's roles grant the required permission.\r\n  for (const roleInfo of membership.roles) {\r\n    const roleType = getRoleType(roleInfo.role);\r\n    const permissions = tenant.permissions as any;\r\n\r\n    // If permissions is null or undefined, no permissions are granted\r\n    if (!permissions) {\r\n      continue;\r\n    }\r\n\r\n    if (roleType === 'ADMIN') {\r\n        // Admins have all permissions defined under the ADMIN key.\r\n        if (permissions.ADMIN && permissions.ADMIN[permission]) {\r\n            return true;\r\n        }\r\n    } else {\r\n        // For other roles, check against their TenantRoleType.\r\n        const rolePerms = permissions[roleType];\r\n        if (rolePerms && rolePerms[permission]) {\r\n            return true; // Permission granted by at least one role.\r\n        }\r\n    }\r\n  }\r\n\r\n  return false; // No role granted the permission.\r\n}\r\n\r\n/**\r\n * Checks if a user has a specific role within a tenant.\r\n *\r\n * @param user The user to check.\r\n * @param tenantId The ID of the tenant context for the role.\r\n * @param role The role to check for.\r\n * @returns {boolean} True if the user has the role, false otherwise.\r\n */\r\nexport async function hasRole(userId: string, tenantId: string, requiredRoles: TenantRole[]): Promise<boolean> {\r\n  const membership = await getMembershipForUserInTenant(userId, tenantId);\r\n\r\n  if (!membership || membership.status !== 'APPROVED') {\r\n    return false;\r\n  }\r\n\r\n  return membership.roles.some(roleInfo => requiredRoles.includes(roleInfo.role));\r\n}\r\n\r\n/**\r\n * Checks if a user can view a certain type of content (e.g., posts, events).\r\n * It checks tenant settings for public visibility and feature enablement.\r\n *\r\n * @param userId The ID of the user attempting to view. Can be null for anonymous users.\r\n * @param tenantId The ID of the tenant where the content resides.\r\n * @param contentType The key for the content type in tenant settings (e.g., 'posts', 'calendar').\r\n * @returns {Promise<boolean>} True if the user can view the content.\r\n */\r\nexport async function canUserViewContent(userId: string | null, tenantId: string, contentType: 'posts' | 'calendar' | 'sermons' | 'podcasts' | 'books' | 'prayerWall'): Promise<boolean> {\r\n    try {\r\n        const tenant = await prisma.tenant.findUnique({\r\n            where: { id: tenantId },\r\n            include: { settings: true }\r\n        });\r\n\r\n        if (!tenant || !tenant.settings) {\r\n            return false;\r\n        }\r\n\r\n        const settings = tenant.settings as any;\r\n\r\n        // Check if the entire feature is disabled\r\n        const featureFlag = `enable${contentType.charAt(0).toUpperCase() + contentType.slice(1)}`;\r\n        if (!settings[featureFlag]) {\r\n            return false;\r\n        }\r\n\r\n        const membership = userId ? await getMembershipForUserInTenant(userId, tenantId) : null;\r\n\r\n        // If user is not a member, check public visibility settings\r\n        if (!membership || membership.status !== 'APPROVED') {\r\n            // Check if visitorVisibility exists and has the content type property\r\n            if (!settings.visitorVisibility || typeof settings.visitorVisibility !== 'object') {\r\n                return false;\r\n            }\r\n            const result = settings.visitorVisibility[contentType] === true;\r\n            return result;\r\n        }\r\n\r\n        // If they are an approved member, they can view it as long as the feature is enabled.\r\n        return true;\r\n    } catch (error) {\r\n        console.error('[canUserViewContent] Error:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Checks if a user has permission to create a post in a tenant.\r\n *\r\n * @param userId The ID of the user.\r\n * @param tenantId The ID of the tenant.\r\n * @param isAnnouncement Whether the post is an announcement.\r\n * @returns {Promise<boolean>} True if the user can create the post.\r\n */\r\nexport async function canUserPost(userId: string, tenantId: string, isAnnouncement: boolean): Promise<boolean> {\r\n    const user = await prisma.user.findUnique({ where: { id: userId } });\r\n    const tenant = await prisma.tenant.findUnique({ where: { id: tenantId } });\r\n\r\n    if (!user || !tenant) return false;\r\n\r\n    if (isAnnouncement) {\r\n        return can(user, tenant, 'canPostInAnnouncementChannels');\r\n    }\r\n    return can(user, tenant, 'canCreatePosts');\r\n}\r\n\r\n\r\n/**\r\n * Checks if a user can delete a specific message.\r\n */\r\nexport async function canDeleteMessage(\r\n  user: User,\r\n  message: ChatMessage,\r\n  conversation: Conversation,\r\n  tenant: Tenant\r\n): Promise<boolean> {\r\n  if (user.isSuperAdmin) {\r\n    return true;\r\n  }\r\n  // User can delete their own message\r\n  if (message.userId === user.id) {\r\n    return true;\r\n  }\r\n  // Check for moderation permissions\r\n  if (!conversation.isDirectMessage) { // isGroupChat\r\n    if (await can(user, tenant, 'canModerateChats')) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2643, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/ui/Modal.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children }) => {\r\n  useEffect(() => {\r\n    const handleEscape = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-start overflow-y-auto p-4 sm:p-10\"\r\n      aria-labelledby=\"modal-title\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-lg shadow-xl max-w-lg w-full overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()} // Prevent clicks inside the modal from closing it\r\n      >\r\n        <div className=\"flex justify-between items-center p-4 border-b border-gray-200\">\r\n          <h2 id=\"modal-title\" className=\"text-lg font-semibold text-gray-900\">\r\n            {title}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAWA,MAAM,QAA8B,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE;;IACvE,IAAA,0KAAS;2BAAC;YACR,MAAM;gDAAe,CAAC;oBACpB,IAAI,MAAM,GAAG,KAAK,UAAU;wBAC1B;oBACF;gBACF;;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC;mCAAO;oBACL,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;QACF;0BAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QACC,WAAU;QACV,mBAAgB;QAChB,MAAK;QACL,cAAW;QACX,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,IAAG;4BAAc,WAAU;sCAC5B;;;;;;sCAEH,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,6LAAC;gCAAI,OAAM;gCAA6B,WAAU;gCAAU,MAAK;gCAAO,SAAQ;gCAAY,QAAO;0CACjG,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;8BAI3E,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX;GA/CM;KAAA;uCAiDS"}},
    {"offset": {"line": 2765, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/EditRolesModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport type { EnrichedMember, UserTenantRole } from '@/types';\r\nimport { TenantRole } from '@/types';\r\nimport Modal from '../../ui/Modal';\r\nimport Button from '../../ui/Button';\r\nimport Input from '../../ui/Input';\r\n\r\ninterface EditRolesModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  member: EnrichedMember;\r\n  onSubmit: (member: EnrichedMember, roles: UserTenantRole[]) => void;\r\n}\r\n\r\nconst allRoles = Object.values(TenantRole);\r\n\r\nconst EditRolesModal: React.FC<EditRolesModalProps> = ({ isOpen, onClose, member, onSubmit }) => {\r\n  const [selectedRoles, setSelectedRoles] = useState<Set<TenantRole>>(() => new Set());\r\n  const [primaryRole, setPrimaryRole] = useState<TenantRole>(TenantRole.MEMBER);\r\n  const [displayTitle, setDisplayTitle] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (member) {\r\n      const currentRoles = new Set(member.membership.roles.map(r => r.role));\r\n      const currentPrimary = member.membership.roles.find(r => r.isPrimary)?.role || TenantRole.MEMBER;\r\n      const currentTitle = member.membership.roles.find(r => r.displayTitle)?.displayTitle || '';\r\n      \r\n      setSelectedRoles(currentRoles);\r\n      setPrimaryRole(currentPrimary);\r\n      setDisplayTitle(currentTitle);\r\n    }\r\n  }, [member]);\r\n\r\n  const handleRoleToggle = (role: TenantRole) => {\r\n    setSelectedRoles(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(role)) {\r\n        newSet.delete(role);\r\n      } else {\r\n        newSet.add(role);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  // If the primary role is deselected, reset the primary role to the first available selected role.\r\n  useEffect(() => {\r\n    if (!selectedRoles.has(primaryRole)) {\r\n      setPrimaryRole(selectedRoles.size > 0 ? selectedRoles.values().next().value : TenantRole.MEMBER);\r\n    }\r\n  }, [selectedRoles, primaryRole]);\r\n\r\n\r\n  const handleSubmit = () => {\r\n    if (selectedRoles.size === 0) {\r\n      alert('A member must have at least one role.');\r\n      return;\r\n    }\r\n\r\n    const newRoles: UserTenantRole[] = Array.from(selectedRoles).map(role => ({\r\n      id: member.membership.roles.find(r => r.role === role)?.id || `tr-${Date.now()}-${role}`,\r\n      role: role,\r\n      isPrimary: role === primaryRole,\r\n      displayTitle: role === primaryRole ? displayTitle : undefined,\r\n    }));\r\n    \r\n    onSubmit(member, newRoles);\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={`Edit Roles for ${member.profile.displayName}`}>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h3 className=\"text-sm font-medium text-gray-900\">Assigned Roles</h3>\r\n          <div className=\"mt-2 grid grid-cols-2 gap-2\">\r\n            {allRoles.map(role => (\r\n              <label key={role} className=\"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-50\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500\"\r\n                  checked={selectedRoles.has(role)}\r\n                  onChange={() => handleRoleToggle(role)}\r\n                />\r\n                <span className=\"text-sm text-gray-700\">{role}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {selectedRoles.size > 0 && (\r\n          <>\r\n            <div>\r\n              <h3 className=\"text-sm font-medium text-gray-900\">Primary Role</h3>\r\n              <p className=\"text-xs text-gray-500\">This role determines their main title and sorting order.</p>\r\n              <div className=\"mt-2 space-y-2\">\r\n                {Array.from(selectedRoles).map(role => (\r\n                  <label key={`primary-${role}`} className=\"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-50\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"primary-role\"\r\n                      className=\"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500\"\r\n                      checked={primaryRole === role}\r\n                      onChange={() => setPrimaryRole(role)}\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">{role}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            \r\n             <Input\r\n                label=\"Display Title\"\r\n                id=\"displayTitle\"\r\n                name=\"displayTitle\"\r\n                value={displayTitle}\r\n                onChange={(e) => setDisplayTitle(e.target.value)}\r\n                placeholder=\"e.g., Lead Pastor, Senior Student\"\r\n                containerClassName=\"pt-2\"\r\n              />\r\n          </>\r\n        )}\r\n\r\n        <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n          <Button type=\"button\" variant=\"secondary\" onClick={onClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button type=\"button\" onClick={handleSubmit}>\r\n            Save Changes\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditRolesModal;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/MembershipTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedMember, UserTenantRole } from '@/types';\r\nimport { MembershipApprovalMode, MembershipStatus } from '@/types';\r\nimport Button from '../../ui/Button';\r\nimport { getMembersForTenant, updateMembershipStatus, updateMemberRolesAndTitle } from '@/lib/data';\r\nimport { can } from '@/lib/permissions';\r\nimport EditRolesModal from './EditRolesModal';\r\nimport Modal from '../../ui/Modal';\r\n\r\ninterface MembershipTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n  currentUser: User;\r\n  onImpersonate: (user: User) => void;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst MembershipTab: React.FC<MembershipTabProps> = ({ tenant, onUpdate, currentUser, onImpersonate, onRefresh }) => {\r\n  const allMembers = getMembersForTenant(tenant.id);\r\n  \r\n  const [editingMember, setEditingMember] = useState<EnrichedMember | null>(null);\r\n\r\n  const canApprove = can(currentUser, tenant, 'canApproveMembership');\r\n  const canBan = can(currentUser, tenant, 'canBanMembers');\r\n\r\n  const handleModeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    onUpdate({\r\n      ...tenant,\r\n      settings: {\r\n        ...tenant.settings,\r\n        membershipApprovalMode: e.target.value as MembershipApprovalMode,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleStatusUpdate = (membershipId: string, status: MembershipStatus, memberName: string) => {\r\n    let confirmMessage = `Are you sure you want to ${status.toLowerCase()} this member?`;\r\n    if (status === MembershipStatus.BANNED) {\r\n        confirmMessage = `Are you sure you want to ban ${memberName}? This will revoke all their permissions and access to this tenant's member-only content.`;\r\n    } else if (status === MembershipStatus.APPROVED && allMembers.find(m => m.membership.id === membershipId)?.membership.status === MembershipStatus.BANNED) {\r\n        confirmMessage = `Are you sure you want to unban ${memberName}? This will restore their previous roles and permissions.`;\r\n    } else if (status === MembershipStatus.APPROVED) {\r\n        confirmMessage = `Are you sure you want to approve ${memberName}'s request to join?`;\r\n    }\r\n\r\n    if (window.confirm(confirmMessage)) {\r\n      updateMembershipStatus(membershipId, status, currentUser.id);\r\n      onRefresh();\r\n    }\r\n  };\r\n  \r\n  const handleRolesUpdate = (member: EnrichedMember, newRoles: UserTenantRole[]) => {\r\n    updateMemberRolesAndTitle(member.membership.id, newRoles, currentUser.id);\r\n    setEditingMember(null);\r\n    onRefresh();\r\n  };\r\n\r\n  const requested = allMembers.filter(m => m.membership.status === MembershipStatus.REQUESTED);\r\n  const approved = allMembers.filter(m => m.membership.status === MembershipStatus.APPROVED);\r\n  const banned = allMembers.filter(m => m.membership.status === MembershipStatus.BANNED);\r\n\r\n  const MemberTable = ({ members, title }: { members: EnrichedMember[]; title: string }) => {\r\n    if (members.length === 0) {\r\n      return (\r\n        <div>\r\n          <h3 className=\"text-lg font-medium leading-6 text-gray-900\">{title}</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">No members in this category.</p>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">{title}</h3>\r\n        <div className=\"mt-4 flow-root\">\r\n          <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n            <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n              <table className=\"min-w-full divide-y divide-gray-300\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">Name</th>\r\n                    <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Title / Roles</th>\r\n                    <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Actions</span></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                  {members.map((member) => {\r\n                    const primaryRole = member.membership.roles.find(r => r.isPrimary) || member.membership.roles[0];\r\n                    return (\r\n                      <tr key={member.id}>\r\n                        <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"h-10 w-10 flex-shrink-0\">\r\n                              <img className=\"h-10 w-10 rounded-full\" src={member.profile.avatarUrl} alt=\"\" />\r\n                            </div>\r\n                            <div className=\"ml-4\">\r\n                              <div className=\"font-medium text-gray-900\">{member.profile.displayName}</div>\r\n                              <div className=\"text-gray-500\">{member.email}</div>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                          <div className=\"text-gray-900\">{primaryRole?.displayTitle}</div>\r\n                          <div className=\"text-gray-500\">{member.membership.roles.map(r => r.role).join(', ')}</div>\r\n                        </td>\r\n                        <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0\">\r\n                           <div className=\"flex items-center justify-end space-x-2\">\r\n                             {member.membership.status === MembershipStatus.REQUESTED && canApprove && (\r\n                                <>\r\n                                  <Button variant=\"secondary\" size=\"sm\" onClick={() => handleStatusUpdate(member.membership.id, MembershipStatus.REJECTED, member.profile.displayName)}>Reject</Button>\r\n                                  <Button size=\"sm\" onClick={() => handleStatusUpdate(member.membership.id, MembershipStatus.APPROVED, member.profile.displayName)}>Approve</Button>\r\n                                </>\r\n                             )}\r\n                              {member.membership.status === MembershipStatus.APPROVED && canApprove && (\r\n                                <Button variant=\"secondary\" size=\"sm\" onClick={() => setEditingMember(member)}>Edit Roles</Button>\r\n                              )}\r\n                             {member.membership.status === MembershipStatus.APPROVED && canBan && (\r\n                                <Button variant=\"danger\" size=\"sm\" onClick={() => handleStatusUpdate(member.membership.id, MembershipStatus.BANNED, member.profile.displayName)}>Ban</Button>\r\n                             )}\r\n                              {member.membership.status === MembershipStatus.BANNED && canBan && (\r\n                                <Button variant=\"secondary\" size=\"sm\" onClick={() => handleStatusUpdate(member.membership.id, MembershipStatus.APPROVED, member.profile.displayName)}>Unban</Button>\r\n                             )}\r\n                             {currentUser.isSuperAdmin && currentUser.id !== member.id && (\r\n                               <Button variant=\"secondary\" size=\"sm\" onClick={() => onImpersonate(member)}>Impersonate</Button>\r\n                            )}\r\n                           </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Membership Settings</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Configure how users can join your temple.</p>\r\n      </div>\r\n      <div>\r\n        <label htmlFor=\"membershipApprovalMode\" className=\"block text-sm font-medium text-gray-700\">\r\n          Membership Approval Mode\r\n        </label>\r\n        <select\r\n          id=\"membershipApprovalMode\"\r\n          name=\"membershipApprovalMode\"\r\n          className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm rounded-md bg-white text-gray-900\"\r\n          value={tenant.settings.membershipApprovalMode}\r\n          onChange={handleModeChange}\r\n        >\r\n          <option value={MembershipApprovalMode.OPEN}>Open Enrollment (anyone can join instantly)</option>\r\n          <option value={MembershipApprovalMode.APPROVAL_REQUIRED}>Approval Required (admins must approve requests)</option>\r\n        </select>\r\n      </div>\r\n      <div className=\"border-t border-gray-200 pt-8 space-y-8\">\r\n        <MemberTable members={requested} title=\"Pending Requests\" />\r\n        <MemberTable members={approved} title=\"Approved Members\" />\r\n        <MemberTable members={banned} title=\"Banned Members\" />\r\n      </div>\r\n\r\n       {editingMember && (\r\n         <EditRolesModal\r\n          isOpen={!!editingMember}\r\n          onClose={() => setEditingMember(null)}\r\n          member={editingMember}\r\n          onSubmit={handleRolesUpdate}\r\n         />\r\n       )}\r\n\r\n      <div className=\"text-right border-t border-gray-200 pt-6\">\r\n        <Button onClick={() => alert('Membership settings saved (mock)!')}>Save Membership Settings</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MembershipTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3537, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/EditUserProfileModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport type { User, EnrichedMember, UserProfile } from '@/types';\r\nimport { adminUpdateUserProfile } from '@/lib/data';\r\nimport Modal from '../../ui/Modal';\r\nimport Button from '../../ui/Button';\r\nimport Input from '../../ui/Input';\r\n\r\ninterface EditUserProfileModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  member: EnrichedMember;\r\n  adminUser: User;\r\n  onSave: () => void;\r\n}\r\n\r\nconst EditUserProfileModal: React.FC<EditUserProfileModalProps> = ({ isOpen, onClose, member, adminUser, onSave }) => {\r\n  const [profile, setProfile] = useState<UserProfile>(member.profile);\r\n\r\n  useEffect(() => {\r\n    if (member) {\r\n      setProfile(member.profile);\r\n    }\r\n  }, [member]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    setProfile(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleLanguagesChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const languages = e.target.value.split(',').map(lang => lang.trim()).filter(Boolean);\r\n    setProfile(prev => ({ ...prev, languages }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    adminUpdateUserProfile(adminUser.id, member.id, profile);\r\n    onSave();\r\n    alert('Profile updated by admin.');\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={`Edit Profile for ${member.profile.displayName}`}>\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        <Input \r\n          label=\"Display Name\" \r\n          id=\"displayName\" \r\n          name=\"displayName\" \r\n          value={profile.displayName} \r\n          onChange={handleInputChange} \r\n          required \r\n        />\r\n        <Input \r\n          label=\"Avatar URL\" \r\n          id=\"avatarUrl\" \r\n          name=\"avatarUrl\" \r\n          type=\"url\"\r\n          value={profile.avatarUrl || ''} \r\n          onChange={handleInputChange} \r\n        />\r\n        <div>\r\n          <label htmlFor=\"bio\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Bio\r\n          </label>\r\n          <textarea\r\n            id=\"bio\"\r\n            name=\"bio\"\r\n            rows={4}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n            value={profile.bio || ''}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <Input \r\n            label=\"City\" \r\n            id=\"locationCity\" \r\n            name=\"locationCity\" \r\n            value={profile.locationCity || ''} \r\n            onChange={handleInputChange} \r\n          />\r\n          <Input \r\n            label=\"Country\" \r\n            id=\"locationCountry\" \r\n            name=\"locationCountry\" \r\n            value={profile.locationCountry || ''} \r\n            onChange={handleInputChange} \r\n          />\r\n        </div>\r\n        <Input \r\n          label=\"Languages (comma-separated)\" \r\n          id=\"languages\" \r\n          name=\"languages\" \r\n          value={(profile.languages || []).join(', ')} \r\n          onChange={handleLanguagesChange} \r\n          placeholder=\"e.g., English, Spanish\"\r\n        />\r\n        \r\n        <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n          <Button type=\"button\" variant=\"secondary\" onClick={onClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button type=\"submit\">Save Changes</Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditUserProfileModal;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAUA,MAAM,uBAA4D,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE;;IAC/G,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAc,OAAO,OAAO;IAElE,IAAA,0KAAS;0CAAC;YACR,IAAI,QAAQ;gBACV,WAAW,OAAO,OAAO;YAC3B;QACF;yCAAG;QAAC;KAAO;IAEX,MAAM,oBAAoB,CAAC;QACzB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,WAAW,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;IAChD;IAEA,MAAM,wBAAwB,CAAC;QAC7B,MAAM,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI,IAAI,MAAM,CAAC;QAC5E,WAAW,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE;YAAU,CAAC;IAC5C;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAA,wIAAsB,EAAC,UAAU,EAAE,EAAE,OAAO,EAAE,EAAE;QAChD;QACA,MAAM;IACR;IAEA,qBACE,6LAAC,+IAAK;QAAC,QAAQ;QAAQ,SAAS;QAAS,OAAO,CAAC,iBAAiB,EAAE,OAAO,OAAO,CAAC,WAAW,EAAE;kBAC9F,cAAA,6LAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,6LAAC,+IAAK;oBACJ,OAAM;oBACN,IAAG;oBACH,MAAK;oBACL,OAAO,QAAQ,WAAW;oBAC1B,UAAU;oBACV,QAAQ;;;;;;8BAEV,6LAAC,+IAAK;oBACJ,OAAM;oBACN,IAAG;oBACH,MAAK;oBACL,MAAK;oBACL,OAAO,QAAQ,SAAS,IAAI;oBAC5B,UAAU;;;;;;8BAEZ,6LAAC;;sCACC,6LAAC;4BAAM,SAAQ;4BAAM,WAAU;sCAA+C;;;;;;sCAG9E,6LAAC;4BACC,IAAG;4BACH,MAAK;4BACL,MAAM;4BACN,WAAU;4BACV,OAAO,QAAQ,GAAG,IAAI;4BACtB,UAAU;;;;;;;;;;;;8BAGd,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,+IAAK;4BACJ,OAAM;4BACN,IAAG;4BACH,MAAK;4BACL,OAAO,QAAQ,YAAY,IAAI;4BAC/B,UAAU;;;;;;sCAEZ,6LAAC,+IAAK;4BACJ,OAAM;4BACN,IAAG;4BACH,MAAK;4BACL,OAAO,QAAQ,eAAe,IAAI;4BAClC,UAAU;;;;;;;;;;;;8BAGd,6LAAC,+IAAK;oBACJ,OAAM;oBACN,IAAG;oBACH,MAAK;oBACL,OAAO,CAAC,QAAQ,SAAS,IAAI,EAAE,EAAE,IAAI,CAAC;oBACtC,UAAU;oBACV,aAAY;;;;;;8BAGd,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,gJAAM;4BAAC,MAAK;4BAAS,SAAQ;4BAAY,SAAS;sCAAS;;;;;;sCAG5D,6LAAC,gJAAM;4BAAC,MAAK;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAKhC;GA5FM;KAAA;uCA8FS"}},
    {"offset": {"line": 3741, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/UserProfilesTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedMember } from '@/types';\r\nimport { getMembersForTenant } from '@/lib/data';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\nimport EditUserProfileModal from './EditUserProfileModal';\r\n\r\ninterface UserProfilesTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst UserProfilesTab: React.FC<UserProfilesTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  const allMembers = useMemo(() => getMembersForTenant(tenant.id), [tenant.id, onRefresh]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [editingMember, setEditingMember] = useState<EnrichedMember | null>(null);\r\n\r\n  const filteredMembers = useMemo(() => {\r\n    if (!searchTerm) return allMembers;\r\n    const lower = searchTerm.toLowerCase();\r\n    return allMembers.filter(\r\n      m => m.profile.displayName.toLowerCase().includes(lower) || m.email.toLowerCase().includes(lower)\r\n    );\r\n  }, [allMembers, searchTerm]);\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Manage User Profiles</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">\r\n          View member profiles for {tenant.name}. Platform Super Admins can edit profiles from this panel.\r\n        </p>\r\n      </div>\r\n      \r\n      <Input\r\n        label=\"Search Members\"\r\n        id=\"profile-search\"\r\n        placeholder=\"Search by name or email...\"\r\n        value={searchTerm}\r\n        onChange={(e) => setSearchTerm(e.target.value)}\r\n      />\r\n\r\n      <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">Name</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Roles</th>\r\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Edit</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                {filteredMembers.map(member => (\r\n                  <tr key={member.id}>\r\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                      <div className=\"flex items-center\">\r\n                        <div className=\"h-10 w-10 flex-shrink-0\">\r\n                          <img className=\"h-10 w-10 rounded-full\" src={member.profile.avatarUrl} alt=\"\" />\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                          <div className=\"font-medium text-gray-900\">{member.profile.displayName}</div>\r\n                          <div className=\"text-gray-500\">{member.email}</div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                      {member.membership.roles.map(r => r.role).join(', ')}\r\n                    </td>\r\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0\">\r\n                      {currentUser.isSuperAdmin && (\r\n                        <Button variant=\"secondary\" size=\"sm\" onClick={() => setEditingMember(member)}>\r\n                          Edit\r\n                        </Button>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {editingMember && (\r\n        <EditUserProfileModal\r\n          isOpen={!!editingMember}\r\n          onClose={() => setEditingMember(null)}\r\n          member={editingMember}\r\n          adminUser={currentUser}\r\n          onSave={() => {\r\n            onRefresh();\r\n            setEditingMember(null);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfilesTab;"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAQA,MAAM,kBAAkD,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE;;IACzF,MAAM,aAAa,IAAA,wKAAO;+CAAC,IAAM,IAAA,qIAAmB,EAAC,OAAO,EAAE;8CAAG;QAAC,OAAO,EAAE;QAAE;KAAU;IACvF,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAwB;IAE1E,MAAM,kBAAkB,IAAA,wKAAO;oDAAC;YAC9B,IAAI,CAAC,YAAY,OAAO;YACxB,MAAM,QAAQ,WAAW,WAAW;YACpC,OAAO,WAAW,MAAM;4DACtB,CAAA,IAAK,EAAE,OAAO,CAAC,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC;;QAE/F;mDAAG;QAAC;QAAY;KAAW;IAE3B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAC5D,6LAAC;wBAAE,WAAU;;4BAA6B;4BACd,OAAO,IAAI;4BAAC;;;;;;;;;;;;;0BAI1C,6LAAC,+IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;0BAG/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;8CACC,cAAA,6LAAC;;0DACC,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAyE;;;;;;0DACnG,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAoC,cAAA,6LAAC;oDAAK,WAAU;8DAAU;;;;;;;;;;;;;;;;;;;;;;8CAG5F,6LAAC;oCAAM,WAAU;8CACd,gBAAgB,GAAG,CAAC,CAAA,uBACnB,6LAAC;;8DACC,6LAAC;oDAAG,WAAU;8DACZ,cAAA,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAI,WAAU;0EACb,cAAA,6LAAC;oEAAI,WAAU;oEAAyB,KAAK,OAAO,OAAO,CAAC,SAAS;oEAAE,KAAI;;;;;;;;;;;0EAE7E,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;kFAA6B,OAAO,OAAO,CAAC,WAAW;;;;;;kFACtE,6LAAC;wEAAI,WAAU;kFAAiB,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;8DAIlD,6LAAC;oDAAG,WAAU;8DACX,OAAO,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,EAAE,IAAI,CAAC;;;;;;8DAEjD,6LAAC;oDAAG,WAAU;8DACX,YAAY,YAAY,kBACvB,6LAAC,gJAAM;wDAAC,SAAQ;wDAAY,MAAK;wDAAK,SAAS,IAAM,iBAAiB;kEAAS;;;;;;;;;;;;2CAjB5E,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YA8B7B,+BACC,6LAAC,0KAAoB;gBACnB,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,iBAAiB;gBAChC,QAAQ;gBACR,WAAW;gBACX,QAAQ;oBACN;oBACA,iBAAiB;gBACnB;;;;;;;;;;;;AAKV;GAvFM;KAAA;uCAyFS"}},
    {"offset": {"line": 4030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/DonationsTab.tsx"],"sourcesContent":["import React from 'react';\r\nimport type { Tenant, DonationSettings } from '../../../types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\nimport ToggleSwitch from '../../ui/ToggleSwitch';\r\n\r\ninterface DonationsTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n}\r\n\r\nconst DonationsTab: React.FC<DonationsTabProps> = ({ tenant, onUpdate }) => {\r\n  const settings = tenant.settings.donationSettings;\r\n\r\n  const handleSettingsChange = (field: keyof DonationSettings, value: any) => {\r\n    onUpdate({\r\n      ...tenant,\r\n      settings: {\r\n        ...tenant.settings,\r\n        donationSettings: {\r\n          ...settings,\r\n          [field]: value,\r\n        },\r\n      },\r\n    });\r\n  };\r\n  \r\n  const handleAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const amounts = e.target.value.split(',').map(s => parseInt(s.trim())).filter(n => !isNaN(n));\r\n      handleSettingsChange('suggestedAmounts', amounts);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n        <div>\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Donation Settings</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Configure how your community can receive donations. The main \"Enable Donations\" toggle is in the <span className=\"font-semibold text-amber-700\">Features</span> tab.</p>\r\n        </div>\r\n        \r\n        <div className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"mode\" className=\"block text-sm font-medium text-gray-700 mb-1\">Donation Mode</label>\r\n              <select\r\n                id=\"mode\"\r\n                name=\"mode\"\r\n                className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n                value={settings.mode}\r\n                onChange={(e) => handleSettingsChange('mode', e.target.value as 'EXTERNAL' | 'INTEGRATED')}\r\n              >\r\n                <option value=\"EXTERNAL\">External Link (e.g., PayPal, GoFundMe)</option>\r\n                <option value=\"INTEGRATED\">Integrated Form (Mock)</option>\r\n              </select>\r\n            </div>\r\n\r\n            {settings.mode === 'EXTERNAL' && (\r\n                <Input \r\n                    label=\"External Donation URL\"\r\n                    id=\"externalUrl\"\r\n                    name=\"externalUrl\"\r\n                    type=\"url\"\r\n                    value={settings.externalUrl || ''}\r\n                    onChange={e => handleSettingsChange('externalUrl', e.target.value)}\r\n                    placeholder=\"https://www.paypal.com/donate/...\"\r\n                />\r\n            )}\r\n        </div>\r\n        \r\n         <div className=\"border-t border-gray-200 pt-8\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Donation Form</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Customize the integrated donation form.</p>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n             <Input \r\n                label=\"Currency\"\r\n                id=\"currency\"\r\n                name=\"currency\"\r\n                value={settings.currency}\r\n                onChange={e => handleSettingsChange('currency', e.target.value.toUpperCase())}\r\n                placeholder=\"USD\"\r\n                className=\"w-24\"\r\n            />\r\n            <Input \r\n                label=\"Suggested Amounts (comma-separated)\"\r\n                id=\"suggestedAmounts\"\r\n                name=\"suggestedAmounts\"\r\n                value={settings.suggestedAmounts.join(', ')}\r\n                onChange={handleAmountChange}\r\n                placeholder=\"10, 25, 50, 100\"\r\n            />\r\n             <ToggleSwitch\r\n                label=\"Allow Custom Amounts\"\r\n                description=\"Let donors enter an amount not listed above.\"\r\n                enabled={settings.allowCustomAmounts}\r\n                onChange={enabled => handleSettingsChange('allowCustomAmounts', enabled)}\r\n            />\r\n        </div>\r\n\r\n        <div className=\"border-t border-gray-200 pt-8\">\r\n            <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Leaderboard</h3>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n            <ToggleSwitch\r\n                label=\"Enable Leaderboard\"\r\n                description=\"Show a list of top donors on the donations page.\"\r\n                enabled={settings.leaderboardEnabled}\r\n                onChange={enabled => handleSettingsChange('leaderboardEnabled', enabled)}\r\n            />\r\n            {settings.leaderboardEnabled && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                      <label htmlFor=\"leaderboardVisibility\" className=\"block text-sm font-medium text-gray-700 mb-1\">Visibility</label>\r\n                      <select id=\"leaderboardVisibility\" name=\"leaderboardVisibility\" className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n                         value={settings.leaderboardVisibility} onChange={e => handleSettingsChange('leaderboardVisibility', e.target.value as 'PUBLIC' | 'MEMBERS_ONLY')}\r\n                      >\r\n                        <option value=\"MEMBERS_ONLY\">Members Only</option>\r\n                        <option value=\"PUBLIC\">Public</option>\r\n                      </select>\r\n                    </div>\r\n                     <div>\r\n                      <label htmlFor=\"leaderboardTimeframe\" className=\"block text-sm font-medium text-gray-700 mb-1\">Timeframe</label>\r\n                      <select id=\"leaderboardTimeframe\" name=\"leaderboardTimeframe\" className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n                        value={settings.leaderboardTimeframe} onChange={e => handleSettingsChange('leaderboardTimeframe', e.target.value as 'ALL_TIME' | 'YEARLY' | 'MONTHLY')}\r\n                      >\r\n                        <option value=\"ALL_TIME\">All Time</option>\r\n                        <option value=\"YEARLY\">This Year</option>\r\n                        <option value=\"MONTHLY\">This Month</option>\r\n                      </select>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n        \r\n        <div className=\"text-right border-t border-gray-200 pt-6\">\r\n            <Button onClick={() => alert('Donation settings saved (mock)!')}>Save Changes</Button>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DonationsTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4411, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/forms/VolunteerNeedForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface VolunteerNeedFormProps {\r\n  onSubmit: (data: { title: string; description: string; date: Date; slotsNeeded: number }) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst VolunteerNeedForm: React.FC<VolunteerNeedFormProps> = ({ onSubmit, onCancel }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [slotsNeeded, setSlotsNeeded] = useState(1);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!title || !date || slotsNeeded < 1) {\r\n      alert('Please fill out all required fields.');\r\n      return;\r\n    }\r\n    onSubmit({\r\n      title,\r\n      description,\r\n      date: new Date(date),\r\n      slotsNeeded,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <Input\r\n        label=\"Opportunity Title\"\r\n        id=\"title\"\r\n        name=\"title\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        required\r\n      />\r\n      <div>\r\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Description\r\n        </label>\r\n        <textarea\r\n          id=\"description\"\r\n          name=\"description\"\r\n          rows={3}\r\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"grid grid-cols-2 gap-6\">\r\n        <Input\r\n          label=\"Date\"\r\n          id=\"date\"\r\n          name=\"date\"\r\n          type=\"date\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          required\r\n        />\r\n        <Input\r\n          label=\"Slots Needed\"\r\n          id=\"slotsNeeded\"\r\n          name=\"slotsNeeded\"\r\n          type=\"number\"\r\n          min=\"1\"\r\n          value={slotsNeeded}\r\n          onChange={(e) => setSlotsNeeded(parseInt(e.target.value, 10))}\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\">\r\n          Create Need\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default VolunteerNeedForm;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAOA,MAAM,oBAAsD,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;;IACjF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACvE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,CAAC,QAAQ,cAAc,GAAG;YACtC,MAAM;YACN;QACF;QACA,SAAS;YACP;YACA;YACA,MAAM,IAAI,KAAK;YACf;QACF;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,6LAAC,+IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,QAAQ;;;;;;0BAEV,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;wBAAc,WAAU;kCAA+C;;;;;;kCAGtF,6LAAC;wBACC,IAAG;wBACH,MAAK;wBACL,MAAM;wBACN,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAGlD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+IAAK;wBACJ,OAAM;wBACN,IAAG;wBACH,MAAK;wBACL,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,QAAQ;;;;;;kCAEV,6LAAC,+IAAK;wBACJ,OAAM;wBACN,IAAG;wBACH,MAAK;wBACL,MAAK;wBACL,KAAI;wBACJ,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,SAAS,EAAE,MAAM,CAAC,KAAK,EAAE;wBACzD,QAAQ;;;;;;;;;;;;0BAGZ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,gJAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAY,SAAS;kCAAU;;;;;;kCAG7D,6LAAC,gJAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAM9B;GA1EM;KAAA;uCA4ES"}},
    {"offset": {"line": 4570, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/VolunteeringTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedVolunteerNeed } from '@/types';\r\nimport { getVolunteerNeedsForTenant, addVolunteerNeed } from '@/lib/data';\r\nimport Button from '../../ui/Button';\r\nimport Modal from '../../ui/Modal';\r\nimport VolunteerNeedForm from '../forms/VolunteerNeedForm';\r\n\r\ninterface VolunteeringTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst VolunteeringTab: React.FC<VolunteeringTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  const [needs, setNeeds] = useState<EnrichedVolunteerNeed[]>(() => getVolunteerNeedsForTenant(tenant.id));\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [expandedNeedId, setExpandedNeedId] = useState<string | null>(null);\r\n\r\n  const refreshNeeds = () => {\r\n    setNeeds(getVolunteerNeedsForTenant(tenant.id));\r\n    onRefresh();\r\n  };\r\n\r\n  const handleCreateNeed = (data: { title: string; description: string; date: Date; slotsNeeded: number }) => {\r\n    addVolunteerNeed({ tenantId: tenant.id, ...data }, currentUser.id);\r\n    refreshNeeds();\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const toggleExpand = (needId: string) => {\r\n    setExpandedNeedId(prev => (prev === needId ? null : needId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Volunteer Management</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">Create and manage volunteer opportunities for your members.</p>\r\n        </div>\r\n        <Button onClick={() => setIsModalOpen(true)}>+ Create Need</Button>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {needs.length > 0 ? (\r\n          needs.map(need => (\r\n            <div key={need.id} className=\"bg-white shadow-sm rounded-lg border border-gray-200\">\r\n              <div className=\"p-4 flex justify-between items-center\">\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-800\">{need.title}</p>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {need.date.toLocaleDateString()} &middot; {need.signups.length} / {need.slotsNeeded} Filled\r\n                  </p>\r\n                </div>\r\n                <Button variant=\"secondary\" size=\"sm\" onClick={() => toggleExpand(need.id)}>\r\n                  {expandedNeedId === need.id ? 'Hide Signups' : 'View Signups'}\r\n                </Button>\r\n              </div>\r\n              {expandedNeedId === need.id && (\r\n                <div className=\"border-t border-gray-200 bg-gray-50 p-4\">\r\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Signed Up Volunteers:</h4>\r\n                  {need.signups.length > 0 ? (\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {need.signups.map(({ user, signup }) => (\r\n                        <li key={signup.id} className=\"py-2 flex items-center space-x-3\">\r\n                          <img src={user.profile.avatarUrl} alt={user.profile.displayName} className=\"w-8 h-8 rounded-full\" />\r\n                          <div>\r\n                            <p className=\"text-sm font-medium text-gray-900\">{user.profile.displayName}</p>\r\n                            <p className=\"text-xs text-gray-500\">{user.email}</p>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"text-sm text-gray-500\">No volunteers have signed up for this opportunity yet.</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg\">\r\n            <h3 className=\"text-lg font-medium text-gray-900\">No Volunteer Needs Created</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Click \"Create Need\" to get started.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Create Volunteer Need\">\r\n        <VolunteerNeedForm onSubmit={handleCreateNeed} onCancel={() => setIsModalOpen(false)} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VolunteeringTab;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAQA,MAAM,kBAAkD,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE;;IACzF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ;oCAA0B,IAAM,IAAA,4IAA0B,EAAC,OAAO,EAAE;;IACtG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB;IAEpE,MAAM,eAAe;QACnB,SAAS,IAAA,4IAA0B,EAAC,OAAO,EAAE;QAC7C;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,IAAA,kIAAgB,EAAC;YAAE,UAAU,OAAO,EAAE;YAAE,GAAG,IAAI;QAAC,GAAG,YAAY,EAAE;QACjE;QACA,eAAe;IACjB;IAEA,MAAM,eAAe,CAAC;QACpB,kBAAkB,CAAA,OAAS,SAAS,SAAS,OAAO;IACtD;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA8C;;;;;;0CAC5D,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE5C,6LAAC,gJAAM;wBAAC,SAAS,IAAM,eAAe;kCAAO;;;;;;;;;;;;0BAG/C,6LAAC;gBAAI,WAAU;0BACZ,MAAM,MAAM,GAAG,IACd,MAAM,GAAG,CAAC,CAAA,qBACR,6LAAC;wBAAkB,WAAU;;0CAC3B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAE,WAAU;0DAA+B,KAAK,KAAK;;;;;;0DACtD,6LAAC;gDAAE,WAAU;;oDACV,KAAK,IAAI,CAAC,kBAAkB;oDAAG;oDAAW,KAAK,OAAO,CAAC,MAAM;oDAAC;oDAAI,KAAK,WAAW;oDAAC;;;;;;;;;;;;;kDAGxF,6LAAC,gJAAM;wCAAC,SAAQ;wCAAY,MAAK;wCAAK,SAAS,IAAM,aAAa,KAAK,EAAE;kDACtE,mBAAmB,KAAK,EAAE,GAAG,iBAAiB;;;;;;;;;;;;4BAGlD,mBAAmB,KAAK,EAAE,kBACzB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAyC;;;;;;oCACtD,KAAK,OAAO,CAAC,MAAM,GAAG,kBACrB,6LAAC;wCAAG,WAAU;kDACX,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,iBACjC,6LAAC;gDAAmB,WAAU;;kEAC5B,6LAAC;wDAAI,KAAK,KAAK,OAAO,CAAC,SAAS;wDAAE,KAAK,KAAK,OAAO,CAAC,WAAW;wDAAE,WAAU;;;;;;kEAC3E,6LAAC;;0EACC,6LAAC;gEAAE,WAAU;0EAAqC,KAAK,OAAO,CAAC,WAAW;;;;;;0EAC1E,6LAAC;gEAAE,WAAU;0EAAyB,KAAK,KAAK;;;;;;;;;;;;;+CAJ3C,OAAO,EAAE;;;;;;;;;iGAUtB,6LAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;;uBA5BnC,KAAK,EAAE;;;;kFAmCnB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAoC;;;;;;sCAClD,6LAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;;;;;;0BAKhD,6LAAC,+IAAK;gBAAC,QAAQ;gBAAa,SAAS,IAAM,eAAe;gBAAQ,OAAM;0BACtE,cAAA,6LAAC,wKAAiB;oBAAC,UAAU;oBAAkB,UAAU,IAAM,eAAe;;;;;;;;;;;;;;;;;AAItF;GAhFM;KAAA;uCAkFS"}},
    {"offset": {"line": 4852, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/forms/SmallGroupForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport type { EnrichedMember } from '@/types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\nimport ToggleSwitch from '../../ui/ToggleSwitch';\r\n\r\ninterface SmallGroupFormProps {\r\n  onSubmit: (data: { name: string; description: string; leaderUserId: string; meetingSchedule: string; isActive: boolean }) => void;\r\n  onCancel: () => void;\r\n  members: EnrichedMember[];\r\n}\r\n\r\nconst SmallGroupForm: React.FC<SmallGroupFormProps> = ({ onSubmit, onCancel, members }) => {\r\n  const [name, setName] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [leaderUserId, setLeaderUserId] = useState(members[0]?.id || '');\r\n  const [meetingSchedule, setMeetingSchedule] = useState('');\r\n  const [isActive, setIsActive] = useState(true);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!name || !leaderUserId || !meetingSchedule) {\r\n      alert('Please fill out all required fields.');\r\n      return;\r\n    }\r\n    onSubmit({ name, description, leaderUserId, meetingSchedule, isActive });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <Input\r\n        label=\"Group Name\"\r\n        id=\"name\"\r\n        name=\"name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        required\r\n      />\r\n      <div>\r\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Description\r\n        </label>\r\n        <textarea\r\n          id=\"description\"\r\n          name=\"description\"\r\n          rows={3}\r\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label htmlFor=\"leaderUserId\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Group Leader\r\n        </label>\r\n        <select\r\n          id=\"leaderUserId\"\r\n          name=\"leaderUserId\"\r\n          className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n          value={leaderUserId}\r\n          onChange={(e) => setLeaderUserId(e.target.value)}\r\n          required\r\n        >\r\n          {members.map(member => (\r\n            <option key={member.id} value={member.id}>{member.profile.displayName}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <Input\r\n        label=\"Meeting Schedule\"\r\n        id=\"meetingSchedule\"\r\n        name=\"meetingSchedule\"\r\n        value={meetingSchedule}\r\n        onChange={(e) => setMeetingSchedule(e.target.value)}\r\n        placeholder=\"e.g., Tuesdays at 7 PM\"\r\n        required\r\n      />\r\n      <ToggleSwitch\r\n        label=\"Group is Active\"\r\n        description=\"Inactive groups are hidden from the main discovery page.\"\r\n        enabled={isActive}\r\n        onChange={setIsActive}\r\n      />\r\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\">\r\n          Create Group\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SmallGroupForm;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;;;;;;;AAQA,MAAM,iBAAgD,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE;;IACpF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,OAAO,CAAC,EAAE,EAAE,MAAM;IACnE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,iBAAiB;YAC9C,MAAM;YACN;QACF;QACA,SAAS;YAAE;YAAM;YAAa;YAAc;YAAiB;QAAS;IACxE;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,6LAAC,+IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,QAAQ;;;;;;0BAEV,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;wBAAc,WAAU;kCAA+C;;;;;;kCAGtF,6LAAC;wBACC,IAAG;wBACH,MAAK;wBACL,MAAM;wBACN,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAGlD,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;wBAAe,WAAU;kCAA+C;;;;;;kCAGvF,6LAAC;wBACC,IAAG;wBACH,MAAK;wBACL,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wBAC/C,QAAQ;kCAEP,QAAQ,GAAG,CAAC,CAAA,uBACX,6LAAC;gCAAuB,OAAO,OAAO,EAAE;0CAAG,OAAO,OAAO,CAAC,WAAW;+BAAxD,OAAO,EAAE;;;;;;;;;;;;;;;;0BAI5B,6LAAC,+IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gBAClD,aAAY;gBACZ,QAAQ;;;;;;0BAEV,6LAAC,sJAAY;gBACX,OAAM;gBACN,aAAY;gBACZ,SAAS;gBACT,UAAU;;;;;;0BAEZ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,gJAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAY,SAAS;kCAAU;;;;;;kCAG7D,6LAAC,gJAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAM9B;GAjFM;KAAA;uCAmFS"}},
    {"offset": {"line": 5039, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/SmallGroupsTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedSmallGroup } from '@/types';\r\nimport { getSmallGroupsForTenant, createSmallGroup, getMembersForTenant } from '@/lib/data';\r\nimport Button from '../../ui/Button';\r\nimport Modal from '../../ui/Modal';\r\nimport SmallGroupForm from '../forms/SmallGroupForm';\r\n\r\ninterface SmallGroupsTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst SmallGroupsTab: React.FC<SmallGroupsTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  const [groups, setGroups] = useState<EnrichedSmallGroup[]>(() => getSmallGroupsForTenant(tenant.id));\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  \r\n  const tenantMembers = useMemo(() => getMembersForTenant(tenant.id), [tenant.id]);\r\n\r\n  const refreshGroups = () => {\r\n    setGroups(getSmallGroupsForTenant(tenant.id));\r\n    onRefresh();\r\n  };\r\n\r\n  const handleCreateGroup = (data: { name: string; description: string; leaderUserId: string; meetingSchedule: string; isActive: boolean }) => {\r\n    createSmallGroup({ tenantId: tenant.id, ...data }, currentUser.id);\r\n    refreshGroups();\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Small Group Management</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">Create and manage small groups for your members.</p>\r\n        </div>\r\n        <Button onClick={() => setIsModalOpen(true)}>+ Create Group</Button>\r\n      </div>\r\n      \r\n       <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">Group Name</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Leader</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Members</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Status</th>\r\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Actions</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                {groups.map((group) => (\r\n                  <tr key={group.id}>\r\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                      <div className=\"font-medium text-gray-900\">{group.name}</div>\r\n                      <div className=\"text-gray-500\">{group.meetingSchedule}</div>\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                      {group.leader.profile.displayName}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{group.members.length}</td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                       <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${group.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\r\n                        {group.isActive ? 'Active' : 'Inactive'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0\">\r\n                       <Button variant=\"secondary\" size=\"sm\">Edit</Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Create Small Group\">\r\n        <SmallGroupForm\r\n          onSubmit={handleCreateGroup}\r\n          onCancel={() => setIsModalOpen(false)}\r\n          members={tenantMembers}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SmallGroupsTab;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAQA,MAAM,iBAAgD,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE;;IACvF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ;mCAAuB,IAAM,IAAA,yIAAuB,EAAC,OAAO,EAAE;;IAClG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,gBAAgB,IAAA,wKAAO;iDAAC,IAAM,IAAA,qIAAmB,EAAC,OAAO,EAAE;gDAAG;QAAC,OAAO,EAAE;KAAC;IAE/E,MAAM,gBAAgB;QACpB,UAAU,IAAA,yIAAuB,EAAC,OAAO,EAAE;QAC3C;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,IAAA,kIAAgB,EAAC;YAAE,UAAU,OAAO,EAAE;YAAE,GAAG,IAAI;QAAC,GAAG,YAAY,EAAE;QACjE;QACA,eAAe;IACjB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA8C;;;;;;0CAC5D,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE5C,6LAAC,gJAAM;wBAAC,SAAS,IAAM,eAAe;kCAAO;;;;;;;;;;;;0BAG9C,6LAAC;gBAAI,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;8CACC,cAAA,6LAAC;;0DACC,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAyE;;;;;;0DACnG,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAoC,cAAA,6LAAC;oDAAK,WAAU;8DAAU;;;;;;;;;;;;;;;;;;;;;;8CAG5F,6LAAC;oCAAM,WAAU;8CACd,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;;8DACC,6LAAC;oDAAG,WAAU;;sEACZ,6LAAC;4DAAI,WAAU;sEAA6B,MAAM,IAAI;;;;;;sEACtD,6LAAC;4DAAI,WAAU;sEAAiB,MAAM,eAAe;;;;;;;;;;;;8DAEvD,6LAAC;oDAAG,WAAU;8DACX,MAAM,MAAM,CAAC,OAAO,CAAC,WAAW;;;;;;8DAEnC,6LAAC;oDAAG,WAAU;8DAAqD,MAAM,OAAO,CAAC,MAAM;;;;;;8DACvF,6LAAC;oDAAG,WAAU;8DACX,cAAA,6LAAC;wDAAK,WAAW,CAAC,wEAAwE,EAAE,MAAM,QAAQ,GAAG,gCAAgC,6BAA6B;kEACxK,MAAM,QAAQ,GAAG,WAAW;;;;;;;;;;;8DAGjC,6LAAC;oDAAG,WAAU;8DACX,cAAA,6LAAC,gJAAM;wDAAC,SAAQ;wDAAY,MAAK;kEAAK;;;;;;;;;;;;2CAflC,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAyB7B,6LAAC,+IAAK;gBAAC,QAAQ;gBAAa,SAAS,IAAM,eAAe;gBAAQ,OAAM;0BACtE,cAAA,6LAAC,qKAAc;oBACb,UAAU;oBACV,UAAU,IAAM,eAAe;oBAC/B,SAAS;;;;;;;;;;;;;;;;;AAKnB;GA5EM;KAAA;uCA8ES"}},
    {"offset": {"line": 5343, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/LiveStreamTab.tsx"],"sourcesContent":["import React from 'react';\r\nimport type { Tenant, LiveStreamSettings } from '../../../types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\nimport ToggleSwitch from '../../ui/ToggleSwitch';\r\n\r\ninterface LiveStreamTabProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n}\r\n\r\nconst LiveStreamTab: React.FC<LiveStreamTabProps> = ({ tenant, onUpdate }) => {\r\n  const settings = tenant.settings.liveStreamSettings;\r\n\r\n  const handleSettingsChange = (field: keyof LiveStreamSettings, value: any) => {\r\n    onUpdate({\r\n      ...tenant,\r\n      settings: {\r\n        ...tenant.settings,\r\n        liveStreamSettings: {\r\n          ...settings,\r\n          [field]: value,\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Live Stream Settings</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Configure your live stream embed. The main \"Enable Live Stream\" toggle is in the <span className=\"font-semibold text-amber-700\">Features</span> tab.</p>\r\n      </div>\r\n      \r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <label htmlFor=\"provider\" className=\"block text-sm font-medium text-gray-700 mb-1\">Stream Provider</label>\r\n          <select\r\n            id=\"provider\"\r\n            name=\"provider\"\r\n            className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n            value={settings.provider}\r\n            onChange={(e) => handleSettingsChange('provider', e.target.value as LiveStreamSettings['provider'])}\r\n          >\r\n            <option value=\"YOUTUBE\">YouTube</option>\r\n            <option value=\"FACEBOOK\">Facebook</option>\r\n            <option value=\"VIMEO\">Vimeo</option>\r\n            <option value=\"OTHER\">Other (enter embed URL)</option>\r\n          </select>\r\n        </div>\r\n        \r\n        <Input \r\n            label=\"Embed URL\"\r\n            id=\"embedUrl\"\r\n            name=\"embedUrl\"\r\n            type=\"url\"\r\n            value={settings.embedUrl || ''}\r\n            onChange={e => handleSettingsChange('embedUrl', e.target.value)}\r\n            placeholder=\"https://www.youtube.com/embed/...\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"border-t border-gray-200 pt-8\">\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Go Live</h3>\r\n      </div>\r\n      <ToggleSwitch\r\n        label=\"We're Live!\"\r\n        description=\"Enable this to show a 'Live' indicator on your tenant home page.\"\r\n        enabled={settings.isLive}\r\n        onChange={enabled => handleSettingsChange('isLive', enabled)}\r\n      />\r\n      \r\n      <div className=\"text-right border-t border-gray-200 pt-6\">\r\n        <Button onClick={() => alert('Live stream settings saved (mock)!')}>Save Changes</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveStreamTab;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;AAOA,MAAM,gBAA8C,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE;IACvE,MAAM,WAAW,OAAO,QAAQ,CAAC,kBAAkB;IAEnD,MAAM,uBAAuB,CAAC,OAAiC;QAC7D,SAAS;YACP,GAAG,MAAM;YACT,UAAU;gBACR,GAAG,OAAO,QAAQ;gBAClB,oBAAoB;oBAClB,GAAG,QAAQ;oBACX,CAAC,MAAM,EAAE;gBACX;YACF;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;kCACC,6LAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAC5D,6LAAC;wBAAE,WAAU;;4BAA6B;0CAAiF,6LAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAe;;;;;;;;;;;;;0BAG3L,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAM,SAAQ;gCAAW,WAAU;0CAA+C;;;;;;0CACnF,6LAAC;gCACC,IAAG;gCACH,MAAK;gCACL,WAAU;gCACV,OAAO,SAAS,QAAQ;gCACxB,UAAU,CAAC,IAAM,qBAAqB,YAAY,EAAE,MAAM,CAAC,KAAK;;kDAEhE,6LAAC;wCAAO,OAAM;kDAAU;;;;;;kDACxB,6LAAC;wCAAO,OAAM;kDAAW;;;;;;kDACzB,6LAAC;wCAAO,OAAM;kDAAQ;;;;;;kDACtB,6LAAC;wCAAO,OAAM;kDAAQ;;;;;;;;;;;;;;;;;;kCAI1B,6LAAC,+IAAK;wBACF,OAAM;wBACN,IAAG;wBACH,MAAK;wBACL,MAAK;wBACL,OAAO,SAAS,QAAQ,IAAI;wBAC5B,UAAU,CAAA,IAAK,qBAAqB,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC9D,aAAY;;;;;;;;;;;;0BAIlB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAA8C;;;;;;;;;;;0BAE9D,6LAAC,sJAAY;gBACX,OAAM;gBACN,aAAY;gBACZ,SAAS,SAAS,MAAM;gBACxB,UAAU,CAAA,UAAW,qBAAqB,UAAU;;;;;;0BAGtD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,gJAAM;oBAAC,SAAS,IAAM,MAAM;8BAAuC;;;;;;;;;;;;;;;;;AAI5E;KAlEM;uCAoES"}},
    {"offset": {"line": 5549, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/PrayerWallTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedCommunityPost } from '@/types';\r\nimport { CommunityPostStatus } from '@/types';\r\nimport { getCommunityPostsForTenant, updateCommunityPostStatus } from '@/lib/data';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface PrayerWallTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst PrayerWallTab: React.FC<PrayerWallTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  const allPosts = useMemo(() => getCommunityPostsForTenant(tenant.id, true), [tenant.id, onRefresh]);\r\n  const [statusFilter, setStatusFilter] = useState<CommunityPostStatus | 'ALL'>('ALL');\r\n\r\n  const handleStatusChange = (postId: string, newStatus: CommunityPostStatus) => {\r\n    if (window.confirm(`Are you sure you want to change this post's status to ${newStatus}?`)) {\r\n        updateCommunityPostStatus(postId, newStatus, currentUser.id);\r\n        onRefresh();\r\n    }\r\n  };\r\n  \r\n  const handleDelete = (postId: string) => {\r\n    // For now, we'll just set the status to something that hides it. A real delete would be better.\r\n     if (window.confirm(`Are you sure you want to delete this post? This cannot be undone.`)) {\r\n        // This is a mock for delete. A real implementation would remove the record.\r\n        updateCommunityPostStatus(postId, 'DELETED' as any, currentUser.id);\r\n        onRefresh();\r\n    }\r\n  }\r\n\r\n  const filteredPosts = useMemo(() => {\r\n    if (statusFilter === 'ALL') {\r\n      return allPosts;\r\n    }\r\n    return allPosts.filter(post => post.status === statusFilter);\r\n  }, [allPosts, statusFilter]);\r\n\r\n  const statusFilters: (CommunityPostStatus | 'ALL')[] = ['ALL', CommunityPostStatus.PENDING_APPROVAL, CommunityPostStatus.PUBLISHED, CommunityPostStatus.FULFILLED];\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Prayer Wall Moderation</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">Manage all prayer requests and tangible needs submitted by members.</p>\r\n      </div>\r\n\r\n      <div className=\"border-b border-gray-200\">\r\n        <nav className=\"-mb-px flex space-x-6\" aria-label=\"Tabs\">\r\n          {statusFilters.map(status => (\r\n            <button\r\n              key={status}\r\n              onClick={() => setStatusFilter(status)}\r\n              className={`${\r\n                statusFilter === status\r\n                  ? 'border-amber-500 text-amber-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\r\n            >\r\n              {status.replace('_', ' ')}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">Author</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Request</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Status</th>\r\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Actions</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                {filteredPosts.map(post => (\r\n                  <tr key={post.id}>\r\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                        <div className=\"flex items-center\">\r\n                            <div className=\"h-10 w-10 flex-shrink-0\">\r\n                                <img className=\"h-10 w-10 rounded-full\" src={post.authorAvatarUrl} alt={post.authorDisplayName} />\r\n                            </div>\r\n                            <div className=\"ml-4 font-medium text-gray-900\">{post.authorDisplayName}</div>\r\n                        </div>\r\n                    </td>\r\n                    <td className=\"px-3 py-4 text-sm text-gray-500\">\r\n                        <p className=\"line-clamp-3\">{post.body}</p>\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        <span className=\"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800\">\r\n                            {post.status.replace('_', ' ')}\r\n                        </span>\r\n                    </td>\r\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0 space-x-2\">\r\n                        {post.status === CommunityPostStatus.PENDING_APPROVAL && (\r\n                            <Button size=\"sm\" onClick={() => handleStatusChange(post.id, CommunityPostStatus.PUBLISHED)}>Approve</Button>\r\n                        )}\r\n                        {post.status === CommunityPostStatus.PUBLISHED && (\r\n                             <Button size=\"sm\" variant=\"secondary\" onClick={() => handleStatusChange(post.id, CommunityPostStatus.FULFILLED)}>Mark as Fulfilled</Button>\r\n                        )}\r\n                        <Button size=\"sm\" variant=\"danger\" onClick={() => handleDelete(post.id)}>Delete</Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrayerWallTab;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5886, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/forms/ResourceForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport type { ResourceItem } from '@/types';\r\nimport { FileType, ResourceVisibility } from '@/types';\r\nimport Input from '../../ui/Input';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface ResourceFormProps {\r\n  onSubmit: (data: Omit<ResourceItem, 'id' | 'createdAt' | 'tenantId' | 'uploaderUserId'>) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst ResourceForm: React.FC<ResourceFormProps> = ({ onSubmit, onCancel }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [fileUrl, setFileUrl] = useState('');\r\n  const [fileType, setFileType] = useState<FileType>(FileType.PDF);\r\n  const [visibility, setVisibility] = useState<ResourceVisibility>(ResourceVisibility.MEMBERS_ONLY);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!title || !fileUrl) {\r\n      alert('Please fill out the Title and File URL fields.');\r\n      return;\r\n    }\r\n    onSubmit({ title, description, fileUrl, fileType, visibility });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <Input\r\n        label=\"Title\"\r\n        id=\"title\"\r\n        name=\"title\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        required\r\n      />\r\n      <div>\r\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Description\r\n        </label>\r\n        <textarea\r\n          id=\"description\"\r\n          name=\"description\"\r\n          rows={3}\r\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n      </div>\r\n       <Input\r\n        label=\"File URL (mock)\"\r\n        id=\"fileUrl\"\r\n        name=\"fileUrl\"\r\n        type=\"url\"\r\n        value={fileUrl}\r\n        onChange={(e) => setFileUrl(e.target.value)}\r\n        required\r\n        placeholder=\"https://example.com/file.pdf\"\r\n      />\r\n       <div>\r\n        <label htmlFor=\"fileType\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          File Type\r\n        </label>\r\n        <select\r\n          id=\"fileType\"\r\n          name=\"fileType\"\r\n          className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n          value={fileType}\r\n          onChange={(e) => setFileType(e.target.value as FileType)}\r\n        >\r\n          {Object.values(FileType).map(type => (\r\n            <option key={type} value={type}>{type}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Visibility</label>\r\n        <div className=\"flex space-x-4\">\r\n            <label className=\"flex items-center space-x-2\">\r\n                <input type=\"radio\" name=\"visibility\" value={ResourceVisibility.MEMBERS_ONLY} checked={visibility === ResourceVisibility.MEMBERS_ONLY} onChange={() => setVisibility(ResourceVisibility.MEMBERS_ONLY)} className=\"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500\" />\r\n                <span>Members Only</span>\r\n            </label>\r\n             <label className=\"flex items-center space-x-2\">\r\n                <input type=\"radio\" name=\"visibility\" value={ResourceVisibility.PUBLIC} checked={visibility === ResourceVisibility.PUBLIC} onChange={() => setVisibility(ResourceVisibility.PUBLIC)} className=\"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500\" />\r\n                <span>Public</span>\r\n            </label>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\">\r\n          Save Resource\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ResourceForm;"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;;;;;;;AAOA,MAAM,eAA4C,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAW,oHAAQ,CAAC,GAAG;IAC/D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAqB,8HAAkB,CAAC,YAAY;IAEhG,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,CAAC,SAAS;YACtB,MAAM;YACN;QACF;QACA,SAAS;YAAE;YAAO;YAAa;YAAS;YAAU;QAAW;IAC/D;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,6LAAC,+IAAK;gBACJ,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,QAAQ;;;;;;0BAEV,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;wBAAc,WAAU;kCAA+C;;;;;;kCAGtF,6LAAC;wBACC,IAAG;wBACH,MAAK;wBACL,MAAM;wBACN,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0BAGjD,6LAAC,+IAAK;gBACL,OAAM;gBACN,IAAG;gBACH,MAAK;gBACL,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,QAAQ;gBACR,aAAY;;;;;;0BAEb,6LAAC;;kCACA,6LAAC;wBAAM,SAAQ;wBAAW,WAAU;kCAA+C;;;;;;kCAGnF,6LAAC;wBACC,IAAG;wBACH,MAAK;wBACL,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;kCAE1C,OAAO,MAAM,CAAC,oHAAQ,EAAE,GAAG,CAAC,CAAA,qBAC3B,6LAAC;gCAAkB,OAAO;0CAAO;+BAApB;;;;;;;;;;;;;;;;0BAInB,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA+C;;;;;;kCAChE,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAM,WAAU;;kDACb,6LAAC;wCAAM,MAAK;wCAAQ,MAAK;wCAAa,OAAO,8HAAkB,CAAC,YAAY;wCAAE,SAAS,eAAe,8HAAkB,CAAC,YAAY;wCAAE,UAAU,IAAM,cAAc,8HAAkB,CAAC,YAAY;wCAAG,WAAU;;;;;;kDACjN,6LAAC;kDAAK;;;;;;;;;;;;0CAET,6LAAC;gCAAM,WAAU;;kDACd,6LAAC;wCAAM,MAAK;wCAAQ,MAAK;wCAAa,OAAO,8HAAkB,CAAC,MAAM;wCAAE,SAAS,eAAe,8HAAkB,CAAC,MAAM;wCAAE,UAAU,IAAM,cAAc,8HAAkB,CAAC,MAAM;wCAAG,WAAU;;;;;;kDAC/L,6LAAC;kDAAK;;;;;;;;;;;;;;;;;;;;;;;;0BAIhB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,gJAAM;wBAAC,MAAK;wBAAS,SAAQ;wBAAY,SAAS;kCAAU;;;;;;kCAG7D,6LAAC,gJAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAM9B;GAxFM;KAAA;uCA0FS"}},
    {"offset": {"line": 6144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/ResourceCenterTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, EnrichedResourceItem, ResourceItem } from '@/types';\r\nimport { getResourceItemsForTenant, addResourceItem, deleteResourceItem } from '@/lib/data';\r\nimport Button from '../../ui/Button';\r\nimport Modal from '../../ui/Modal';\r\nimport ResourceForm from '../forms/ResourceForm';\r\n\r\ninterface ResourceCenterTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst ResourceCenterTab: React.FC<ResourceCenterTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  // Admins see all resources, so isMember is true\r\n  const resources = useMemo(() => getResourceItemsForTenant(tenant.id, true), [tenant.id, onRefresh]);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const handleCreateResource = (data: Omit<ResourceItem, 'id' | 'createdAt' | 'tenantId' | 'uploaderUserId'>) => {\r\n    addResourceItem({\r\n      ...data,\r\n      tenantId: tenant.id,\r\n      uploaderUserId: currentUser.id,\r\n    });\r\n    onRefresh();\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleDelete = (resourceId: string) => {\r\n    if (window.confirm('Are you sure you want to delete this resource? This action cannot be undone.')) {\r\n      deleteResourceItem(resourceId, currentUser.id);\r\n      onRefresh();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Resource Management</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">Manage all downloadable resources for your members.</p>\r\n        </div>\r\n        <Button onClick={() => setIsModalOpen(true)}>+ Add Resource</Button>\r\n      </div>\r\n\r\n      <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">Title</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Uploader</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Visibility</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Type</th>\r\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Actions</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                {resources.map(resource => (\r\n                  <tr key={resource.id}>\r\n                    <td className=\"py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                      <div className=\"font-medium text-gray-900\">{resource.title}</div>\r\n                      <div className=\"text-gray-500 line-clamp-1\">{resource.description}</div>\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{resource.uploaderDisplayName}</td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{resource.visibility.replace('_', ' ')}</td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{resource.fileType}</td>\r\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0\">\r\n                      <Button variant=\"danger\" size=\"sm\" onClick={() => handleDelete(resource.id)}>Delete</Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Add New Resource\">\r\n        <ResourceForm onSubmit={handleCreateResource} onCancel={() => setIsModalOpen(false)} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResourceCenterTab;"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;AAQA,MAAM,oBAAsD,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE;;IAC7F,gDAAgD;IAChD,MAAM,YAAY,IAAA,wKAAO;gDAAC,IAAM,IAAA,2IAAyB,EAAC,OAAO,EAAE,EAAE;+CAAO;QAAC,OAAO,EAAE;QAAE;KAAU;IAClG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,uBAAuB,CAAC;QAC5B,IAAA,iIAAe,EAAC;YACd,GAAG,IAAI;YACP,UAAU,OAAO,EAAE;YACnB,gBAAgB,YAAY,EAAE;QAChC;QACA;QACA,eAAe;IACjB;IAEA,MAAM,eAAe,CAAC;QACpB,IAAI,OAAO,OAAO,CAAC,iFAAiF;YAClG,IAAA,oIAAkB,EAAC,YAAY,YAAY,EAAE;YAC7C;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA8C;;;;;;0CAC5D,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE5C,6LAAC,gJAAM;wBAAC,SAAS,IAAM,eAAe;kCAAO;;;;;;;;;;;;0BAG/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;8CACC,cAAA,6LAAC;;0DACC,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAyE;;;;;;0DACnG,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAA4D;;;;;;0DACtF,6LAAC;gDAAG,OAAM;gDAAM,WAAU;0DAAoC,cAAA,6LAAC;oDAAK,WAAU;8DAAU;;;;;;;;;;;;;;;;;;;;;;8CAG5F,6LAAC;oCAAM,WAAU;8CACd,UAAU,GAAG,CAAC,CAAA,yBACb,6LAAC;;8DACC,6LAAC;oDAAG,WAAU;;sEACZ,6LAAC;4DAAI,WAAU;sEAA6B,SAAS,KAAK;;;;;;sEAC1D,6LAAC;4DAAI,WAAU;sEAA8B,SAAS,WAAW;;;;;;;;;;;;8DAEnE,6LAAC;oDAAG,WAAU;8DAAqD,SAAS,mBAAmB;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAqD,SAAS,UAAU,CAAC,OAAO,CAAC,KAAK;;;;;;8DACpG,6LAAC;oDAAG,WAAU;8DAAqD,SAAS,QAAQ;;;;;;8DACpF,6LAAC;oDAAG,WAAU;8DACZ,cAAA,6LAAC,gJAAM;wDAAC,SAAQ;wDAAS,MAAK;wDAAK,SAAS,IAAM,aAAa,SAAS,EAAE;kEAAG;;;;;;;;;;;;2CATxE,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAmBhC,6LAAC,+IAAK;gBAAC,QAAQ;gBAAa,SAAS,IAAM,eAAe;gBAAQ,OAAM;0BACtE,cAAA,6LAAC,mKAAY;oBAAC,UAAU;oBAAsB,UAAU,IAAM,eAAe;;;;;;;;;;;;;;;;;AAIrF;GAvEM;KAAA;uCAyES"}},
    {"offset": {"line": 6443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/forms/RespondSubmissionModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport type { ContactSubmission } from '../../../types';\r\nimport Modal from '../../ui/Modal';\r\nimport Button from '../../ui/Button';\r\n\r\ninterface RespondSubmissionModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (responseText: string) => void;\r\n  submission: ContactSubmission;\r\n}\r\n\r\nconst RespondSubmissionModal: React.FC<RespondSubmissionModalProps> = ({ isOpen, onClose, onSubmit, submission }) => {\r\n  const [responseText, setResponseText] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!responseText.trim()) {\r\n      alert('Please enter a response.');\r\n      return;\r\n    }\r\n    onSubmit(responseText);\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={`Respond to ${submission.name}`}>\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        <div>\r\n            <p className=\"text-sm text-gray-500\">Replying to: <span className=\"font-medium text-gray-800\">{submission.email}</span></p>\r\n            <blockquote className=\"mt-2 border-l-4 border-gray-200 pl-4 text-sm text-gray-600 italic\">\r\n                {submission.message}\r\n            </blockquote>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"responseText\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Your Response\r\n          </label>\r\n          <textarea\r\n            id=\"responseText\"\r\n            name=\"responseText\"\r\n            rows={8}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\r\n            value={responseText}\r\n            onChange={(e) => setResponseText(e.target.value)}\r\n            required\r\n            autoFocus\r\n          />\r\n        </div>\r\n        <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n          <Button type=\"button\" variant=\"secondary\" onClick={onClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button type=\"submit\">\r\n            Send Response\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default RespondSubmissionModal;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;;;;;;AASA,MAAM,yBAAgE,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE;;IAC9G,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,aAAa,IAAI,IAAI;YACxB,MAAM;YACN;QACF;QACA,SAAS;IACX;IAEA,qBACE,6LAAC,+IAAK;QAAC,QAAQ;QAAQ,SAAS;QAAS,OAAO,CAAC,WAAW,EAAE,WAAW,IAAI,EAAE;kBAC7E,cAAA,6LAAC;YAAK,UAAU;YAAc,WAAU;;8BACtC,6LAAC;;sCACG,6LAAC;4BAAE,WAAU;;gCAAwB;8CAAa,6LAAC;oCAAK,WAAU;8CAA6B,WAAW,KAAK;;;;;;;;;;;;sCAC/G,6LAAC;4BAAW,WAAU;sCACjB,WAAW,OAAO;;;;;;;;;;;;8BAG3B,6LAAC;;sCACC,6LAAC;4BAAM,SAAQ;4BAAe,WAAU;sCAA+C;;;;;;sCAGvF,6LAAC;4BACC,IAAG;4BACH,MAAK;4BACL,MAAM;4BACN,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4BAC/C,QAAQ;4BACR,SAAS;;;;;;;;;;;;8BAGb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,gJAAM;4BAAC,MAAK;4BAAS,SAAQ;4BAAY,SAAS;sCAAS;;;;;;sCAG5D,6LAAC,gJAAM;4BAAC,MAAK;sCAAS;;;;;;;;;;;;;;;;;;;;;;;AAOhC;GA/CM;KAAA;uCAiDS"}},
    {"offset": {"line": 6591, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/tabs/ContactSubmissionsTab.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User, ContactSubmission } from '@/types';\r\nimport { ContactSubmissionStatus } from '@/types';\r\nimport { getContactSubmissionsForTenant, updateContactSubmissionStatus, respondToContactSubmission } from '@/lib/data';\r\nimport Button from '../../ui/Button';\r\nimport RespondSubmissionModal from '../forms/RespondSubmissionModal';\r\n\r\ninterface ContactSubmissionsTabProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst ContactSubmissionsTab: React.FC<ContactSubmissionsTabProps> = ({ tenant, currentUser, onRefresh }) => {\r\n  const allSubmissions = useMemo(() => getContactSubmissionsForTenant(tenant.id), [tenant.id, onRefresh]);\r\n  const [statusFilter, setStatusFilter] = useState<ContactSubmissionStatus | 'ALL'>('ALL');\r\n  const [respondingTo, setRespondingTo] = useState<ContactSubmission | null>(null);\r\n\r\n  const handleStatusChange = (submissionId: string, newStatus: ContactSubmissionStatus) => {\r\n    updateContactSubmissionStatus(submissionId, newStatus, currentUser.id);\r\n    onRefresh();\r\n  };\r\n  \r\n  const handleRespond = (responseText: string) => {\r\n    if (!respondingTo) return;\r\n    respondToContactSubmission(respondingTo.id, responseText, currentUser.id, tenant.name);\r\n    setRespondingTo(null);\r\n    onRefresh();\r\n    alert('Response sent!');\r\n  };\r\n\r\n  const filteredSubmissions = useMemo(() => {\r\n    if (statusFilter === 'ALL') {\r\n      return allSubmissions;\r\n    }\r\n    return allSubmissions.filter(s => s.status === statusFilter);\r\n  }, [allSubmissions, statusFilter]);\r\n\r\n  const statusFilters: (ContactSubmissionStatus | 'ALL')[] = ['ALL', ContactSubmissionStatus.UNREAD, ContactSubmissionStatus.READ, ContactSubmissionStatus.ARCHIVED];\r\n  \r\n  const statusColors: { [key in ContactSubmissionStatus]: string } = {\r\n    [ContactSubmissionStatus.UNREAD]: 'bg-red-100 text-red-800',\r\n    [ContactSubmissionStatus.READ]: 'bg-blue-100 text-blue-800',\r\n    [ContactSubmissionStatus.ARCHIVED]: 'bg-gray-100 text-gray-800',\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h3 className=\"text-lg font-medium leading-6 text-gray-900\">Contact Form Submissions</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">View and manage messages sent through your public contact page.</p>\r\n      </div>\r\n\r\n       <div className=\"border-b border-gray-200\">\r\n        <nav className=\"-mb-px flex space-x-6\" aria-label=\"Tabs\">\r\n          {statusFilters.map(status => (\r\n            <button\r\n              key={status}\r\n              onClick={() => setStatusFilter(status)}\r\n              className={`${\r\n                statusFilter === status\r\n                  ? 'border-amber-500 text-amber-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm capitalize`}\r\n            >\r\n              {status.toLowerCase()}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n       <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n            <table className=\"min-w-full divide-y divide-gray-300\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\">From</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Message</th>\r\n                  <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Status</th>\r\n                  <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-0\"><span className=\"sr-only\">Actions</span></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                {filteredSubmissions.map(submission => (\r\n                  <tr key={submission.id}>\r\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-0\">\r\n                        <div className=\"font-medium text-gray-900\">{submission.name}</div>\r\n                        <div className=\"text-gray-500\">{submission.email}</div>\r\n                        <div className=\"text-xs text-gray-400 mt-1\">{submission.createdAt.toLocaleString()}</div>\r\n                    </td>\r\n                    <td className=\"px-3 py-4 text-sm text-gray-500\">\r\n                        <p className=\"line-clamp-3\">{submission.message}</p>\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                        <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${statusColors[submission.status]}`}>\r\n                            {submission.status.toLowerCase()}\r\n                        </span>\r\n                    </td>\r\n                    <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0 space-x-2\">\r\n                         <Button size=\"sm\" onClick={() => setRespondingTo(submission)}>Respond</Button>\r\n                        {submission.status === ContactSubmissionStatus.UNREAD && (\r\n                            <Button size=\"sm\" variant=\"secondary\" onClick={() => handleStatusChange(submission.id, ContactSubmissionStatus.READ)}>Mark as Read</Button>\r\n                        )}\r\n                        {submission.status !== ContactSubmissionStatus.ARCHIVED && (\r\n                            <Button size=\"sm\" variant=\"secondary\" onClick={() => handleStatusChange(submission.id, ContactSubmissionStatus.ARCHIVED)}>Archive</Button>\r\n                        )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            {filteredSubmissions.length === 0 && (\r\n                <div className=\"text-center py-12 text-gray-500\">\r\n                    No submissions match the current filter.\r\n                </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    {respondingTo && (\r\n        <RespondSubmissionModal\r\n            isOpen={!!respondingTo}\r\n            onClose={() => setRespondingTo(null)}\r\n            onSubmit={handleRespond}\r\n            submission={respondingTo}\r\n        />\r\n    )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactSubmissionsTab;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6946, "column": 0}, "map": {"version":3,"sources":["file:///C:/Intel/temple4/app/components/tenant/ControlPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User } from '@/types';\r\nimport { TenantRole } from '@/types';\r\nimport Tabs from '../ui/Tabs';\r\nimport Card from '../ui/Card';\r\nimport { CONTROL_PANEL_TABS } from '@/constants';\r\nimport GeneralTab from './tabs/GeneralTab';\r\nimport BrandingTab from './tabs/BrandingTab';\r\nimport FeaturesTab from './tabs/FeaturesTab';\r\nimport PermissionsTab from './tabs/PermissionsTab';\r\nimport MembershipTab from './tabs/MembershipTab';\r\nimport UserProfilesTab from './tabs/UserProfilesTab';\r\nimport DonationsTab from './tabs/DonationsTab';\r\nimport VolunteeringTab from './tabs/VolunteeringTab';\r\nimport SmallGroupsTab from './tabs/SmallGroupsTab';\r\nimport LiveStreamTab from './tabs/LiveStreamTab';\r\nimport PrayerWallTab from './tabs/PrayerWallTab';\r\nimport ResourceCenterTab from './tabs/ResourceCenterTab';\r\nimport ContactSubmissionsTab from './tabs/ContactSubmissionsTab';\r\nimport { hasRole, can } from '@/lib/permissions';\r\n\r\ninterface ControlPanelProps {\r\n  tenant: Tenant;\r\n  onUpdate: (tenant: Tenant) => void;\r\n  currentUser?: User | null;\r\n  onImpersonate: (user: User) => void;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst ControlPanel: React.FC<ControlPanelProps> = ({ tenant, onUpdate, currentUser, onImpersonate, onRefresh }) => {\r\n  const isAdmin = useMemo(\r\n    () => !!currentUser && (currentUser.isSuperAdmin || hasRole(currentUser, tenant.id, TenantRole.ADMIN)),\r\n    [currentUser, tenant.id]\r\n  );\r\n\r\n  const availableTabs = useMemo(() => {\r\n    return CONTROL_PANEL_TABS.filter(tab => {\r\n      if (isAdmin) {\r\n        return true; // Admins see all tabs\r\n      }\r\n      // Permissions for non-admins\r\n      if (!currentUser) {\r\n        return false;\r\n      }\r\n      switch (tab) {\r\n        case 'Membership & Moderation':\r\n          return can(currentUser, tenant, 'canApproveMembership') || can(currentUser, tenant, 'canBanMembers');\r\n        case 'Prayer Wall':\r\n          return can(currentUser, tenant, 'canManagePrayerWall');\r\n        case 'Resource Center':\r\n          return can(currentUser, tenant, 'canManageResources');\r\n        case 'Contact Submissions':\r\n            return can(currentUser, tenant, 'canManageContactSubmissions');\r\n        default:\r\n          return false; // Hide all other tabs from non-admins\r\n      }\r\n    });\r\n  }, [currentUser, tenant, isAdmin]);\r\n  \r\n  const [activeTab, setActiveTab] = useState(availableTabs[0] || CONTROL_PANEL_TABS[0]);\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'General':\r\n        return <GeneralTab tenant={tenant} onUpdate={onUpdate} />;\r\n      case 'Branding':\r\n        return <BrandingTab tenant={tenant} onUpdate={onUpdate} />;\r\n      case 'Features':\r\n        return <FeaturesTab tenant={tenant} onUpdate={onUpdate} />;\r\n      case 'Permissions':\r\n        return currentUser ? (\r\n          <PermissionsTab tenant={tenant} onUpdate={onUpdate} currentUser={currentUser} />\r\n        ) : null;\r\n      case 'Membership & Moderation':\r\n        return currentUser ? (\r\n          <MembershipTab tenant={tenant} onUpdate={onUpdate} currentUser={currentUser} onImpersonate={onImpersonate} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'User Profiles':\r\n        return currentUser ? (\r\n          <UserProfilesTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'Donations':\r\n        return <DonationsTab tenant={tenant} onUpdate={onUpdate} />;\r\n      case 'Volunteering':\r\n        return currentUser ? (\r\n          <VolunteeringTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'Small Groups':\r\n        return currentUser ? (\r\n          <SmallGroupsTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'Live Stream':\r\n        return <LiveStreamTab tenant={tenant} onUpdate={onUpdate} />;\r\n      case 'Prayer Wall':\r\n        return currentUser ? (\r\n          <PrayerWallTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'Resource Center':\r\n        return currentUser ? (\r\n          <ResourceCenterTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      case 'Contact Submissions':\r\n        return currentUser ? (\r\n          <ContactSubmissionsTab tenant={tenant} currentUser={currentUser} onRefresh={onRefresh} />\r\n        ) : null;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"!p-0\">\r\n        <div className=\"px-6 pt-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Control Panel</h2>\r\n            <p className=\"mt-1 text-sm text-gray-500\">Manage settings for {tenant.name}.</p>\r\n        </div>\r\n        <div className=\"px-6 mt-4\">\r\n             <Tabs tabs={availableTabs} activeTab={activeTab} onTabClick={setActiveTab} />\r\n        </div>\r\n      <div className=\"p-6\">\r\n        {renderTabContent()}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ControlPanel;"],"names":[],"mappings":"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"}}]
}