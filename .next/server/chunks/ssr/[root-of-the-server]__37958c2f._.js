module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},37145,a=>{a.n(a.i(80441))},88681,a=>{"use strict";var b=a.i(7997);a.s(["default",0,({label:a,enabled:c,onChange:d,description:e})=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"flex-grow flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a}),e&&(0,b.jsx)("span",{className:"text-sm text-gray-500",children:e})]}),(0,b.jsx)("button",{type:"button",className:`${c?"bg-amber-600":"bg-gray-200"} relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`,role:"switch","aria-checked":c,onClick:()=>d(!c),children:(0,b.jsx)("span",{"aria-hidden":"true",className:`${c?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`})})]})])},9391,a=>{"use strict";var b=a.i(7997);a.s(["default",0,({children:a,className:c,title:d,description:e})=>(0,b.jsxs)("div",{className:`bg-white shadow-md rounded-lg overflow-hidden ${c}`,children:[d&&(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:d}),e&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),(0,b.jsx)("div",{className:"p-6",children:a})]})])},40556,a=>{"use strict";var b=a.i(7997);a.s(["default",0,({children:a,variant:c="primary",size:d="md",className:e,...f})=>(0,b.jsx)("button",{className:`rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[c]} ${{md:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[d]} ${e}`,...f,children:a})])},51316,a=>{"use strict";var b=a.i(7997);a.s(["default",0,({label:a,id:c,containerClassName:d,...e})=>(0,b.jsxs)("div",{className:d,children:[(0,b.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,b.jsx)("input",{id:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400",...e})]})])},15908,a=>{"use strict";var b=a.i(7997),c=a.i(94431),d=a.i(72709);a.i(70396);var e=a.i(73727),f=a.i(82193),g=a.i(717),h=a.i(40556),i=a.i(9391),j=a.i(51316),k=a.i(88681);let l=({tenant:a})=>{let c=a.settings.donationSettings.leaderboardTimeframe,d=(0,g.useMemo)(()=>(0,f.getDonationsForTenant)(a.id,c),[a.id,c]),e=(0,g.useMemo)(()=>{let a={};return d.forEach(b=>{if(b.isAnonymousOnLeaderboard)return;let c=b.userId||b.displayName;a[c]||(a[c]={total:0,name:b.displayName,avatar:b.userAvatarUrl}),a[c].total+=b.amount}),Object.values(a).sort((a,b)=>b.total-a.total).slice(0,10)},[d]);return(0,b.jsx)(i.default,{title:`Top Donors (${c.replace("_"," ").toLowerCase()})`,children:e.length>0?(0,b.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map((a,c)=>(0,b.jsxs)("li",{className:"py-3 flex items-center",children:[(0,b.jsx)("div",{className:"w-8 text-lg font-bold text-gray-400",children:c+1}),a.avatar&&(0,b.jsx)("img",{className:"h-10 w-10 rounded-full",src:a.avatar,alt:a.name}),(0,b.jsx)("div",{className:`flex-1 ${!a.avatar&&"ml-10"}`,children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name})}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-amber-700",children:["$",a.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},a.name+c))}):(0,b.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No donations to display for this period."})})},m=({tenant:a,user:c,onRefresh:d})=>{let e=a.settings.donationSettings,[m,n]=(0,g.useState)(e.suggestedAmounts[0]||"custom"),[o,p]=(0,g.useState)(""),[q,r]=(0,g.useState)(""),[s,t]=(0,g.useState)(!1),[u,v]=(0,g.useState)(!1);return u?(0,b.jsx)(i.default,{children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Thank You!"}),(0,b.jsxs)("p",{className:"mt-2 text-gray-600",children:["Your generous donation to ",a.name," is greatly appreciated."]}),(0,b.jsx)(h.default,{onClick:()=>v(!1),className:"mt-6",children:"Make Another Donation"})]})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Donations"}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Support the mission and work of ",a.name,"."]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:"EXTERNAL"===e.mode?(0,b.jsx)(i.default,{children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsxs)("h3",{className:"text-xl font-semibold text-gray-800",children:["Donate to ",a.name]}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"This community accepts donations via an external service. Click the button below to be redirected."}),(0,b.jsx)("a",{href:e.externalUrl,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)(h.default,{className:"mt-6",children:"Proceed to Donation Site"})})]})}):(0,b.jsx)("form",{onSubmit:b=>{b.preventDefault();let g="custom"===m?parseFloat(o):m;isNaN(g)||g<=0?alert("Please enter a valid donation amount."):((0,f.addDonationRecord)({tenantId:a.id,userId:c.id,displayName:c.profile.displayName,amount:g,currency:e.currency,message:q,isAnonymousOnLeaderboard:s}),d(),v(!0))},children:(0,b.jsxs)(i.default,{title:"Make a Donation",description:`Your support for ${a.name} is greatly appreciated.`,children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select an Amount (",e.currency,")"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.suggestedAmounts.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>n(a),className:`p-4 text-center rounded-md border-2 font-semibold transition-colors ${m===a?"bg-amber-100 border-amber-500 text-amber-800":"bg-white border-gray-300 hover:border-amber-400"}`,children:["$",a]},a)),e.allowCustomAmounts&&(0,b.jsx)("button",{type:"button",onClick:()=>n("custom"),className:`p-4 text-center rounded-md border-2 font-semibold transition-colors ${"custom"===m?"bg-amber-100 border-amber-500 text-amber-800":"bg-white border-gray-300 hover:border-amber-400"}`,children:"Custom"})]})]}),"custom"===m&&e.allowCustomAmounts&&(0,b.jsx)(j.default,{label:"Custom Amount",id:"customAmount",name:"customAmount",type:"number",step:"0.01",min:"1",value:o,onChange:a=>p(a.target.value),placeholder:"e.g., 75.50",required:!0}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message (Optional)"}),(0,b.jsx)("textarea",{id:"message",name:"message",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",value:q,onChange:a=>r(a.target.value)})]}),(0,b.jsx)(k.default,{label:"Remain Anonymous on Leaderboard",enabled:s,onChange:t})]}),(0,b.jsx)("div",{className:"text-right border-t border-gray-200 pt-6 mt-6",children:(0,b.jsx)(h.default,{type:"submit",children:"Donate Now"})})]})})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:e.leaderboardEnabled&&(0,b.jsx)(l,{tenant:a})})]})]})};async function n({params:a}){let g=await (0,c.getServerSession)(d.authOptions);g&&g.user||(0,e.redirect)("/auth/login");let h=await a,i=await (0,f.getTenantById)(h.tenantId),j=await (0,f.getUserById)(g.user.id);return i&&j||(0,e.redirect)("/"),(0,b.jsx)(m,{tenant:i,user:j})}a.s(["default",()=>n],15908)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__37958c2f._.js.map