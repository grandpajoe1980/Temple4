{"version":3,"sources":["../../../../app/components/ui/Button.tsx","../../../../app/components/ui/Card.tsx","../../../../app/components/ui/Input.tsx","../../../../lib/permissions.ts","../../../../app/components/ui/ToggleSwitch.tsx","../../../../app/components/ui/Modal.tsx","../../../../app/components/tenant/PostForm.tsx","../../../../app/components/tenant/BooksPage.tsx","../../../../app/components/tenant/BookCard.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md';\n  children: React.ReactNode;\n}\n\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\n\n  const variantClasses = {\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n  };\n  \n  const sizeClasses = {\n      md: \"px-4 py-2 text-sm\",\n      sm: \"px-3 py-1.5 text-xs\",\n  }\n\n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","\nimport React from 'react';\n\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  description?: string;\n}\n\nconst Card: React.FC<CardProps> = ({ children, className, title, description }) => {\n  return (\n    <div className={`bg-white shadow-md rounded-lg overflow-hidden ${className}`}>\n        {title && (\n            <div className=\"p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold leading-6 text-gray-900\">{title}</h3>\n                {description && <p className=\"mt-1 text-sm text-gray-500\">{description}</p>}\n            </div>\n        )}\n      <div className=\"p-6\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label: string;\n  containerClassName?: string;\n}\n\nconst Input: React.FC<InputProps> = ({ label, id, containerClassName, ...props }) => {\n  return (\n    <div className={containerClassName}>\n      <label htmlFor={id} className=\"block text-sm font-medium text-gray-700 mb-1\">\n        {label}\n      </label>\n      <input\n        id={id}\n        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400\"\n        {...props}\n      />\n    </div>\n  );\n};\n\nexport default Input;","import { TenantRole, User, Tenant, ChatMessage, Conversation, UserTenantMembership } from '@prisma/client';\nimport { prisma } from './db';\n\n// Define RolePermissions based on your application's logic, as it's not in Prisma schema\nexport interface RolePermissions {\n  canCreatePosts: boolean;\n  canCreateEvents: boolean;\n  canCreateSermons: boolean;\n  canCreatePodcasts: boolean;\n  canCreateBooks: boolean;\n  canCreateGroupChats: boolean;\n  canInviteMembers: boolean;\n  canApproveMembership: boolean;\n  canBanMembers: boolean;\n  canModeratePosts: boolean;\n  canModerateChats: boolean;\n  canPostInAnnouncementChannels?: boolean;\n  canManagePrayerWall: boolean;\n  canUploadResources: boolean;\n  canManageResources: boolean;\n  canManageContactSubmissions: boolean;\n}\n\n// This can be a simple enum if you don't need the string values\nexport enum TenantRoleType {\n    MEMBER = 'MEMBER',\n    STAFF = 'STAFF',\n    MODERATOR = 'MODERATOR',\n}\n\nasync function getMembershipForUserInTenant(userId: string, tenantId: string): Promise<(UserTenantMembership & { roles: { role: TenantRole }[] }) | null> {\n    return prisma.userTenantMembership.findUnique({\n        where: {\n            userId_tenantId: {\n                userId,\n                tenantId,\n            },\n        },\n        include: {\n            roles: {\n                select: {\n                    role: true\n                }\n            },\n        }\n    });\n}\n\n\n\n/**\n * Maps a specific TenantRole to a more general TenantRoleType for permission lookups.\n */\nfunction getRoleType(role: TenantRole): TenantRoleType | 'ADMIN' {\n    switch (role) {\n        case TenantRole.ADMIN:\n            return 'ADMIN';\n        case TenantRole.STAFF:\n        case TenantRole.CLERGY:\n            return TenantRoleType.STAFF;\n        case TenantRole.MODERATOR:\n            return TenantRoleType.MODERATOR;\n        case TenantRole.MEMBER:\n            return TenantRoleType.MEMBER;\n        default:\n            return TenantRoleType.MEMBER;\n    }\n}\n\n\n/**\n * Checks if a user has a specific permission within a tenant.\n * This is the centralized source of truth for all permission checks.\n *\n * @param user The user to check.\n * @param tenant The tenant context for the permission.\n * @param permission The permission to check for (e.g., 'canCreatePosts').\n * @returns {boolean} True if the user has the permission, false otherwise.\n */\nexport async function can(user: User, tenant: Tenant, permission: keyof RolePermissions): Promise<boolean> {\n  // Super Admins can do anything.\n  if (user.isSuperAdmin) {\n    return true;\n  }\n\n  // Find the user's membership for this specific tenant.\n  const membership = await getMembershipForUserInTenant(user.id, tenant.id);\n\n  // If the user is not a member or not approved, they have no permissions.\n  if (!membership || membership.status !== 'APPROVED') {\n    return false;\n  }\n  \n  // Check if any of the user's roles grant the required permission.\n  for (const roleInfo of membership.roles) {\n    const roleType = getRoleType(roleInfo.role);\n    const permissions = tenant.permissions as any;\n\n    // If permissions is null or undefined, no permissions are granted\n    if (!permissions) {\n      continue;\n    }\n\n    if (roleType === 'ADMIN') {\n        // Admins have all permissions defined under the ADMIN key.\n        if (permissions.ADMIN && permissions.ADMIN[permission]) {\n            return true;\n        }\n    } else {\n        // For other roles, check against their TenantRoleType.\n        const rolePerms = permissions[roleType];\n        if (rolePerms && rolePerms[permission]) {\n            return true; // Permission granted by at least one role.\n        }\n    }\n  }\n\n  return false; // No role granted the permission.\n}\n\n/**\n * Checks if a user has a specific role within a tenant.\n *\n * @param user The user to check.\n * @param tenantId The ID of the tenant context for the role.\n * @param role The role to check for.\n * @returns {boolean} True if the user has the role, false otherwise.\n */\nexport async function hasRole(userId: string, tenantId: string, requiredRoles: TenantRole[]): Promise<boolean> {\n  const membership = await getMembershipForUserInTenant(userId, tenantId);\n\n  if (!membership || membership.status !== 'APPROVED') {\n    return false;\n  }\n\n  return membership.roles.some(roleInfo => requiredRoles.includes(roleInfo.role));\n}\n\n/**\n * Checks if a user can view a certain type of content (e.g., posts, events).\n * It checks tenant settings for public visibility and feature enablement.\n *\n * @param userId The ID of the user attempting to view. Can be null for anonymous users.\n * @param tenantId The ID of the tenant where the content resides.\n * @param contentType The key for the content type in tenant settings (e.g., 'posts', 'calendar').\n * @returns {Promise<boolean>} True if the user can view the content.\n */\nexport async function canUserViewContent(userId: string | null, tenantId: string, contentType: 'posts' | 'calendar' | 'sermons' | 'podcasts' | 'books' | 'prayerWall'): Promise<boolean> {\n    try {\n        const tenant = await prisma.tenant.findUnique({\n            where: { id: tenantId },\n            include: { settings: true }\n        });\n\n        if (!tenant || !tenant.settings) {\n            return false;\n        }\n\n        const settings = tenant.settings as any;\n\n        // Check if the entire feature is disabled\n        const featureFlag = `enable${contentType.charAt(0).toUpperCase() + contentType.slice(1)}`;\n        if (!settings[featureFlag]) {\n            return false;\n        }\n\n        const membership = userId ? await getMembershipForUserInTenant(userId, tenantId) : null;\n\n        // If user is not a member, check public visibility settings\n        if (!membership || membership.status !== 'APPROVED') {\n            // Check if visitorVisibility exists and has the content type property\n            if (!settings.visitorVisibility || typeof settings.visitorVisibility !== 'object') {\n                return false;\n            }\n            const result = settings.visitorVisibility[contentType] === true;\n            return result;\n        }\n\n        // If they are an approved member, they can view it as long as the feature is enabled.\n        return true;\n    } catch (error) {\n        console.error('[canUserViewContent] Error:', error);\n        throw error;\n    }\n}\n\n/**\n * Checks if a user has permission to create a post in a tenant.\n *\n * @param userId The ID of the user.\n * @param tenantId The ID of the tenant.\n * @param isAnnouncement Whether the post is an announcement.\n * @returns {Promise<boolean>} True if the user can create the post.\n */\nexport async function canUserPost(userId: string, tenantId: string, isAnnouncement: boolean): Promise<boolean> {\n    const user = await prisma.user.findUnique({ where: { id: userId } });\n    const tenant = await prisma.tenant.findUnique({ where: { id: tenantId } });\n\n    if (!user || !tenant) return false;\n\n    if (isAnnouncement) {\n        return can(user, tenant, 'canPostInAnnouncementChannels');\n    }\n    return can(user, tenant, 'canCreatePosts');\n}\n\n\n/**\n * Checks if a user can delete a specific message.\n */\nexport async function canDeleteMessage(\n  user: User,\n  message: ChatMessage,\n  conversation: Conversation,\n  tenant: Tenant\n): Promise<boolean> {\n  if (user.isSuperAdmin) {\n    return true;\n  }\n  // User can delete their own message\n  if (message.userId === user.id) {\n    return true;\n  }\n  // Check for moderation permissions\n  if (!conversation.isDirectMessage) { // isGroupChat\n    if (await can(user, tenant, 'canModerateChats')) {\n      return true;\n    }\n  }\n  return false;\n}","\nimport React from 'react';\n\ninterface ToggleSwitchProps {\n  label: string;\n  enabled: boolean;\n  onChange: (enabled: boolean) => void;\n  description?: string;\n}\n\nconst ToggleSwitch: React.FC<ToggleSwitchProps> = ({ label, enabled, onChange, description }) => {\n  return (\n    <div className=\"flex items-center justify-between\">\n      <span className=\"flex-grow flex flex-col\">\n        <span className=\"text-sm font-medium text-gray-900\">{label}</span>\n        {description && <span className=\"text-sm text-gray-500\">{description}</span>}\n      </span>\n      <button\n        type=\"button\"\n        className={`${\n          enabled ? 'bg-amber-600' : 'bg-gray-200'\n        } relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`}\n        role=\"switch\"\n        aria-checked={enabled}\n        onClick={() => onChange(!enabled)}\n      >\n        <span\n          aria-hidden=\"true\"\n          className={`${\n            enabled ? 'translate-x-5' : 'translate-x-0'\n          } pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`}\n        />\n      </button>\n    </div>\n  );\n};\n\nexport default ToggleSwitch;\n","'use client';\n\nimport React, { useEffect } from 'react';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n}\n\nconst Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children }) => {\n  useEffect(() => {\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-start overflow-y-auto p-4 sm:p-10\"\n      aria-labelledby=\"modal-title\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white rounded-lg shadow-xl max-w-lg w-full overflow-hidden\"\n        onClick={(e) => e.stopPropagation()} // Prevent clicks inside the modal from closing it\n      >\n        <div className=\"flex justify-between items-center p-4 border-b border-gray-200\">\n          <h2 id=\"modal-title\" className=\"text-lg font-semibold text-gray-900\">\n            {title}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n            aria-label=\"Close modal\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"p-6\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;","\"use client\";\n\nimport React, { useState } from 'react';\nimport type { PostInput } from '@/types';\nimport Input from '../ui/Input';\nimport Button from '../ui/Button';\nimport ToggleSwitch from '../ui/ToggleSwitch';\n\ninterface PostFormProps {\n  onSubmit: (postData: PostInput) => void;\n  onCancel: () => void;\n}\n\nconst PostForm: React.FC<PostFormProps> = ({ onSubmit, onCancel }) => {\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [type, setType] = useState<'BLOG' | 'ANNOUNCEMENT' | 'BOOK'>('BLOG');\n  const [isPublished, setIsPublished] = useState(true);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!title || !body) {\n      alert('Please fill in both the title and body.');\n      return;\n    }\n    onSubmit({ title, body, type, isPublished });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <Input\n        label=\"Post Title\"\n        id=\"title\"\n        name=\"title\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        required\n        placeholder=\"e.g., Annual Community Picnic\"\n      />\n\n      <div>\n        <label htmlFor=\"body\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          Body\n        </label>\n        <textarea\n          id=\"body\"\n          name=\"body\"\n          rows={8}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\n          value={body}\n          onChange={(e) => setBody(e.target.value)}\n          required\n          placeholder=\"Write your content here...\"\n        />\n      </div>\n      \n      <div>\n         <label htmlFor=\"type\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          Post Type\n        </label>\n        <select\n          id=\"type\"\n          name=\"type\"\n          className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm rounded-md bg-white text-gray-900\"\n          value={type}\n          onChange={(e) => setType(e.target.value as 'BLOG' | 'ANNOUNCEMENT' | 'BOOK')}\n        >\n          <option value=\"BLOG\">Blog</option>\n          <option value=\"ANNOUNCEMENT\">Announcement</option>\n          <option value=\"BOOK\">Book</option>\n        </select>\n      </div>\n\n      <ToggleSwitch\n        label=\"Publish Immediately\"\n        description=\"If disabled, this post will be saved as a draft.\"\n        enabled={isPublished}\n        onChange={setIsPublished}\n      />\n\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button type=\"submit\">\n          Save Post\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default PostForm;","\"use client\";\n\nimport React, { useState } from 'react';\nimport type { Tenant, User, PostInput, PostWithAuthor } from '@/types';\nimport { getBooksForTenant, addPost } from '@/lib/data';\nimport Button from '../ui/Button';\nimport { can } from '@/lib/permissions';\nimport Modal from '../ui/Modal';\nimport PostForm from './PostForm';\nimport BookCard from './BookCard';\n\ninterface BooksPageProps {\n  tenant: Tenant;\n  user: User;\n}\n\nconst BooksPage: React.FC<BooksPageProps> = ({ tenant, user }) => {\n  const [books, setBooks] = useState<PostWithAuthor[]>(() => getBooksForTenant(tenant.id));\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const canCreate = can(user, tenant, 'canCreateBooks');\n\n  const handleCreatePost = (postData: PostInput) => {\n    addPost({\n      ...postData,\n      tenantId: tenant.id,\n      authorUserId: user.id,\n    });\n    setBooks(getBooksForTenant(tenant.id)); // Re-fetch to get the latest list\n    setIsModalOpen(false);\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Books & Studies</h2>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Read long-form content and teachings from {tenant.name}.\n          </p>\n        </div>\n        {canCreate && (\n            <Button onClick={() => setIsModalOpen(true)}>\n            + New Book/Chapter\n            </Button>\n        )}\n      </div>\n\n      {books.length > 0 ? (\n        <div className=\"space-y-6\">\n          {books.map((book) => (\n            <BookCard key={book.id} post={book} />\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center bg-white p-12 rounded-lg shadow-sm\">\n          <h3 className=\"text-lg font-medium text-gray-900\">No Books Yet</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            There are no books or long-form posts here. {canCreate ? 'Why not create one?' : ''}\n          </p>\n        </div>\n      )}\n      \n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Create a New Book/Chapter\">\n        <PostForm onSubmit={handleCreatePost} onCancel={() => setIsModalOpen(false)} />\n      </Modal>\n    </div>\n  );\n};\n\nexport default BooksPage;","import React from 'react';\nimport type { PostWithAuthor } from '@/types';\nimport Card from '../ui/Card';\n\ninterface BookCardProps {\n  post: PostWithAuthor;\n}\n\nconst BookCard: React.FC<BookCardProps> = ({ post }) => {\n\n  return (\n    <Card className=\"!p-0 overflow-visible\">\n        <div className=\"p-6\">\n            <div className=\"flex justify-between items-start\">\n                <div>\n                     <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800`}>\n                        {post.type}\n                    </span>\n                    <h3 className=\"mt-2 text-xl font-semibold text-gray-900 hover:text-amber-700 cursor-pointer\">\n                        {post.title}\n                    </h3>\n                </div>\n                 <div className=\"flex-shrink-0 ml-4\">\n                    {/* Placeholder for edit/delete menu */}\n                    <button className=\"text-gray-400 hover:text-gray-600\">\n                         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"http://www.w3.org/2000/svg\" fill=\"currentColor\">\n                            <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\n                        </svg>\n                    </button>\n                </div>\n            </div>\n            \n            <p className=\"mt-4 text-sm text-gray-700 whitespace-pre-line leading-relaxed\">\n                {post.body}\n            </p>\n        </div>\n        <div className=\"bg-gray-50 px-6 py-3 flex items-center justify-between text-sm\">\n            <div className=\"flex items-center space-x-3\">\n                <img className=\"h-8 w-8 rounded-full\" src={post.authorAvatarUrl} alt={post.authorDisplayName} />\n                <span className=\"font-medium text-gray-800\">{post.authorDisplayName}</span>\n            </div>\n            <time dateTime={post.publishedAt.toISOString()} className=\"text-gray-500\">\n                {post.publishedAt.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}\n            </time>\n        </div>\n    </Card>\n  );\n};\n\nexport default BookCard;"],"names":[],"mappings":"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"}