{"version":3,"sources":["../../../../app/components/ui/Button.tsx","../../../../app/components/ui/Input.tsx","../../../../app/components/ui/Modal.tsx/__nextjs-internal-proxy.mjs","../../../../app/components/ui/ToggleSwitch.tsx","../../../../app/components/messages/MessageStream.tsx/__nextjs-internal-proxy.mjs","../../../../app/tenants/%5BtenantId%5D/chat/page.tsx","../../../../app/components/tenant/ChatPage.tsx","../../../../app/components/messages/ConversationList.tsx","../../../../app/components/messages/CreateChannelForm.tsx","../../../../app/components/messages/ConversationDetailsPanel.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\n\r\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label: string;\r\n  containerClassName?: string;\r\n}\r\n\r\nconst Input: React.FC<InputProps> = ({ label, id, containerClassName, ...props }) => {\r\n  return (\r\n    <div className={containerClassName}>\r\n      <label htmlFor={id} className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n        {label}\r\n      </label>\r\n      <input\r\n        id={id}\r\n        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/ui/Modal.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/ui/Modal.tsx\",\n    \"default\",\n);\n","\r\nimport React from 'react';\r\n\r\ninterface ToggleSwitchProps {\r\n  label: string;\r\n  enabled: boolean;\r\n  onChange: (enabled: boolean) => void;\r\n  description?: string;\r\n}\r\n\r\nconst ToggleSwitch: React.FC<ToggleSwitchProps> = ({ label, enabled, onChange, description }) => {\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <span className=\"flex-grow flex flex-col\">\r\n        <span className=\"text-sm font-medium text-gray-900\">{label}</span>\r\n        {description && <span className=\"text-sm text-gray-500\">{description}</span>}\r\n      </span>\r\n      <button\r\n        type=\"button\"\r\n        className={`${\r\n          enabled ? 'bg-amber-600' : 'bg-gray-200'\r\n        } relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`}\r\n        role=\"switch\"\r\n        aria-checked={enabled}\r\n        onClick={() => onChange(!enabled)}\r\n      >\r\n        <span\r\n          aria-hidden=\"true\"\r\n          className={`${\r\n            enabled ? 'translate-x-5' : 'translate-x-0'\r\n          } pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`}\r\n        />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToggleSwitch;\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/messages/MessageStream.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/messages/MessageStream.tsx\",\n    \"default\",\n);\n","import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getTenantById, getUserById } from '@/lib/data';\r\nimport ChatPage from '@/app/components/tenant/ChatPage';\r\n\r\nexport default async function TenantChatPage({ params }: { params: Promise<{ tenantId: string }> }) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session || !session.user) {\r\n    redirect('/auth/login');\r\n  }\r\n\r\n  const resolvedParams = await params;\r\n  const tenant = await getTenantById(resolvedParams.tenantId);\r\n  const user = await getUserById((session.user as any).id);\r\n\r\n  if (!tenant || !user) {\r\n    redirect('/');\r\n  }\r\n\r\n  return <ChatPage tenant={tenant} user={user} />;\r\n}\r\n","import React, { useState, useMemo, useEffect, useCallback } from 'react';\r\nimport type { Tenant, User, EnrichedConversation } from '../../types';\r\nimport { getConversationsForUser, createConversation } from '../../../lib/data';\r\nimport ConversationList from '../messages/ConversationList';\r\nimport MessageStream from '../messages/MessageStream';\r\nimport { can } from '../../lib/permissions';\r\nimport Button from '../ui/Button';\r\nimport Modal from '../ui/Modal';\r\nimport CreateChannelForm from '../messages/CreateChannelForm';\r\nimport ConversationDetailsPanel from '../messages/ConversationDetailsPanel';\r\n\r\ninterface ChatPageProps {\r\n  tenant: Tenant;\r\n  user: User;\r\n  onViewProfile: (userId: string) => void;\r\n}\r\n\r\nconst ChatPage: React.FC<ChatPageProps> = ({ tenant, user, onViewProfile }) => {\r\n  const [updateTrigger, setUpdateTrigger] = useState(0);\r\n  const [isDetailsPanelOpen, setIsDetailsPanelOpen] = useState(true);\r\n\r\n  const tenantConversations = useMemo(() => {\r\n    const all = getConversationsForUser(user.id);\r\n    return all.filter((c) => c.tenantId === tenant.id);\r\n  }, [user.id, tenant.id, updateTrigger]);\r\n\r\n  const [activeConversation, setActiveConversation] = useState<EnrichedConversation | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [newlyCreatedConvId, setNewlyCreatedConvId] = useState<string | null>(null);\r\n\r\n  const canCreate = can(user, tenant, 'canCreateGroupChats');\r\n\r\n  useEffect(() => {\r\n    if (newlyCreatedConvId) {\r\n      // A new channel was just created\r\n      const newConv = tenantConversations.find((c) => c.id === newlyCreatedConvId);\r\n      if (newConv) {\r\n        setActiveConversation(newConv);\r\n        setNewlyCreatedConvId(null); // Reset\r\n      }\r\n    } else {\r\n      // Normal behavior: check if active is still valid or pick a default\r\n      const activeConvStillExists = tenantConversations.some((c) => c.id === activeConversation?.id);\r\n      if (!activeConvStillExists) {\r\n        const announcementChannel = tenantConversations.find(c => c.name === '#announcements');\r\n        const defaultChannel = tenantConversations.find((c) => c.isDefaultChannel);\r\n        setActiveConversation(announcementChannel || defaultChannel || tenantConversations[0] || null);\r\n      }\r\n    }\r\n  }, [tenantConversations, activeConversation, newlyCreatedConvId]);\r\n\r\n  const handleCreateChannel = (data: { name: string; isPrivate: boolean; participantIds: string[] }) => {\r\n    const newConv = createConversation(tenant.id, user.id, data.name, data.isPrivate, data.participantIds);\r\n    setIsModalOpen(false);\r\n    setNewlyCreatedConvId(newConv.id);\r\n    setUpdateTrigger((c) => c + 1);\r\n  };\r\n\r\n  const handleConversationSelect = useCallback((conversation: EnrichedConversation) => {\r\n    setActiveConversation(conversation);\r\n  }, []);\r\n\r\n  const forceConversationListUpdate = useCallback(() => {\r\n    setUpdateTrigger(c => c + 1);\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex h-[calc(100vh-170px)] bg-white rounded-lg shadow-sm overflow-hidden\">\r\n        {/* Left Panel: Conversation List */}\r\n        <div className=\"w-full sm:w-1/3 md:w-1/4 border-r border-gray-200 flex flex-col\">\r\n          <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Channels</h2>\r\n              <p className=\"text-sm text-gray-500\">Conversations in {tenant.name}</p>\r\n            </div>\r\n            {canCreate && (\r\n              <Button size=\"sm\" onClick={() => setIsModalOpen(true)}>\r\n                New\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <ConversationList\r\n            conversations={tenantConversations}\r\n            currentUser={user}\r\n            activeConversationId={activeConversation?.id}\r\n            onConversationSelect={handleConversationSelect}\r\n          />\r\n        </div>\r\n\r\n        {/* Middle Panel: Message Stream */}\r\n        <div className=\"flex-1 flex flex-col\">\r\n          {activeConversation ? (\r\n            <MessageStream\r\n              key={activeConversation.id} // Re-mount component when conversation changes\r\n              currentUser={user}\r\n              conversation={activeConversation}\r\n              onViewProfile={onViewProfile}\r\n              tenant={tenant}\r\n              isDetailsPanelOpen={isDetailsPanelOpen}\r\n              onToggleDetailsPanel={() => setIsDetailsPanelOpen(!isDetailsPanelOpen)}\r\n              onMarkAsRead={forceConversationListUpdate}\r\n            />\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center text-center\">\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900\">No Channels Available</h3>\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  {canCreate ? 'Create a channel to start chatting.' : 'There are no channels for you in this tenant yet.'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Panel: Conversation Details */}\r\n        {isDetailsPanelOpen && activeConversation && (\r\n            <div className=\"hidden lg:block w-full sm:w-1/3 md:w-1/4 border-l border-gray-200\">\r\n                <ConversationDetailsPanel \r\n                    key={activeConversation.id}\r\n                    conversation={activeConversation}\r\n                    tenant={tenant}\r\n                    onViewProfile={onViewProfile}\r\n                />\r\n            </div>\r\n        )}\r\n\r\n      </div>\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Create a New Channel\">\r\n        <CreateChannelForm\r\n          tenant={tenant}\r\n          currentUser={user}\r\n          onSubmit={handleCreateChannel}\r\n          onCancel={() => setIsModalOpen(false)}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatPage;","import React, { useMemo } from 'react';\r\nimport type { EnrichedConversation, User } from '../../types';\r\nimport Input from '../ui/Input';\r\n\r\ninterface ConversationListProps {\r\n  conversations: EnrichedConversation[];\r\n  currentUser: User;\r\n  activeConversationId?: string | null;\r\n  onConversationSelect: (conversation: EnrichedConversation) => void;\r\n  searchTerm?: string;\r\n  onSearchChange?: (term: string) => void;\r\n}\r\n\r\nconst ConversationList: React.FC<ConversationListProps> = ({\r\n  conversations,\r\n  currentUser,\r\n  activeConversationId,\r\n  onConversationSelect,\r\n  searchTerm,\r\n  onSearchChange,\r\n}) => {\r\n  const getOtherParticipant = (conv: EnrichedConversation) => {\r\n    return conv.participants.find((p) => p.id !== currentUser.id);\r\n  };\r\n\r\n  const filteredConversations = useMemo(() => {\r\n    if (!searchTerm) return conversations;\r\n    const lowercasedTerm = searchTerm.toLowerCase();\r\n    return conversations.filter((c) => c.displayName.toLowerCase().includes(lowercasedTerm));\r\n  }, [conversations, searchTerm]);\r\n\r\n  return (\r\n    <div className=\"flex-1 flex flex-col\">\r\n      {onSearchChange && searchTerm !== undefined && (\r\n        <div className=\"p-4 border-b border-gray-200\">\r\n          <Input\r\n            label=\"\"\r\n            id=\"conversation-search\"\r\n            type=\"search\"\r\n            placeholder=\"Search conversations...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n          />\r\n        </div>\r\n      )}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {filteredConversations.map((conv) => {\r\n            const otherParticipant = conv.isDirect ? getOtherParticipant(conv) : null;\r\n            const isActive = conv.id === activeConversationId;\r\n            const lastMessageText = conv.lastMessage\r\n              ? `${conv.lastMessage.userId === currentUser.id ? 'You: ' : ''}${conv.lastMessage.text}`\r\n              : 'No messages yet';\r\n\r\n            return (\r\n              <li\r\n                key={conv.id}\r\n                onClick={() => onConversationSelect(conv)}\r\n                className={`p-4 cursor-pointer transition-colors ${\r\n                  isActive ? 'bg-amber-50' : 'hover:bg-gray-50'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"relative\">\r\n                    {conv.isDirect && otherParticipant ? (\r\n                      <img\r\n                        className=\"h-10 w-10 rounded-full\"\r\n                        // FIX: Access avatarUrl and displayName from the nested profile object.\r\n                        src={otherParticipant.profile.avatarUrl}\r\n                        alt={otherParticipant.profile.displayName}\r\n                      />\r\n                    ) : (\r\n                      <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                        <span className=\"text-gray-500 font-bold\">#</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <p className=\"text-sm font-semibold text-gray-900 truncate\">\r\n                        {conv.displayName}\r\n                      </p>\r\n                      {conv.lastMessage && (\r\n                        <div className=\"text-xs text-gray-400 self-start flex-shrink-0 ml-2\">\r\n                          {conv.lastMessage.createdAt.toLocaleTimeString([], {\r\n                            hour: '2-digit',\r\n                            minute: '2-digit',\r\n                          })}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center\">\r\n                       <p className=\"text-sm text-gray-500 truncate\">{lastMessageText}</p>\r\n                       {conv.unreadCount > 0 && (\r\n                         <span className=\"ml-2 flex-shrink-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full\">\r\n                           {conv.unreadCount}\r\n                         </span>\r\n                       )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversationList;\r\n","import React, { useState, useMemo } from 'react';\r\nimport type { Tenant, User } from '../../types';\r\nimport { getMembersForTenant } from '../../../lib/data';\r\nimport Input from '../ui/Input';\r\nimport Button from '../ui/Button';\r\nimport ToggleSwitch from '../ui/ToggleSwitch';\r\n\r\ninterface CreateChannelFormProps {\r\n  tenant: Tenant;\r\n  currentUser: User;\r\n  onSubmit: (data: { name: string; isPrivate: boolean; participantIds: string[] }) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst CreateChannelForm: React.FC<CreateChannelFormProps> = ({ tenant, currentUser, onSubmit, onCancel }) => {\r\n  const [name, setName] = useState('');\r\n  const [isPrivate, setIsPrivate] = useState(false);\r\n  const [selectedParticipants, setSelectedParticipants] = useState<Set<string>>(() => new Set([currentUser.id]));\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const members = useMemo(() => getMembersForTenant(tenant.id), [tenant.id]);\r\n\r\n  const handleParticipantToggle = (userId: string) => {\r\n    if (userId === currentUser.id) return; // Current user cannot be deselected\r\n    setSelectedParticipants(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(userId)) {\r\n        newSet.delete(userId);\r\n      } else {\r\n        newSet.add(userId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n  \r\n  const filteredMembers = useMemo(() => {\r\n    if (!searchTerm) return members;\r\n    // FIX: Access displayName from the nested profile object.\r\n    return members.filter(m => m.profile.displayName.toLowerCase().includes(searchTerm.toLowerCase()));\r\n  }, [members, searchTerm]);\r\n\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) {\r\n      alert('Please enter a channel name.');\r\n      return;\r\n    }\r\n    onSubmit({\r\n      name: name.trim(),\r\n      isPrivate,\r\n      participantIds: Array.from(selectedParticipants),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      <Input\r\n        label=\"Channel Name\"\r\n        id=\"channel-name\"\r\n        name=\"name\"\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        required\r\n        placeholder=\"# announcements\"\r\n      />\r\n      \r\n      <ToggleSwitch\r\n        label=\"Private Channel\"\r\n        description=\"If enabled, only selected members can see and join this channel.\"\r\n        enabled={isPrivate}\r\n        onChange={setIsPrivate}\r\n      />\r\n\r\n      {isPrivate && (\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-medium text-gray-900\">Select Members</h3>\r\n          <Input\r\n            label=\"\"\r\n            id=\"member-search\"\r\n            placeholder=\"Search members to add...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n          />\r\n          <div className=\"max-h-60 overflow-y-auto border border-gray-200 rounded-md p-2 space-y-2\">\r\n            {filteredMembers.map(member => (\r\n              <div key={member.id} className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {/* FIX: Access avatarUrl and displayName from the nested profile object. */}\r\n                  <img src={member.profile.avatarUrl} alt={member.profile.displayName} className=\"w-8 h-8 rounded-full\" />\r\n                  <span className=\"text-sm text-gray-800\">{member.profile.displayName}</span>\r\n                </div>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500\"\r\n                  checked={selectedParticipants.has(member.id)}\r\n                  onChange={() => handleParticipantToggle(member.id)}\r\n                  disabled={member.id === currentUser.id}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\r\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button type=\"submit\">\r\n          Create Channel\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CreateChannelForm;\r\n","import React, { useMemo } from 'react';\r\n// FIX: Changed 'import type' for TenantRole to a value import.\r\nimport { TenantRole, type EnrichedConversation, type Tenant, type User, type UserTenantMembership } from '../../types';\r\nimport { getMembershipForUserInTenant } from '../../../lib/data';\r\n\r\ninterface ConversationDetailsPanelProps {\r\n  conversation: EnrichedConversation;\r\n  tenant: Tenant;\r\n  onViewProfile: (userId: string) => void;\r\n}\r\n\r\ninterface EnrichedParticipant extends User {\r\n  roles: TenantRole[];\r\n  membership: UserTenantMembership;\r\n}\r\n\r\nconst ConversationDetailsPanel: React.FC<ConversationDetailsPanelProps> = ({ conversation, tenant, onViewProfile }) => {\r\n  const enrichedParticipants = useMemo((): EnrichedParticipant[] => {\r\n    return conversation.participants.map(p => {\r\n        const membership = getMembershipForUserInTenant(p.id, tenant.id);\r\n        if (!membership) return null; // Should not happen for channel members\r\n        return {\r\n            ...p,\r\n            roles: membership.roles.map(r => r.role),\r\n            membership,\r\n        }\r\n    }).filter((p): p is EnrichedParticipant => p !== null)\r\n    .sort((a,b) => {\r\n        const roleOrder = { [TenantRole.ADMIN]: 0, [TenantRole.STAFF]: 1, [TenantRole.CLERGY]: 1, [TenantRole.MODERATOR]: 2, [TenantRole.MEMBER]: 3 };\r\n        const aRole = a.roles[0] || TenantRole.MEMBER;\r\n        const bRole = b.roles[0] || TenantRole.MEMBER;\r\n        if (roleOrder[aRole] < roleOrder[bRole]) return -1;\r\n        if (roleOrder[aRole] > roleOrder[bRole]) return 1;\r\n        return a.profile.displayName.localeCompare(b.profile.displayName);\r\n    });\r\n  }, [conversation.participants, tenant.id]);\r\n\r\n  const roleColors: { [key: string]: string } = {\r\n    ADMIN: 'bg-red-100 text-red-800',\r\n    STAFF: 'bg-sky-100 text-sky-800',\r\n    CLERGY: 'bg-emerald-100 text-emerald-800',\r\n    MODERATOR: 'bg-indigo-100 text-indigo-800',\r\n    MEMBER: 'bg-gray-100 text-gray-800',\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-200\">\r\n        <h3 className=\"font-bold text-lg text-gray-900\">{conversation.displayName}</h3>\r\n        {conversation.description && (\r\n          <p className=\"text-sm text-gray-500 mt-1\">{conversation.description}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Members List */}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        <div className=\"p-4\">\r\n          <h4 className=\"text-xs font-bold uppercase text-gray-500\">\r\n            Members &mdash; {enrichedParticipants.length}\r\n          </h4>\r\n        </div>\r\n        <ul>\r\n          {enrichedParticipants.map(participant => (\r\n            <li \r\n              key={participant.id} \r\n              className=\"px-4 py-2 hover:bg-gray-50 cursor-pointer\"\r\n              onClick={() => onViewProfile(participant.id)}\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <img src={participant.profile.avatarUrl} alt={participant.profile.displayName} className=\"w-8 h-8 rounded-full\" />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm font-semibold text-gray-800\">{participant.membership.displayName || participant.profile.displayName}</p>\r\n                  <div className=\"flex flex-wrap gap-1 mt-0.5\">\r\n                    {participant.roles.map(role => (\r\n                       <span key={role} className={`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${roleColors[role] || 'bg-gray-100 text-gray-800'}`}>\r\n                         {role}\r\n                       </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConversationDetailsPanel;"],"names":[],"mappings":"iYAQsC,CAAC,UAAE,CAAQ,SAAE,EAAU,SAAS,MAAE,EAAO,IAAI,WAAE,CAAS,CAAE,GAAG,EAAO,GAetG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAW,GAAG,YAAY,CAAC,kIAZd,AAYgB,CAXrC,QAAS,kEACT,UAAW,kEACX,OAAQ,2DACV,CAQqD,CAAC,EAAQ,CAAC,CAAC,EAAE,AAN9C,CAChB,GAAI,oBACJ,GAAI,qBACR,CAG6E,CAAC,EAAK,CAAC,CAAC,EAAE,GAAW,CAAG,GAAG,CAAK,UACxG,+DCjB6B,CAAC,OAAE,CAAK,IAAE,CAAE,CAAE,oBAAkB,CAAE,GAAG,EAAO,GAE5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,YACd,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAS,EAAI,UAAU,wDAC3B,IAEH,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAI,EACJ,UAAU,uKACT,GAAG,CAAK,sCCdF,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAU,AAAJ,MAAU,6RAA+R,EAC5T,4DACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,yQAA2Q,EACxS,wCACA,oJCK8C,CAAC,OAAE,CAAK,SAAE,CAAO,UAAE,CAAQ,aAAE,CAAW,CAAE,GAExF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,oCACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CAAqC,IACpD,GAAe,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAyB,OAE3D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAW,CAAA,EACT,EAAU,eAAiB,cAC5B,wNAAwN,CAAC,CAC1N,KAAK,SACL,eAAc,EACd,QAAS,IAAM,EAAS,CAAC,YAEzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,cAAY,OACZ,UAAW,CAAA,EACT,EAAU,gBAAkB,gBAC7B,2HAA2H,CAAC,wCC5BxH,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,2SAA6S,EAC1U,0EACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,uRAAyR,EACtT,sDACA,6HCLJ,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OCHA,EAAA,CAAA,CAAA,KCEA,EAAA,CAAA,CAAA,ODEA,EAAA,CAAA,CAAA","ignoreList":[2,4]}