{"version":3,"sources":["../../../../app/components/ui/Button.tsx","../../../../app/notifications/page.tsx","../../../../app/components/notifications/NotificationPanel.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '../api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getUserByEmail, getNotificationsForUser, markNotificationAsRead, markAllNotificationsAsRead } from '@/lib/data';\r\nimport NotificationPanel from '../components/notifications/NotificationPanel';\r\n\r\nexport default async function Page() {\r\n  const session = await getServerSession(authOptions);\r\n  \r\n  if (!session?.user?.email) {\r\n    redirect('/auth/login');\r\n  }\r\n  \r\n  const user = await getUserByEmail(session.user.email);\r\n  \r\n  if (!user) {\r\n    redirect('/auth/login');\r\n  }\r\n  \r\n  const notifications = await getNotificationsForUser(user.id);\r\n  \r\n  return (\r\n    <NotificationPanel \r\n      notifications={notifications}\r\n      onClose={() => {}}\r\n      onMarkAsRead={(id) => markNotificationAsRead(id)}\r\n      onMarkAllAsRead={() => markAllNotificationsAsRead(user.id)}\r\n      onNavigate={(link) => {}}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport type { Notification } from '../../types';\r\nimport Button from '../ui/Button';\r\n\r\ninterface NotificationPanelProps {\r\n  notifications: Notification[];\r\n  onClose: () => void;\r\n  onMarkAsRead: (notificationId: string) => void;\r\n  onMarkAllAsRead: () => void;\r\n  onNavigate: (link?: string) => void;\r\n}\r\n\r\nconst NotificationPanel: React.FC<NotificationPanelProps> = ({\r\n  notifications,\r\n  onClose,\r\n  onMarkAsRead,\r\n  onMarkAllAsRead,\r\n  onNavigate,\r\n}) => {\r\n  const handleNotificationClick = (notification: Notification) => {\r\n    if (!notification.isRead) {\r\n      onMarkAsRead(notification.id);\r\n    }\r\n    if (notification.link) {\r\n      onNavigate(notification.link);\r\n    }\r\n  };\r\n\r\n  const timeSince = (date: Date) => {\r\n    const seconds = Math.floor((new Date().getTime() - date.getTime()) / 1000);\r\n    let interval = seconds / 31536000;\r\n    if (interval > 1) return Math.floor(interval) + \"y ago\";\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) return Math.floor(interval) + \"mo ago\";\r\n    interval = seconds / 86400;\r\n    if (interval > 1) return Math.floor(interval) + \"d ago\";\r\n    interval = seconds / 3600;\r\n    if (interval > 1) return Math.floor(interval) + \"h ago\";\r\n    interval = seconds / 60;\r\n    if (interval > 1) return Math.floor(interval) + \"m ago\";\r\n    return Math.floor(seconds) + \"s ago\";\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"absolute right-0 mt-2 w-80 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-30\"\r\n      role=\"menu\"\r\n      aria-orientation=\"vertical\"\r\n      aria-labelledby=\"user-menu-button\"\r\n    >\r\n      <div className=\"flex items-center justify-between border-b border-gray-200 px-4 py-3\">\r\n        <h3 className=\"text-md font-semibold text-gray-900\">Notifications</h3>\r\n        <Button variant=\"secondary\" size=\"sm\" onClick={onMarkAllAsRead}>Mark all as read</Button>\r\n      </div>\r\n      <div className=\"py-1 max-h-96 overflow-y-auto\" role=\"none\">\r\n        {notifications.length > 0 ? (\r\n          notifications.map((notification) => (\r\n            <div\r\n              key={notification.id}\r\n              onClick={() => handleNotificationClick(notification)}\r\n              className={`flex items-start gap-3 px-4 py-3 text-sm text-gray-700 cursor-pointer transition-colors ${\r\n                notification.isRead ? 'hover:bg-gray-50' : 'bg-amber-50 hover:bg-amber-100'\r\n              }`}\r\n            >\r\n              {!notification.isRead && (\r\n                 <div className=\"mt-1 h-2 w-2 rounded-full bg-amber-500 flex-shrink-0\"></div>\r\n              )}\r\n              <div className={notification.isRead ? 'pl-4' : ''}>\r\n                  <p className=\"text-gray-800\">{notification.message}</p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">{timeSince(notification.createdAt)}</p>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"px-4 py-8 text-center text-sm text-gray-500\">\r\n            You have no notifications.\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationPanel;\r\n"],"names":[],"mappings":"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"}