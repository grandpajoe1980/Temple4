{"version":3,"sources":["../../../../app/components/ui/Button.tsx","../../../../app/components/ui/Card.tsx","../../../../app/tenants/%5BtenantId%5D/small-groups/page.tsx","../../../../app/components/tenant/SmallGroupsPage.tsx","../../../../app/components/tenant/SmallGroupCard.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","\r\nimport React from 'react';\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  title?: string;\r\n  description?: string;\r\n}\r\n\r\nconst Card: React.FC<CardProps> = ({ children, className, title, description }) => {\r\n  return (\r\n    <div className={`bg-white shadow-md rounded-lg overflow-hidden ${className}`}>\r\n        {title && (\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-semibold leading-6 text-gray-900\">{title}</h3>\r\n                {description && <p className=\"mt-1 text-sm text-gray-500\">{description}</p>}\r\n            </div>\r\n        )}\r\n      <div className=\"p-6\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getTenantById, getUserById } from '@/lib/data';\r\nimport SmallGroupsPage from '@/app/components/tenant/SmallGroupsPage';\r\n\r\nexport default async function TenantSmallGroupsPage({ params }: { params: Promise<{ tenantId: string }> }) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session || !session.user) {\r\n    redirect('/auth/login');\r\n  }\r\n\r\n  const resolvedParams = await params;\r\n  const tenant = await getTenantById(resolvedParams.tenantId);\r\n  const user = await getUserById((session.user as any).id);\r\n\r\n  if (!tenant || !user) {\r\n    redirect('/');\r\n  }\r\n\r\n  return <SmallGroupsPage tenant={tenant} user={user} />;\r\n}\r\n","import React, { useMemo } from 'react';\r\nimport type { Tenant, User } from '../../types';\r\nimport { getSmallGroupsForTenant } from '../../../lib/data';\r\nimport SmallGroupCard from './SmallGroupCard';\r\n\r\ninterface SmallGroupsPageProps {\r\n  tenant: Tenant;\r\n  user: User;\r\n  onRefresh: () => void;\r\n}\r\n\r\nconst SmallGroupsPage: React.FC<SmallGroupsPageProps> = ({ tenant, user, onRefresh }) => {\r\n  const groups = useMemo(() => getSmallGroupsForTenant(tenant.id).filter(g => g.isActive), [tenant.id, onRefresh]);\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Small Groups</h2>\r\n        <p className=\"mt-1 text-sm text-gray-500\">\r\n          Find a group to connect with at {tenant.name}.\r\n        </p>\r\n      </div>\r\n\r\n      {groups.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {groups.map((group) => (\r\n            <SmallGroupCard key={group.id} group={group} currentUser={user} onUpdate={onRefresh} />\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center bg-white p-12 rounded-lg shadow-sm\">\r\n          <h3 className=\"text-lg font-medium text-gray-900\">No Small Groups Available</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            There are no active small groups at this time. Please check back later or contact an administrator.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SmallGroupsPage;\r\n","import React from 'react';\r\nimport type { EnrichedSmallGroup, User } from '../../types';\r\nimport { joinSmallGroup, leaveSmallGroup } from '../../../lib/data';\r\nimport Card from '../ui/Card';\r\nimport Button from '../ui/Button';\r\n\r\ninterface SmallGroupCardProps {\r\n  group: EnrichedSmallGroup;\r\n  currentUser: User;\r\n  onUpdate: () => void;\r\n}\r\n\r\nconst SmallGroupCard: React.FC<SmallGroupCardProps> = ({ group, currentUser, onUpdate }) => {\r\n  const isUserMember = group.members.some(m => m.user.id === currentUser.id);\r\n\r\n  const handleJoin = () => {\r\n    if (joinSmallGroup(group.id, currentUser.id)) {\r\n      onUpdate();\r\n    }\r\n  };\r\n\r\n  const handleLeave = () => {\r\n    if (leaveSmallGroup(group.id, currentUser.id)) {\r\n      onUpdate();\r\n    }\r\n  };\r\n  \r\n  const ActionButton = () => {\r\n    if (isUserMember) {\r\n        return (\r\n            <Button variant=\"secondary\" onClick={handleLeave}>Leave Group</Button>\r\n        );\r\n    }\r\n    return <Button onClick={handleJoin}>Join Group</Button>\r\n  }\r\n\r\n  return (\r\n    <Card className=\"!p-0 flex flex-col h-full\">\r\n      <div className=\"p-6 flex-grow\">\r\n        <h3 className=\"text-xl font-semibold text-gray-900\">{group.name}</h3>\r\n        <p className=\"text-sm font-medium text-amber-600 mt-1\">{group.meetingSchedule}</p>\r\n        <p className=\"mt-4 text-sm text-gray-600 flex-grow\">\r\n          {group.description}\r\n        </p>\r\n        <div className=\"mt-6 border-t border-gray-200 pt-4\">\r\n             <div className=\"flex items-center space-x-3\">\r\n                <img src={group.leader.profile.avatarUrl} alt={group.leader.profile.displayName} className=\"w-10 h-10 rounded-full\" />\r\n                <div>\r\n                    <p className=\"text-xs text-gray-500\">Leader</p>\r\n                    <p className=\"text-sm font-medium text-gray-800\">{group.leader.profile.displayName}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"mt-4\">\r\n            <h4 className=\"text-xs font-bold uppercase text-gray-500\">Members ({group.members.length})</h4>\r\n             <div className=\"flex -space-x-2 overflow-hidden mt-2\">\r\n                {group.members.slice(0, 7).map(({ user }) => (\r\n                     <img key={user.id} className=\"inline-block h-8 w-8 rounded-full ring-2 ring-white\" src={user.profile.avatarUrl} alt={user.profile.displayName} title={user.profile.displayName} />\r\n                ))}\r\n                 {group.members.length > 7 && (\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-gray-200 ring-2 ring-white text-xs font-medium text-gray-600\">\r\n                        +{group.members.length - 7}\r\n                    </div>\r\n                 )}\r\n            </div>\r\n        </div>\r\n      </div>\r\n       <div className=\"bg-gray-50 px-6 py-4 text-right\">\r\n        <ActionButton />\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SmallGroupCard;\r\n"],"names":[],"mappings":"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"}