module.exports=[29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},66917,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({children:a,variant:c="primary",size:d="md",className:e,...f})=>(0,b.jsx)("button",{className:`rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[c]} ${{md:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[d]} ${e}`,...f,children:a})])},37942,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({children:a,className:c,title:d,description:e})=>(0,b.jsxs)("div",{className:`bg-white shadow-md rounded-lg overflow-hidden ${c}`,children:[d&&(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:d}),e&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),(0,b.jsx)("div",{className:"p-6",children:a})]})])},3752,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l=((b={}).MEMBER="MEMBER",b.STAFF="STAFF",b.CLERGY="CLERGY",b.MODERATOR="MODERATOR",b.ADMIN="ADMIN",b),m=((c={}).MEMBER="MEMBER",c.STAFF="STAFF",c.MODERATOR="MODERATOR",c),n=((d={}).REQUESTED="REQUESTED",d.APPROVED="APPROVED",d.REJECTED="REJECTED",d.BANNED="BANNED",d),o=((e={}).OPEN="OPEN",e.APPROVAL_REQUIRED="APPROVAL_REQUIRED",e),p=((f={}).PRAYER_REQUEST="PRAYER_REQUEST",f.TANGIBLE_NEED="TANGIBLE_NEED",f),q=((g={}).PENDING_APPROVAL="PENDING_APPROVAL",g.PUBLISHED="PUBLISHED",g.FULFILLED="FULFILLED",g),r=((h={}).PUBLIC="PUBLIC",h.MEMBERS_ONLY="MEMBERS_ONLY",h),s=((i={}).PDF="PDF",i.DOCX="DOCX",i.MP3="MP3",i.JPG="JPG",i.PNG="PNG",i.OTHER="OTHER",i),t=((j={}).UNREAD="UNREAD",j.READ="READ",j.ARCHIVED="ARCHIVED",j),u=((k={}).IMPERSONATE_START="IMPERSONATE_START",k.IMPERSONATE_END="IMPERSONATE_END",k.CREATE_POST="CREATE_POST",k.DELETE_POST="DELETE_POST",k.BAN_USER="BAN_USER",k.UNBAN_USER="UNBAN_USER",k.DELETE_MESSAGE="DELETE_MESSAGE",k.USER_JOINED_TENANT="USER_JOINED_TENANT",k.MEMBERSHIP_STATUS_UPDATED="MEMBERSHIP_STATUS_UPDATED",k.MEMBER_ROLES_UPDATED="MEMBER_ROLES_UPDATED",k.MEMBERSHIP_PROFILE_UPDATED="MEMBERSHIP_PROFILE_UPDATED",k.USER_REGISTERED="USER_REGISTERED",k.USER_PROFILE_UPDATED="USER_PROFILE_UPDATED",k.ADMIN_UPDATED_USER_PROFILE="ADMIN_UPDATED_USER_PROFILE",k.TENANT_PERMISSIONS_UPDATED="TENANT_PERMISSIONS_UPDATED",k);a.s(["ActionType",()=>u,"CommunityPostStatus",()=>q,"CommunityPostType",()=>p,"ContactSubmissionStatus",()=>t,"FileType",()=>s,"MembershipApprovalMode",()=>o,"MembershipStatus",()=>n,"ResourceVisibility",()=>r,"TenantRole",()=>l,"TenantRoleType",()=>m])},88367,a=>{"use strict";var b=a.i(87924),c=a.i(75003),d=a.i(50944),e=a.i(72131),f=a.i(3752),g=a.i(82665),h=a.i(66917),i=a.i(37942);let j=({onBack:a})=>{let[c,d]=(0,e.useState)([]),[j,k]=(0,e.useState)([]),[l,m]=(0,e.useState)(!0);(0,e.useEffect)(()=>{!async function(){try{let[a,b]=await Promise.all([(0,g.getAuditLogs)(),(0,g.getAllUsers)()]);d(a),k(b)}catch(a){console.error("Error fetching admin data:",a)}finally{m(!1)}}()},[]);let[n,o]=(0,e.useState)("all"),[p,q]=(0,e.useState)("all"),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(""),v=(0,e.useMemo)(()=>{let a=new Map;return j.forEach(b=>a.set(b.id,b)),a},[j]),w=(0,e.useMemo)(()=>c.map(a=>({...a,actorDisplayName:v.get(a.actorUserId)?.profile?.displayName||a.actorUserId,effectiveDisplayName:a.effectiveUserId?v.get(a.effectiveUserId)?.profile?.displayName||a.effectiveUserId:void 0})),[c,v]),x=(0,e.useMemo)(()=>w.filter(a=>{if("all"!==n&&a.actorUserId!==n||"all"!==p&&a.actionType!==p)return!1;if(r){let b=new Date(r);if(a.createdAt<b)return!1}if(t){let b=new Date(t);if(b.setHours(23,59,59,999),a.createdAt>b)return!1}return!0}),[w,n,p,r,t]);return l?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Console: Audit Log"})}),(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."})]}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Console: Audit Log"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"View and filter all audited actions across the platform."})]}),(0,b.jsx)(h.default,{variant:"secondary",onClick:a,children:"â† Back"})]}),(0,b.jsx)(i.default,{title:"Filter Logs",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"actor-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Actor"}),(0,b.jsxs)("select",{id:"actor-filter",value:n,onChange:a=>o(a.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",children:[(0,b.jsx)("option",{value:"all",children:"All Users"}),j.map(a=>(0,b.jsx)("option",{value:a.id,children:a.profile.displayName},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"action-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),(0,b.jsxs)("select",{id:"action-filter",value:p,onChange:a=>q(a.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",children:[(0,b.jsx)("option",{value:"all",children:"All Actions"}),Object.values(f.ActionType).map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,b.jsx)("input",{type:"date",id:"start-date",value:r,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,b.jsx)("input",{type:"date",id:"end-date",value:t,onChange:a=>u(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900"})]})]})}),(0,b.jsx)("div",{className:"flow-root",children:(0,b.jsx)("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,b.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Date"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Actor"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Effective User"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Action"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Entity"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Details"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:x.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:a.createdAt.toLocaleString()}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.actorDisplayName}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.effectiveDisplayName||"N/A"}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.actionType}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.entityType?`${a.entityType} (${a.entityId})`:"N/A"}),(0,b.jsx)("td",{className:"px-3 py-4 text-xs text-gray-500",children:a.metadata&&(0,b.jsx)("pre",{className:"bg-gray-100 p-2 rounded whitespace-pre-wrap max-w-sm",children:JSON.stringify(a.metadata,null,2)})})]},a.id))})]})})})})})]})};function k(){let{data:a,status:f}=(0,c.useSession)(),h=(0,d.useRouter)(),[i,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!0);return((0,e.useEffect)(()=>{!async function(){if("loading"!==f){if(!a?.user?.email)return h.push("/auth/login");try{let b=await (0,g.getUserByEmail)(a.user.email);if(!b||!b.isSuperAdmin)return void h.push("/");k(b)}catch(a){console.error("Error loading user:",a),h.push("/")}finally{m(!1)}}}()},[a,f,h]),l||!i)?(0,b.jsx)("div",{className:"p-8",children:"Loading..."}):(0,b.jsx)(j,{onBack:()=>h.push("/")})}a.s(["default",()=>k],88367)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__95018dc9._.js.map