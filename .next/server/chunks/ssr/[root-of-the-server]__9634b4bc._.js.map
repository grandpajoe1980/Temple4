{"version":3,"sources":["../../../../app/notifications/page.tsx","../../../../app/components/ui/Button.tsx","../../../../app/components/notifications/NotificationPanel.tsx"],"sourcesContent":["import { getServerSession } from 'next-auth/next';\nimport { authOptions } from '../api/auth/[...nextauth]/route';\nimport { redirect } from 'next/navigation';\nimport { getUserByEmail, getNotificationsForUser, markNotificationAsRead, markAllNotificationsAsRead } from '@/lib/data';\nimport NotificationPanel from '../components/notifications/NotificationPanel';\n\nexport default async function Page() {\n  const session = await getServerSession(authOptions);\n  \n  if (!session?.user?.email) {\n    redirect('/auth/login');\n  }\n  \n  const user = await getUserByEmail(session.user.email);\n  \n  if (!user) {\n    redirect('/auth/login');\n  }\n  \n  const notifications = await getNotificationsForUser(user.id);\n  \n  return (\n    <NotificationPanel \n      notifications={notifications}\n      onClose={() => {}}\n      onMarkAsRead={(id) => markNotificationAsRead(id)}\n      onMarkAllAsRead={() => markAllNotificationsAsRead(user.id)}\n      onNavigate={(link) => {}}\n    />\n  );\n}\n","import React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md';\n  children: React.ReactNode;\n}\n\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\n\n  const variantClasses = {\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n  };\n  \n  const sizeClasses = {\n      md: \"px-4 py-2 text-sm\",\n      sm: \"px-3 py-1.5 text-xs\",\n  }\n\n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React from 'react';\nimport type { Notification } from '@/types';\nimport Button from '../ui/Button';\n\ninterface NotificationPanelProps {\n  notifications: Notification[];\n  onClose: () => void;\n  onMarkAsRead: (notificationId: string) => void;\n  onMarkAllAsRead: () => void;\n  onNavigate: (link?: string) => void;\n}\n\nconst NotificationPanel: React.FC<NotificationPanelProps> = ({\n  notifications,\n  onClose,\n  onMarkAsRead,\n  onMarkAllAsRead,\n  onNavigate,\n}) => {\n  const handleNotificationClick = (notification: Notification) => {\n    if (!notification.isRead) {\n      onMarkAsRead(notification.id);\n    }\n    if (notification.link) {\n      onNavigate(notification.link);\n    }\n  };\n\n  const timeSince = (date: Date) => {\n    const seconds = Math.floor((new Date().getTime() - date.getTime()) / 1000);\n    let interval = seconds / 31536000;\n    if (interval > 1) return Math.floor(interval) + \"y ago\";\n    interval = seconds / 2592000;\n    if (interval > 1) return Math.floor(interval) + \"mo ago\";\n    interval = seconds / 86400;\n    if (interval > 1) return Math.floor(interval) + \"d ago\";\n    interval = seconds / 3600;\n    if (interval > 1) return Math.floor(interval) + \"h ago\";\n    interval = seconds / 60;\n    if (interval > 1) return Math.floor(interval) + \"m ago\";\n    return Math.floor(seconds) + \"s ago\";\n  }\n\n  return (\n    <div\n      className=\"absolute right-0 mt-2 w-80 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-30\"\n      role=\"menu\"\n      aria-orientation=\"vertical\"\n      aria-labelledby=\"user-menu-button\"\n    >\n      <div className=\"flex items-center justify-between border-b border-gray-200 px-4 py-3\">\n        <h3 className=\"text-md font-semibold text-gray-900\">Notifications</h3>\n        <Button variant=\"secondary\" size=\"sm\" onClick={onMarkAllAsRead}>Mark all as read</Button>\n      </div>\n      <div className=\"py-1 max-h-96 overflow-y-auto\" role=\"none\">\n        {notifications.length > 0 ? (\n          notifications.map((notification) => (\n            <div\n              key={notification.id}\n              onClick={() => handleNotificationClick(notification)}\n              className={`flex items-start gap-3 px-4 py-3 text-sm text-gray-700 cursor-pointer transition-colors ${\n                notification.isRead ? 'hover:bg-gray-50' : 'bg-amber-50 hover:bg-amber-100'\n              }`}\n            >\n              {!notification.isRead && (\n                 <div className=\"mt-1 h-2 w-2 rounded-full bg-amber-500 flex-shrink-0\"></div>\n              )}\n              <div className={notification.isRead ? 'pl-4' : ''}>\n                  <p className=\"text-gray-800\">{notification.message}</p>\n                  <p className=\"text-xs text-gray-400 mt-1\">{timeSince(notification.createdAt)}</p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"px-4 py-8 text-center text-sm text-gray-500\">\n            You have no notifications.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationPanel;\n"],"names":[],"mappings":"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"}