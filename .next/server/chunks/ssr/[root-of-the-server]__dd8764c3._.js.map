{"version":3,"sources":["../../../../app/tenants/%5BtenantId%5D/calendar/page.tsx","../../../../app/components/tenant/EventsCalendar.tsx"],"sourcesContent":["import { getServerSession } from 'next-auth/next';\r\nimport { authOptions } from '@/app/api/auth/[...nextauth]/route';\r\nimport { redirect } from 'next/navigation';\r\nimport { getTenantById, getUserById } from '@/lib/data';\r\nimport EventsCalendar from '@/app/components/tenant/EventsCalendar';\r\n\r\nexport default async function TenantCalendarPage({ params }: { params: Promise<{ tenantId: string }> }) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  if (!session || !session.user) {\r\n    redirect('/auth/login');\r\n  }\r\n\r\n  const resolvedParams = await params;\r\n  const tenant = await getTenantById(resolvedParams.tenantId);\r\n  const user = await getUserById((session.user as any).id);\r\n\r\n  if (!tenant || !user) {\r\n    redirect('/');\r\n  }\r\n\r\n  return <EventsCalendar tenant={tenant} user={user} />;\r\n}\r\n","import React, { useState } from 'react';\r\nimport type { EventWithCreator } from '../../types';\r\n\r\ninterface EventsCalendarProps {\r\n  events: EventWithCreator[];\r\n  onDateClick: (date: Date) => void;\r\n}\r\n\r\nconst EventsCalendar: React.FC<EventsCalendarProps> = ({ events, onDateClick }) => {\r\n  const [viewDate, setViewDate] = useState(new Date());\r\n\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  const startOfMonth = new Date(viewDate.getFullYear(), viewDate.getMonth(), 1);\r\n  const endOfMonth = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 0);\r\n  const startDay = startOfMonth.getDay();\r\n  const daysInMonth = endOfMonth.getDate();\r\n\r\n  const eventsByDate: { [key: string]: EventWithCreator[] } = {};\r\n  events.forEach(event => {\r\n    const dateKey = new Date(event.startDateTime).toDateString();\r\n    if (!eventsByDate[dateKey]) {\r\n      eventsByDate[dateKey] = [];\r\n    }\r\n    eventsByDate[dateKey].push(event);\r\n  });\r\n\r\n  const prevMonth = () => {\r\n    setViewDate(new Date(viewDate.getFullYear(), viewDate.getMonth() - 1, 1));\r\n  };\r\n\r\n  const nextMonth = () => {\r\n    setViewDate(new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 1));\r\n  };\r\n\r\n  const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n  return (\r\n    <div className=\"bg-white p-4 sm:p-6 rounded-lg shadow-sm\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <button type=\"button\" onClick={prevMonth} className=\"p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n        </button>\r\n        <div className=\"font-semibold text-gray-800 text-lg\">\r\n          {viewDate.toLocaleString('default', { month: 'long', year: 'numeric' })}\r\n        </div>\r\n        <button type=\"button\" onClick={nextMonth} className=\"p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-amber-500\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-7 text-center text-xs text-gray-500 font-semibold border-b border-gray-200 pb-2 mb-2\">\r\n        {weekdays.map(day => <div key={day}>{day}</div>)}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-7\">\r\n        {Array.from({ length: startDay }).map((_, i) => (\r\n          <div key={`empty-start-${i}`} className=\"border-r border-b border-gray-100 h-28\"></div>\r\n        ))}\r\n        {Array.from({ length: daysInMonth }).map((_, i) => {\r\n          const day = i + 1;\r\n          const date = new Date(viewDate.getFullYear(), viewDate.getMonth(), day);\r\n          const dateKey = date.toDateString();\r\n          const isToday = date.toDateString() === today.toDateString();\r\n          const dayEvents = eventsByDate[dateKey] || [];\r\n\r\n          return (\r\n            <div \r\n              key={day} \r\n              className=\"border-r border-b border-gray-100 h-28 p-1.5 cursor-pointer hover:bg-amber-50 transition-colors\"\r\n              onClick={() => onDateClick(date)}\r\n            >\r\n              <div className={`w-7 h-7 flex items-center justify-center rounded-full text-sm ${isToday ? 'bg-amber-600 text-white font-bold' : 'text-gray-700'}`}>\r\n                {day}\r\n              </div>\r\n              <div className=\"mt-1 space-y-1 overflow-y-auto max-h-16\">\r\n                {dayEvents.map(event => (\r\n                  <div key={event.id} className=\"text-xs bg-blue-100 text-blue-800 p-1 rounded truncate\">\r\n                    {event.title}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n         {Array.from({ length: 42 - daysInMonth - startDay }).map((_, i) => (\r\n          <div key={`empty-end-${i}`} className=\"border-r border-b border-gray-100 h-28\"></div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EventsCalendar;\r\n"],"names":[],"mappings":"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"}