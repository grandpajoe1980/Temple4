module.exports=[29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},66917,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({children:a,variant:c="primary",size:d="md",className:e,...f})=>(0,b.jsx)("button",{className:`rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[c]} ${{md:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[d]} ${e}`,...f,children:a})])},37942,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({children:a,className:c,title:d,description:e})=>(0,b.jsxs)("div",{className:`bg-white shadow-md rounded-lg overflow-hidden ${c}`,children:[d&&(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:d}),e&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),(0,b.jsx)("div",{className:"p-6",children:a})]})])},88367,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n=a.i(87924),o=a.i(75003),p=a.i(50944),q=a.i(72131);(b={}).MEMBER="MEMBER",b.STAFF="STAFF",b.CLERGY="CLERGY",b.MODERATOR="MODERATOR",b.ADMIN="ADMIN",(c={}).MEMBER="MEMBER",c.STAFF="STAFF",c.MODERATOR="MODERATOR",(d={}).REQUESTED="REQUESTED",d.APPROVED="APPROVED",d.REJECTED="REJECTED",d.BANNED="BANNED",(e={}).OPEN="OPEN",e.APPROVAL_REQUIRED="APPROVAL_REQUIRED",(f={}).CONFIRMED="CONFIRMED",f.CANCELED="CANCELED",(g={}).LEADER="LEADER",g.MEMBER="MEMBER",(h={}).PRAYER_REQUEST="PRAYER_REQUEST",h.TANGIBLE_NEED="TANGIBLE_NEED",(i={}).PENDING_APPROVAL="PENDING_APPROVAL",i.PUBLISHED="PUBLISHED",i.FULFILLED="FULFILLED",(j={}).PUBLIC="PUBLIC",j.MEMBERS_ONLY="MEMBERS_ONLY",(k={}).PDF="PDF",k.DOCX="DOCX",k.MP3="MP3",k.JPG="JPG",k.PNG="PNG",k.OTHER="OTHER",(l={}).UNREAD="UNREAD",l.READ="READ",l.ARCHIVED="ARCHIVED";var r=((m={}).IMPERSONATE_START="IMPERSONATE_START",m.IMPERSONATE_END="IMPERSONATE_END",m.CREATE_POST="CREATE_POST",m.DELETE_POST="DELETE_POST",m.BAN_USER="BAN_USER",m.UNBAN_USER="UNBAN_USER",m.DELETE_MESSAGE="DELETE_MESSAGE",m.USER_JOINED_TENANT="USER_JOINED_TENANT",m.MEMBERSHIP_STATUS_UPDATED="MEMBERSHIP_STATUS_UPDATED",m.MEMBER_ROLES_UPDATED="MEMBER_ROLES_UPDATED",m.MEMBERSHIP_PROFILE_UPDATED="MEMBERSHIP_PROFILE_UPDATED",m.USER_REGISTERED="USER_REGISTERED",m.USER_PROFILE_UPDATED="USER_PROFILE_UPDATED",m.ADMIN_UPDATED_USER_PROFILE="ADMIN_UPDATED_USER_PROFILE",m.TENANT_PERMISSIONS_UPDATED="TENANT_PERMISSIONS_UPDATED",m),s=a.i(82665),t=a.i(66917),u=a.i(37942);let v=({onBack:a})=>{let[b,c]=(0,q.useState)([]),[d,e]=(0,q.useState)([]),[f,g]=(0,q.useState)(!0);(0,q.useEffect)(()=>{!async function(){try{let[a,b]=await Promise.all([(0,s.getAuditLogs)(),(0,s.getAllUsers)()]);c(a),e(b)}catch(a){console.error("Error fetching admin data:",a)}finally{g(!1)}}()},[]);let[h,i]=(0,q.useState)("all"),[j,k]=(0,q.useState)("all"),[l,m]=(0,q.useState)(""),[o,p]=(0,q.useState)(""),v=(0,q.useMemo)(()=>{let a=new Map;return d.forEach(b=>a.set(b.id,b)),a},[d]),w=(0,q.useMemo)(()=>b.map(a=>({...a,actorDisplayName:v.get(a.actorUserId)?.profile?.displayName||a.actorUserId,effectiveDisplayName:a.effectiveUserId?v.get(a.effectiveUserId)?.profile?.displayName||a.effectiveUserId:void 0})),[b,v]),x=(0,q.useMemo)(()=>w.filter(a=>{if("all"!==h&&a.actorUserId!==h||"all"!==j&&a.actionType!==j)return!1;if(l){let b=new Date(l);if(a.createdAt<b)return!1}if(o){let b=new Date(o);if(b.setHours(23,59,59,999),a.createdAt>b)return!1}return!0}),[w,h,j,l,o]);return f?(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Console: Audit Log"})}),(0,n.jsx)("div",{className:"text-center py-8",children:"Loading..."})]}):(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Console: Audit Log"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"View and filter all audited actions across the platform."})]}),(0,n.jsx)(t.default,{variant:"secondary",onClick:a,children:"â† Back"})]}),(0,n.jsx)(u.default,{title:"Filter Logs",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"actor-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Actor"}),(0,n.jsxs)("select",{id:"actor-filter",value:h,onChange:a=>i(a.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",children:[(0,n.jsx)("option",{value:"all",children:"All Users"}),d.map(a=>(0,n.jsx)("option",{value:a.id,children:a.profile.displayName},a.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"action-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),(0,n.jsxs)("select",{id:"action-filter",value:j,onChange:a=>k(a.target.value),className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",children:[(0,n.jsx)("option",{value:"all",children:"All Actions"}),Object.values(r).map(a=>(0,n.jsx)("option",{value:a,children:a},a))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,n.jsx)("input",{type:"date",id:"start-date",value:l,onChange:a=>m(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,n.jsx)("input",{type:"date",id:"end-date",value:o,onChange:a=>p(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900"})]})]})}),(0,n.jsx)("div",{className:"flow-root",children:(0,n.jsx)("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,n.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Date"}),(0,n.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Actor"}),(0,n.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Effective User"}),(0,n.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Action"}),(0,n.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Entity"}),(0,n.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Details"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:x.map(a=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:a.createdAt.toLocaleString()}),(0,n.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.actorDisplayName}),(0,n.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.effectiveDisplayName||"N/A"}),(0,n.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.actionType}),(0,n.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.entityType?`${a.entityType} (${a.entityId})`:"N/A"}),(0,n.jsx)("td",{className:"px-3 py-4 text-xs text-gray-500",children:a.metadata&&(0,n.jsx)("pre",{className:"bg-gray-100 p-2 rounded whitespace-pre-wrap max-w-sm",children:JSON.stringify(a.metadata,null,2)})})]},a.id))})]})})})})})]})};function w(){let{data:a,status:b}=(0,o.useSession)(),c=(0,p.useRouter)(),[d,e]=(0,q.useState)(null),[f,g]=(0,q.useState)(!0);return((0,q.useEffect)(()=>{!async function(){if("loading"!==b){if(!a?.user?.email)return c.push("/auth/login");try{let b=await (0,s.getUserByEmail)(a.user.email);if(!b||!b.isSuperAdmin)return void c.push("/");e(b)}catch(a){console.error("Error loading user:",a),c.push("/")}finally{g(!1)}}}()},[a,b,c]),f||!d)?(0,n.jsx)("div",{className:"p-8",children:"Loading..."}):(0,n.jsx)(v,{onBack:()=>c.push("/")})}a.s(["default",()=>w],88367)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__eda9f114._.js.map