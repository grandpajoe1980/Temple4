{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/components/ui/Button.tsx","../../../../app/components/ui/Card.tsx","../../../../app/admin/page.tsx","../../../../app/components/admin/AdminConsole.tsx","../../../../types.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import React from 'react';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\r\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\r\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizeClasses = {\r\n      md: \"px-4 py-2 text-sm\",\r\n      sm: \"px-3 py-1.5 text-xs\",\r\n  }\r\n\r\n  return (\r\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","\r\nimport React from 'react';\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  title?: string;\r\n  description?: string;\r\n}\r\n\r\nconst Card: React.FC<CardProps> = ({ children, className, title, description }) => {\r\n  return (\r\n    <div className={`bg-white shadow-md rounded-lg overflow-hidden ${className}`}>\r\n        {title && (\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-semibold leading-6 text-gray-900\">{title}</h3>\r\n                {description && <p className=\"mt-1 text-sm text-gray-500\">{description}</p>}\r\n            </div>\r\n        )}\r\n      <div className=\"p-6\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","'use client';\r\n\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AdminConsole from '../components/admin/AdminConsole';\r\nimport { getUserByEmail } from '../../lib/data';\r\nimport { useEffect, useState } from 'react';\r\nimport type { User } from '../../types';\r\n\r\nexport default function Page() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  useEffect(() => {\r\n    async function loadUser() {\r\n      if (status === 'loading') return;\r\n      \r\n      if (!session?.user?.email) {\r\n        router.push('/auth/login');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const userData = await getUserByEmail(session.user.email);\r\n        if (!userData || !userData.isSuperAdmin) {\r\n          router.push('/');\r\n          return;\r\n        }\r\n        setUser(userData);\r\n      } catch (error) {\r\n        console.error('Error loading user:', error);\r\n        router.push('/');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    \r\n    loadUser();\r\n  }, [session, status, router]);\r\n  \r\n  if (loading || !user) {\r\n    return <div className=\"p-8\">Loading...</div>;\r\n  }\r\n  \r\n  return <AdminConsole onBack={() => router.push('/')} />;\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport type { User, AuditLog } from '../../../types';\r\nimport { ActionType } from '../../../types';\r\nimport { getAuditLogs, getAllUsers } from '../../../lib/data';\r\nimport Button from '../ui/Button';\r\nimport Card from '../ui/Card';\r\n\r\ninterface AdminConsoleProps {\r\n  onBack: () => void;\r\n}\r\n\r\ninterface EnrichedAuditLog extends AuditLog {\r\n    actorDisplayName: string;\r\n    effectiveDisplayName?: string;\r\n}\r\n\r\nconst AdminConsole: React.FC<AdminConsoleProps> = ({ onBack }) => {\r\n  const [logs, setLogs] = useState<AuditLog[]>([]);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const [logsData, usersData] = await Promise.all([\r\n          getAuditLogs(),\r\n          getAllUsers()\r\n        ]);\r\n        setLogs(logsData);\r\n        setUsers(usersData);\r\n      } catch (error) {\r\n        console.error('Error fetching admin data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n  \r\n  const [actorFilter, setActorFilter] = useState<string>('all');\r\n  const [actionFilter, setActionFilter] = useState<string>('all');\r\n  const [startDateFilter, setStartDateFilter] = useState<string>('');\r\n  const [endDateFilter, setEndDateFilter] = useState<string>('');\r\n  \r\n  const usersMap = useMemo(() => {\r\n    const map = new Map<string, User>();\r\n    users.forEach(user => map.set(user.id, user));\r\n    return map;\r\n  }, [users]);\r\n  \r\n  const enrichedLogs: EnrichedAuditLog[] = useMemo(() => {\r\n    return logs.map(log => ({\r\n        ...log,\r\n        actorDisplayName: usersMap.get(log.actorUserId)?.profile?.displayName || log.actorUserId,\r\n        effectiveDisplayName: log.effectiveUserId ? (usersMap.get(log.effectiveUserId)?.profile?.displayName || log.effectiveUserId) : undefined,\r\n    }));\r\n  }, [logs, usersMap]);\r\n  \r\n  const filteredLogs = useMemo(() => {\r\n    return enrichedLogs.filter(log => {\r\n      if (actorFilter !== 'all' && log.actorUserId !== actorFilter) return false;\r\n      if (actionFilter !== 'all' && log.actionType !== actionFilter) return false;\r\n      if (startDateFilter) {\r\n          const startDate = new Date(startDateFilter);\r\n          if (log.createdAt < startDate) return false;\r\n      }\r\n      if (endDateFilter) {\r\n          const endDate = new Date(endDateFilter);\r\n          endDate.setHours(23, 59, 59, 999); // Include the whole day\r\n          if (log.createdAt > endDate) return false;\r\n      }\r\n      return true;\r\n    });\r\n  }, [enrichedLogs, actorFilter, actionFilter, startDateFilter, endDateFilter]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-8\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Admin Console: Audit Log</h1>\r\n        </div>\r\n        <div className=\"text-center py-8\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Admin Console: Audit Log</h1>\r\n          <p className=\"text-sm text-gray-500\">View and filter all audited actions across the platform.</p>\r\n        </div>\r\n        <Button variant=\"secondary\" onClick={onBack}>&larr; Back</Button>\r\n      </div>\r\n\r\n      <Card title=\"Filter Logs\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            <div>\r\n                <label htmlFor=\"actor-filter\" className=\"block text-sm font-medium text-gray-700 mb-1\">Actor</label>\r\n                <select id=\"actor-filter\" value={actorFilter} onChange={e => setActorFilter(e.target.value)} className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\">\r\n                    <option value=\"all\">All Users</option>\r\n                    {users.map(user => <option key={user.id} value={user.id}>{user.profile.displayName}</option>)}\r\n                </select>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"action-filter\" className=\"block text-sm font-medium text-gray-700 mb-1\">Action Type</label>\r\n                <select id=\"action-filter\" value={actionFilter} onChange={e => setActionFilter(e.target.value)} className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\">\r\n                    <option value=\"all\">All Actions</option>\r\n                    {Object.values(ActionType).map(action => <option key={action} value={action}>{action}</option>)}\r\n                </select>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"start-date\" className=\"block text-sm font-medium text-gray-700 mb-1\">Start Date</label>\r\n                <input type=\"date\" id=\"start-date\" value={startDateFilter} onChange={e => setStartDateFilter(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"/>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"end-date\" className=\"block text-sm font-medium text-gray-700 mb-1\">End Date</label>\r\n                <input type=\"date\" id=\"end-date\" value={endDateFilter} onChange={e => setEndDateFilter(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"/>\r\n            </div>\r\n        </div>\r\n      </Card>\r\n      \r\n      <div className=\"flow-root\">\r\n        <div className=\"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n            <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n                <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg\">\r\n                    <table className=\"min-w-full divide-y divide-gray-300\">\r\n                        <thead className=\"bg-gray-50\">\r\n                            <tr>\r\n                                <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">Date</th>\r\n                                <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Actor</th>\r\n                                <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Effective User</th>\r\n                                <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Action</th>\r\n                                <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Entity</th>\r\n                                <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">Details</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-200 bg-white\">\r\n                            {filteredLogs.map(log => (\r\n                                <tr key={log.id}>\r\n                                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6\">{log.createdAt.toLocaleString()}</td>\r\n                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{log.actorDisplayName}</td>\r\n                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{log.effectiveDisplayName || 'N/A'}</td>\r\n                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{log.actionType}</td>\r\n                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">{log.entityType ? `${log.entityType} (${log.entityId})` : 'N/A'}</td>\r\n                                    <td className=\"px-3 py-4 text-xs text-gray-500\">\r\n                                        {log.metadata && <pre className=\"bg-gray-100 p-2 rounded whitespace-pre-wrap max-w-sm\">{JSON.stringify(log.metadata, null, 2)}</pre>}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminConsole;\r\n","// --- ENUMS ---\r\n\r\nexport enum TenantRole {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  CLERGY = 'CLERGY',\r\n  MODERATOR = 'MODERATOR',\r\n  ADMIN = 'ADMIN',\r\n}\r\n\r\n// Role types for permission mapping\r\nexport enum TenantRoleType {\r\n  MEMBER = 'MEMBER',\r\n  STAFF = 'STAFF',\r\n  MODERATOR = 'MODERATOR',\r\n}\r\n\r\nexport enum MembershipStatus {\r\n  REQUESTED = 'REQUESTED',\r\n  APPROVED = 'APPROVED',\r\n  REJECTED = 'REJECTED',\r\n  BANNED = 'BANNED',\r\n}\r\n\r\nexport enum MembershipApprovalMode {\r\n  OPEN = 'OPEN',\r\n  APPROVAL_REQUIRED = 'APPROVAL_REQUIRED',\r\n}\r\n\r\nexport enum VolunteerStatus {\r\n  CONFIRMED = 'CONFIRMED',\r\n  CANCELED = 'CANCELED',\r\n}\r\n\r\nexport enum SmallGroupRole {\r\n  LEADER = 'LEADER',\r\n  MEMBER = 'MEMBER',\r\n}\r\n\r\nexport enum CommunityPostType {\r\n    PRAYER_REQUEST = 'PRAYER_REQUEST',\r\n    TANGIBLE_NEED = 'TANGIBLE_NEED',\r\n}\r\n\r\nexport enum CommunityPostStatus {\r\n    PENDING_APPROVAL = 'PENDING_APPROVAL',\r\n    PUBLISHED = 'PUBLISHED',\r\n    FULFILLED = 'FULFILLED',\r\n}\r\n\r\nexport enum ResourceVisibility {\r\n    PUBLIC = 'PUBLIC',\r\n    MEMBERS_ONLY = 'MEMBERS_ONLY',\r\n}\r\n\r\nexport enum FileType {\r\n    PDF = 'PDF',\r\n    DOCX = 'DOCX',\r\n    MP3 = 'MP3',\r\n    JPG = 'JPG',\r\n    PNG = 'PNG',\r\n    OTHER = 'OTHER',\r\n}\r\n\r\nexport enum ContactSubmissionStatus {\r\n    UNREAD = 'UNREAD',\r\n    READ = 'READ',\r\n    ARCHIVED = 'ARCHIVED',\r\n}\r\n\r\n\r\n// --- USER-RELATED MODELS ---\r\nexport interface NotificationPreferences {\r\n  email: {\r\n    newAnnouncement: boolean;\r\n    newEvent: boolean;\r\n    directMessage: boolean;\r\n    groupChatMessage: boolean;\r\n    membershipUpdate: boolean;\r\n  };\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  password?: string; // NOTE: For mock login simulation.\r\n  isSuperAdmin: boolean;\r\n  profile: UserProfile;\r\n  privacySettings: UserPrivacySettings;\r\n  accountSettings: AccountSettings;\r\n  notificationPreferences: NotificationPreferences;\r\n}\r\n\r\nexport interface UserProfile {\r\n  displayName: string;\r\n  avatarUrl?: string;\r\n  bio?: string;\r\n  locationCity?: string;\r\n  locationCountry?: string;\r\n  languages?: string[];\r\n}\r\n\r\nexport interface UserPrivacySettings {\r\n  showAffiliations: boolean;\r\n}\r\n\r\nexport interface AccountSettings {\r\n  timezonePreference?: string;\r\n  dateFormat?: string;\r\n  timeFormat?: string;\r\n  languagePreference?: string;\r\n}\r\n\r\n\r\n// --- TENANT-RELATED MODELS ---\r\n\r\nexport interface Tenant {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  creed: string;\r\n  address: {\r\n    street: string;\r\n    city: string;\r\n    state: string;\r\n    country: string;\r\n    postalCode: string;\r\n  };\r\n  contactEmail?: string;\r\n  phoneNumber?: string;\r\n  description: string;\r\n  settings: TenantSettings;\r\n  branding: TenantBranding;\r\n  permissions: TenantFeaturePermissions;\r\n}\r\n\r\nexport interface TenantBranding {\r\n  logoUrl: string;\r\n  bannerImageUrl: string;\r\n  primaryColor: string;\r\n  accentColor: string;\r\n  customLinks: Array<{ label: string; url: string }>;\r\n}\r\n\r\nexport interface LiveStreamSettings {\r\n  provider: 'YOUTUBE' | 'FACEBOOK' | 'VIMEO' | 'OTHER';\r\n  embedUrl: string;\r\n  isLive: boolean; // Manual toggle by admin\r\n}\r\n\r\nexport interface TenantSettings {\r\n  isPublic: boolean;\r\n  membershipApprovalMode: MembershipApprovalMode;\r\n  // Features\r\n  enableCalendar: boolean;\r\n  enablePosts: boolean;\r\n  enableSermons: boolean;\r\n  enablePodcasts: boolean;\r\n  enableBooks: boolean;\r\n  enableMemberDirectory: boolean;\r\n  enableGroupChat: boolean;\r\n  enableComments: boolean;\r\n  enableReactions: boolean;\r\n  enableDonations: boolean;\r\n  enableVolunteering: boolean;\r\n  enableSmallGroups: boolean;\r\n  enableLiveStream: boolean;\r\n  enablePrayerWall: boolean;\r\n  enableResourceCenter: boolean;\r\n  donationSettings: DonationSettings;\r\n  liveStreamSettings: LiveStreamSettings;\r\n  // Visibility (simplified for mock)\r\n  visitorVisibility: {\r\n    calendar: boolean;\r\n    posts: boolean;\r\n    sermons: boolean;\r\n    podcasts: boolean;\r\n    books: boolean;\r\n    prayerWall: boolean;\r\n  };\r\n}\r\n\r\n\r\nexport interface RolePermissions {\r\n  canCreatePosts: boolean;\r\n  canCreateEvents: boolean;\r\n  canCreateSermons: boolean;\r\n  canCreatePodcasts: boolean;\r\n  canCreateBooks: boolean;\r\n  canCreateGroupChats: boolean;\r\n  canInviteMembers: boolean;\r\n  canApproveMembership: boolean;\r\n  canBanMembers: boolean;\r\n  canModeratePosts: boolean;\r\n  canModerateChats: boolean;\r\n  canPostInAnnouncementChannels?: boolean;\r\n  canManagePrayerWall: boolean;\r\n  canUploadResources: boolean;\r\n  canManageResources: boolean;\r\n  canManageContactSubmissions: boolean;\r\n}\r\n\r\n// Sticking with a map for easier frontend access\r\nexport type TenantFeaturePermissions = {\r\n  [key in TenantRoleType]?: RolePermissions;\r\n} & { ADMIN: RolePermissions };\r\n\r\n\r\nexport interface UserTenantMembership {\r\n  id: string;\r\n  userId: string;\r\n  tenantId: string;\r\n  status: MembershipStatus;\r\n  roles: UserTenantRole[];\r\n  displayName?: string; // Tenant-specific display name override\r\n}\r\n\r\nexport interface UserTenantRole {\r\n    id: string;\r\n    role: TenantRole;\r\n    displayTitle?: string;\r\n    isPrimary: boolean;\r\n}\r\n\r\n// Enriched type for displaying members in the UI\r\nexport interface EnrichedMember extends User {\r\n  membership: UserTenantMembership;\r\n}\r\n\r\n\r\n// --- CONTENT & MESSAGING (Largely Unchanged) ---\r\n\r\nexport interface Post {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  title: string;\r\n  body: string;\r\n  isPublished: boolean;\r\n  publishedAt: Date;\r\n}\r\nexport interface PostInput {\r\n  title: string;\r\n  body: string;\r\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\r\n  isPublished: boolean;\r\n}\r\nexport interface PostWithAuthor extends Post {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface Event {\r\n  id:string;\r\n  tenantId: string;\r\n  createdByUserId: string;\r\n  title: string;\r\n  description: string;\r\n  startDateTime: Date;\r\n  endDateTime: Date;\r\n  locationText: string;\r\n  isOnline: boolean;\r\n  onlineUrl?: string;\r\n}\r\nexport interface EventWithCreator extends Event {\r\n    creatorDisplayName: string;\r\n    creatorAvatarUrl?: string;\r\n}\r\n\r\nexport interface MediaItem {\r\n  id: string;\r\n  tenantId: string;\r\n  authorUserId: string;\r\n  type: 'SERMON_VIDEO' | 'PODCAST_AUDIO';\r\n  title: string;\r\n  description: string;\r\n  embedUrl: string;\r\n  publishedAt: Date;\r\n}\r\nexport interface EnrichedMediaItem extends MediaItem {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  text: string;\r\n  createdAt: Date;\r\n  isDeleted?: boolean;\r\n}\r\n\r\nexport interface EnrichedChatMessage extends ChatMessage {\r\n  userDisplayName: string;\r\n  userAvatarUrl?: string;\r\n}\r\n\r\nexport interface Conversation {\r\n  id: string;\r\n  isDirect: boolean;\r\n  tenantId: string | null;\r\n  isPrivateGroup: boolean;\r\n  name?: string; // For group channels\r\n  description?: string; // Description for channels\r\n  createdByUserId: string;\r\n  isDefaultChannel: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface ConversationParticipant {\r\n  id: string;\r\n  conversationId: string;\r\n  userId: string;\r\n  lastReadMessageId?: string | null;\r\n}\r\n\r\nexport interface EnrichedConversation extends Conversation {\r\n    participants: User[];\r\n    unreadCount: number;\r\n    lastMessage?: EnrichedChatMessage;\r\n    displayName: string;\r\n}\r\n\r\n\r\n// --- ADMIN & AUDIT TYPES ---\r\n\r\nexport enum ActionType {\r\n  IMPERSONATE_START = 'IMPERSONATE_START',\r\n  IMPERSONATE_END = 'IMPERSONATE_END',\r\n  CREATE_POST = 'CREATE_POST',\r\n  DELETE_POST = 'DELETE_POST',\r\n  BAN_USER = 'BAN_USER',\r\n  UNBAN_USER = 'UNBAN_USER',\r\n  DELETE_MESSAGE = 'DELETE_MESSAGE',\r\n  USER_JOINED_TENANT = 'USER_JOINED_TENANT',\r\n  MEMBERSHIP_STATUS_UPDATED = 'MEMBERSHIP_STATUS_UPDATED',\r\n  MEMBER_ROLES_UPDATED = 'MEMBER_ROLES_UPDATED',\r\n  MEMBERSHIP_PROFILE_UPDATED = 'MEMBERSHIP_PROFILE_UPDATED',\r\n  USER_REGISTERED = 'USER_REGISTERED',\r\n  USER_PROFILE_UPDATED = 'USER_PROFILE_UPDATED',\r\n  ADMIN_UPDATED_USER_PROFILE = 'ADMIN_UPDATED_USER_PROFILE',\r\n  TENANT_PERMISSIONS_UPDATED = 'TENANT_PERMISSIONS_UPDATED',\r\n}\r\n\r\nexport interface AuditLog {\r\n  id: string;\r\n  actorUserId: string;\r\n  effectiveUserId?: string;\r\n  actionType: ActionType;\r\n  entityType?: string;\r\n  entityId?: string;\r\n  metadata?: Record<string, any>;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- NOTIFICATION MODELS ---\r\nexport type NotificationType =\r\n  | 'NEW_DIRECT_MESSAGE'\r\n  | 'NEW_ANNOUNCEMENT'\r\n  | 'MEMBERSHIP_APPROVED'\r\n  | 'NEW_CONTACT_SUBMISSION';\r\n\r\nexport interface Notification {\r\n  id: string;\r\n  userId: string; // The recipient\r\n  actorUserId?: string; // The user who caused the notification\r\n  type: NotificationType;\r\n  message: string;\r\n  link?: string; // e.g., messages, tenant/tenant-1\r\n  isRead: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\n// --- DONATION MODELS ---\r\nexport interface DonationSettings {\r\n  mode: 'EXTERNAL' | 'INTEGRATED';\r\n  externalUrl?: string;\r\n  integratedProvider?: 'STRIPE' | 'PAYPAL';\r\n  currency: string;\r\n  suggestedAmounts: number[];\r\n  allowCustomAmounts: boolean;\r\n  leaderboardEnabled: boolean;\r\n  leaderboardVisibility: 'PUBLIC' | 'MEMBERS_ONLY';\r\n  leaderboardTimeframe: 'ALL_TIME' | 'YEARLY' | 'MONTHLY';\r\n}\r\n\r\nexport interface DonationRecord {\r\n  id: string;\r\n  tenantId: string;\r\n  userId: string | null; // null for anonymous from public page\r\n  displayName: string; // denormalized for anonymous/guest donations\r\n  amount: number;\r\n  currency: string;\r\n  donatedAt: Date;\r\n  isAnonymousOnLeaderboard: boolean;\r\n  message?: string;\r\n}\r\n\r\nexport interface EnrichedDonationRecord extends DonationRecord {\r\n    userAvatarUrl?: string;\r\n}\r\n\r\n// --- VOLUNTEER MODELS ---\r\nexport interface VolunteerNeed {\r\n  id: string;\r\n  tenantId: string;\r\n  eventId?: string; // Optional link to an Event\r\n  title: string;\r\n  description: string;\r\n  date: Date;\r\n  slotsNeeded: number;\r\n}\r\n\r\nexport interface VolunteerSignup {\r\n  id: string;\r\n  needId: string;\r\n  userId: string;\r\n  signedUpAt: Date;\r\n  status: VolunteerStatus;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedSignup {\r\n  signup: VolunteerSignup;\r\n  user: User;\r\n}\r\n\r\nexport interface EnrichedVolunteerNeed extends VolunteerNeed {\r\n  signups: EnrichedSignup[];\r\n}\r\n\r\n// --- SMALL GROUP MODELS ---\r\nexport interface SmallGroup {\r\n  id: string;\r\n  tenantId: string;\r\n  name: string;\r\n  description: string;\r\n  leaderUserId: string;\r\n  meetingSchedule: string; // e.g., \"Tuesdays at 7 PM\"\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface SmallGroupMembership {\r\n  id: string;\r\n  groupId: string;\r\n  userId: string;\r\n  role: SmallGroupRole;\r\n  joinedAt: Date;\r\n}\r\n\r\n// Enriched types for UI\r\nexport interface EnrichedGroupMember {\r\n    membership: SmallGroupMembership;\r\n    user: User;\r\n}\r\n\r\nexport interface EnrichedSmallGroup extends SmallGroup {\r\n    leader: User;\r\n    members: EnrichedGroupMember[];\r\n}\r\n\r\n// --- COMMUNITY BOARD / PRAYER WALL MODELS ---\r\nexport interface CommunityPost {\r\n    id: string;\r\n    tenantId: string;\r\n    authorUserId: string | null; // Null for anonymous\r\n    type: CommunityPostType;\r\n    body: string;\r\n    isAnonymous: boolean;\r\n    status: CommunityPostStatus;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedCommunityPost extends CommunityPost {\r\n    authorDisplayName: string;\r\n    authorAvatarUrl?: string;\r\n}\r\n\r\n// --- RESOURCE CENTER MODELS ---\r\nexport interface ResourceItem {\r\n    id: string;\r\n    tenantId: string;\r\n    uploaderUserId: string;\r\n    title: string;\r\n    description: string;\r\n    fileUrl: string; // For mock, this is just a string. In real app, it would be a URL to a file.\r\n    fileType: FileType;\r\n    visibility: ResourceVisibility;\r\n    createdAt: Date;\r\n}\r\n\r\nexport interface EnrichedResourceItem extends ResourceItem {\r\n    uploaderDisplayName: string;\r\n    uploaderAvatarUrl?: string;\r\n}\r\n\r\n// --- CONTACT & SUBMISSIONS ---\r\nexport interface ContactSubmission {\r\n    id: string;\r\n    tenantId: string;\r\n    name: string;\r\n    email: string;\r\n    message: string;\r\n    status: ContactSubmissionStatus;\r\n    createdAt: Date;\r\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}