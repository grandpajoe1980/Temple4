{"version":3,"sources":["../../../../app/components/ui/Button.tsx","../../../../app/components/ui/Card.tsx","../../../../app/components/ui/Input.tsx","../../../../app/components/ui/Modal.tsx","../../../../lib/permissions.ts","../../../../types.ts","../../../../app/components/tenant/forms/ResourceForm.tsx","../../../../app/components/tenant/ResourceCenterPage.tsx","../../../../app/components/tenant/ResourceItemCard.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md';\n  children: React.ReactNode;\n}\n\nconst Button: React.FC<ButtonProps> = ({ children, variant = 'primary', size = 'md', className, ...props }) => {\n  const baseClasses = \"rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\";\n\n  const variantClasses = {\n    primary: 'bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500',\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n  };\n  \n  const sizeClasses = {\n      md: \"px-4 py-2 text-sm\",\n      sm: \"px-3 py-1.5 text-xs\",\n  }\n\n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`} {...props}>\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","\nimport React from 'react';\n\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n  description?: string;\n}\n\nconst Card: React.FC<CardProps> = ({ children, className, title, description }) => {\n  return (\n    <div className={`bg-white shadow-md rounded-lg overflow-hidden ${className}`}>\n        {title && (\n            <div className=\"p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold leading-6 text-gray-900\">{title}</h3>\n                {description && <p className=\"mt-1 text-sm text-gray-500\">{description}</p>}\n            </div>\n        )}\n      <div className=\"p-6\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label: string;\n  containerClassName?: string;\n}\n\nconst Input: React.FC<InputProps> = ({ label, id, containerClassName, ...props }) => {\n  return (\n    <div className={containerClassName}>\n      <label htmlFor={id} className=\"block text-sm font-medium text-gray-700 mb-1\">\n        {label}\n      </label>\n      <input\n        id={id}\n        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400\"\n        {...props}\n      />\n    </div>\n  );\n};\n\nexport default Input;","'use client';\n\nimport React, { useEffect } from 'react';\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n}\n\nconst Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children }) => {\n  useEffect(() => {\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-start overflow-y-auto p-4 sm:p-10\"\n      aria-labelledby=\"modal-title\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white rounded-lg shadow-xl max-w-lg w-full overflow-hidden\"\n        onClick={(e) => e.stopPropagation()} // Prevent clicks inside the modal from closing it\n      >\n        <div className=\"flex justify-between items-center p-4 border-b border-gray-200\">\n          <h2 id=\"modal-title\" className=\"text-lg font-semibold text-gray-900\">\n            {title}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600\"\n            aria-label=\"Close modal\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"p-6\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Modal;","import { TenantRole, User, Tenant, ChatMessage, Conversation, UserTenantMembership } from '@prisma/client';\nimport { prisma } from './db';\n\n// Define RolePermissions based on your application's logic, as it's not in Prisma schema\nexport interface RolePermissions {\n  canCreatePosts: boolean;\n  canCreateEvents: boolean;\n  canCreateSermons: boolean;\n  canCreatePodcasts: boolean;\n  canCreateBooks: boolean;\n  canCreateGroupChats: boolean;\n  canInviteMembers: boolean;\n  canApproveMembership: boolean;\n  canBanMembers: boolean;\n  canModeratePosts: boolean;\n  canModerateChats: boolean;\n  canPostInAnnouncementChannels?: boolean;\n  canManagePrayerWall: boolean;\n  canUploadResources: boolean;\n  canManageResources: boolean;\n  canManageContactSubmissions: boolean;\n}\n\n// This can be a simple enum if you don't need the string values\nexport enum TenantRoleType {\n    MEMBER = 'MEMBER',\n    STAFF = 'STAFF',\n    MODERATOR = 'MODERATOR',\n}\n\nasync function getMembershipForUserInTenant(userId: string, tenantId: string): Promise<(UserTenantMembership & { roles: { role: TenantRole }[] }) | null> {\n    return prisma.userTenantMembership.findUnique({\n        where: {\n            userId_tenantId: {\n                userId,\n                tenantId,\n            },\n        },\n        include: {\n            roles: {\n                select: {\n                    role: true\n                }\n            },\n        }\n    });\n}\n\n\n\n/**\n * Maps a specific TenantRole to a more general TenantRoleType for permission lookups.\n */\nfunction getRoleType(role: TenantRole): TenantRoleType | 'ADMIN' {\n    switch (role) {\n        case TenantRole.ADMIN:\n            return 'ADMIN';\n        case TenantRole.STAFF:\n        case TenantRole.CLERGY:\n            return TenantRoleType.STAFF;\n        case TenantRole.MODERATOR:\n            return TenantRoleType.MODERATOR;\n        case TenantRole.MEMBER:\n            return TenantRoleType.MEMBER;\n        default:\n            return TenantRoleType.MEMBER;\n    }\n}\n\n\n/**\n * Checks if a user has a specific permission within a tenant.\n * This is the centralized source of truth for all permission checks.\n *\n * @param user The user to check.\n * @param tenant The tenant context for the permission.\n * @param permission The permission to check for (e.g., 'canCreatePosts').\n * @returns {boolean} True if the user has the permission, false otherwise.\n */\nexport async function can(user: User, tenant: Tenant, permission: keyof RolePermissions): Promise<boolean> {\n  // Super Admins can do anything.\n  if (user.isSuperAdmin) {\n    return true;\n  }\n\n  // Find the user's membership for this specific tenant.\n  const membership = await getMembershipForUserInTenant(user.id, tenant.id);\n\n  // If the user is not a member or not approved, they have no permissions.\n  if (!membership || membership.status !== 'APPROVED') {\n    return false;\n  }\n  \n  // Check if any of the user's roles grant the required permission.\n  for (const roleInfo of membership.roles) {\n    const roleType = getRoleType(roleInfo.role);\n    const permissions = tenant.permissions as any;\n\n    // If permissions is null or undefined, no permissions are granted\n    if (!permissions) {\n      continue;\n    }\n\n    if (roleType === 'ADMIN') {\n        // Admins have all permissions defined under the ADMIN key.\n        if (permissions.ADMIN && permissions.ADMIN[permission]) {\n            return true;\n        }\n    } else {\n        // For other roles, check against their TenantRoleType.\n        const rolePerms = permissions[roleType];\n        if (rolePerms && rolePerms[permission]) {\n            return true; // Permission granted by at least one role.\n        }\n    }\n  }\n\n  return false; // No role granted the permission.\n}\n\n/**\n * Checks if a user has a specific role within a tenant.\n *\n * @param user The user to check.\n * @param tenantId The ID of the tenant context for the role.\n * @param role The role to check for.\n * @returns {boolean} True if the user has the role, false otherwise.\n */\nexport async function hasRole(userId: string, tenantId: string, requiredRoles: TenantRole[]): Promise<boolean> {\n  const membership = await getMembershipForUserInTenant(userId, tenantId);\n\n  if (!membership || membership.status !== 'APPROVED') {\n    return false;\n  }\n\n  return membership.roles.some(roleInfo => requiredRoles.includes(roleInfo.role));\n}\n\n/**\n * Checks if a user can view a certain type of content (e.g., posts, events).\n * It checks tenant settings for public visibility and feature enablement.\n *\n * @param userId The ID of the user attempting to view. Can be null for anonymous users.\n * @param tenantId The ID of the tenant where the content resides.\n * @param contentType The key for the content type in tenant settings (e.g., 'posts', 'calendar').\n * @returns {Promise<boolean>} True if the user can view the content.\n */\nexport async function canUserViewContent(userId: string | null, tenantId: string, contentType: 'posts' | 'calendar' | 'sermons' | 'podcasts' | 'books' | 'prayerWall'): Promise<boolean> {\n    try {\n        const tenant = await prisma.tenant.findUnique({\n            where: { id: tenantId },\n            include: { settings: true }\n        });\n\n        if (!tenant || !tenant.settings) {\n            return false;\n        }\n\n        const settings = tenant.settings as any;\n\n        // Check if the entire feature is disabled\n        const featureFlag = `enable${contentType.charAt(0).toUpperCase() + contentType.slice(1)}`;\n        if (!settings[featureFlag]) {\n            return false;\n        }\n\n        const membership = userId ? await getMembershipForUserInTenant(userId, tenantId) : null;\n\n        // If user is not a member, check public visibility settings\n        if (!membership || membership.status !== 'APPROVED') {\n            // Check if visitorVisibility exists and has the content type property\n            if (!settings.visitorVisibility || typeof settings.visitorVisibility !== 'object') {\n                return false;\n            }\n            const result = settings.visitorVisibility[contentType] === true;\n            return result;\n        }\n\n        // If they are an approved member, they can view it as long as the feature is enabled.\n        return true;\n    } catch (error) {\n        console.error('[canUserViewContent] Error:', error);\n        throw error;\n    }\n}\n\n/**\n * Checks if a user has permission to create a post in a tenant.\n *\n * @param userId The ID of the user.\n * @param tenantId The ID of the tenant.\n * @param isAnnouncement Whether the post is an announcement.\n * @returns {Promise<boolean>} True if the user can create the post.\n */\nexport async function canUserPost(userId: string, tenantId: string, isAnnouncement: boolean): Promise<boolean> {\n    const user = await prisma.user.findUnique({ where: { id: userId } });\n    const tenant = await prisma.tenant.findUnique({ where: { id: tenantId } });\n\n    if (!user || !tenant) return false;\n\n    if (isAnnouncement) {\n        return can(user, tenant, 'canPostInAnnouncementChannels');\n    }\n    return can(user, tenant, 'canCreatePosts');\n}\n\n\n/**\n * Checks if a user can delete a specific message.\n */\nexport async function canDeleteMessage(\n  user: User,\n  message: ChatMessage,\n  conversation: Conversation,\n  tenant: Tenant\n): Promise<boolean> {\n  if (user.isSuperAdmin) {\n    return true;\n  }\n  // User can delete their own message\n  if (message.userId === user.id) {\n    return true;\n  }\n  // Check for moderation permissions\n  if (!conversation.isDirectMessage) { // isGroupChat\n    if (await can(user, tenant, 'canModerateChats')) {\n      return true;\n    }\n  }\n  return false;\n}","// --- ENUMS ---\n\nexport enum TenantRole {\n  MEMBER = 'MEMBER',\n  STAFF = 'STAFF',\n  CLERGY = 'CLERGY',\n  MODERATOR = 'MODERATOR',\n  ADMIN = 'ADMIN',\n}\n\n// Role types for permission mapping\nexport enum TenantRoleType {\n  MEMBER = 'MEMBER',\n  STAFF = 'STAFF',\n  MODERATOR = 'MODERATOR',\n}\n\nexport enum MembershipStatus {\n  REQUESTED = 'REQUESTED',\n  APPROVED = 'APPROVED',\n  REJECTED = 'REJECTED',\n  BANNED = 'BANNED',\n}\n\nexport enum MembershipApprovalMode {\n  OPEN = 'OPEN',\n  APPROVAL_REQUIRED = 'APPROVAL_REQUIRED',\n}\n\nexport enum VolunteerStatus {\n  CONFIRMED = 'CONFIRMED',\n  CANCELED = 'CANCELED',\n}\n\nexport enum SmallGroupRole {\n  LEADER = 'LEADER',\n  MEMBER = 'MEMBER',\n}\n\nexport enum CommunityPostType {\n    PRAYER_REQUEST = 'PRAYER_REQUEST',\n    TANGIBLE_NEED = 'TANGIBLE_NEED',\n}\n\nexport enum CommunityPostStatus {\n    PENDING_APPROVAL = 'PENDING_APPROVAL',\n    PUBLISHED = 'PUBLISHED',\n    FULFILLED = 'FULFILLED',\n}\n\nexport enum ResourceVisibility {\n    PUBLIC = 'PUBLIC',\n    MEMBERS_ONLY = 'MEMBERS_ONLY',\n}\n\nexport enum FileType {\n    PDF = 'PDF',\n    DOCX = 'DOCX',\n    MP3 = 'MP3',\n    JPG = 'JPG',\n    PNG = 'PNG',\n    OTHER = 'OTHER',\n}\n\nexport enum ContactSubmissionStatus {\n    UNREAD = 'UNREAD',\n    READ = 'READ',\n    ARCHIVED = 'ARCHIVED',\n}\n\n\n// --- USER-RELATED MODELS ---\nexport interface NotificationPreferences {\n  email: {\n    newAnnouncement: boolean;\n    newEvent: boolean;\n    directMessage: boolean;\n    groupChatMessage: boolean;\n    membershipUpdate: boolean;\n  };\n}\n\nexport interface User {\n  id: string;\n  email: string;\n  password?: string; // NOTE: For mock login simulation.\n  isSuperAdmin: boolean;\n  profile: UserProfile;\n  privacySettings: UserPrivacySettings;\n  accountSettings: AccountSettings;\n  notificationPreferences: NotificationPreferences;\n}\n\nexport interface UserProfile {\n  displayName: string;\n  avatarUrl?: string;\n  bio?: string;\n  locationCity?: string;\n  locationCountry?: string;\n  languages?: string[];\n}\n\nexport interface UserPrivacySettings {\n  showAffiliations: boolean;\n}\n\nexport interface AccountSettings {\n  timezonePreference?: string;\n  dateFormat?: string;\n  timeFormat?: string;\n  languagePreference?: string;\n}\n\n\n// --- TENANT-RELATED MODELS ---\n\nexport interface Tenant {\n  id: string;\n  name: string;\n  slug: string;\n  creed: string;\n  address: {\n    street: string;\n    city: string;\n    state: string;\n    country: string;\n    postalCode: string;\n  };\n  contactEmail?: string;\n  phoneNumber?: string;\n  description: string;\n  settings: TenantSettings;\n  branding: TenantBranding;\n  permissions: TenantFeaturePermissions;\n}\n\nexport interface TenantBranding {\n  logoUrl: string;\n  bannerImageUrl: string;\n  primaryColor: string;\n  accentColor: string;\n  customLinks: Array<{ label: string; url: string }>;\n}\n\nexport interface LiveStreamSettings {\n  provider: 'YOUTUBE' | 'FACEBOOK' | 'VIMEO' | 'OTHER';\n  embedUrl: string;\n  isLive: boolean; // Manual toggle by admin\n}\n\nexport interface TenantSettings {\n  isPublic: boolean;\n  membershipApprovalMode: MembershipApprovalMode;\n  // Features\n  enableCalendar: boolean;\n  enablePosts: boolean;\n  enableSermons: boolean;\n  enablePodcasts: boolean;\n  enableBooks: boolean;\n  enableMemberDirectory: boolean;\n  enableGroupChat: boolean;\n  enableComments: boolean;\n  enableReactions: boolean;\n  enableDonations: boolean;\n  enableVolunteering: boolean;\n  enableSmallGroups: boolean;\n  enableLiveStream: boolean;\n  enablePrayerWall: boolean;\n  enableResourceCenter: boolean;\n  donationSettings: DonationSettings;\n  liveStreamSettings: LiveStreamSettings;\n  // Visibility (simplified for mock)\n  visitorVisibility: {\n    calendar: boolean;\n    posts: boolean;\n    sermons: boolean;\n    podcasts: boolean;\n    books: boolean;\n    prayerWall: boolean;\n  };\n}\n\n\nexport interface RolePermissions {\n  canCreatePosts: boolean;\n  canCreateEvents: boolean;\n  canCreateSermons: boolean;\n  canCreatePodcasts: boolean;\n  canCreateBooks: boolean;\n  canCreateGroupChats: boolean;\n  canInviteMembers: boolean;\n  canApproveMembership: boolean;\n  canBanMembers: boolean;\n  canModeratePosts: boolean;\n  canModerateChats: boolean;\n  canPostInAnnouncementChannels?: boolean;\n  canManagePrayerWall: boolean;\n  canUploadResources: boolean;\n  canManageResources: boolean;\n  canManageContactSubmissions: boolean;\n}\n\n// Sticking with a map for easier frontend access\nexport type TenantFeaturePermissions = {\n  [key in TenantRoleType]?: RolePermissions;\n} & { ADMIN: RolePermissions };\n\n\nexport interface UserTenantMembership {\n  id: string;\n  userId: string;\n  tenantId: string;\n  status: MembershipStatus;\n  roles: UserTenantRole[];\n  displayName?: string; // Tenant-specific display name override\n}\n\nexport interface UserTenantRole {\n    id: string;\n    role: TenantRole;\n    displayTitle?: string;\n    isPrimary: boolean;\n}\n\n// Enriched type for displaying members in the UI\nexport interface EnrichedMember extends User {\n  membership: UserTenantMembership;\n}\n\n\n// --- CONTENT & MESSAGING (Largely Unchanged) ---\n\nexport interface Post {\n  id: string;\n  tenantId: string;\n  authorUserId: string;\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\n  title: string;\n  body: string;\n  isPublished: boolean;\n  publishedAt: Date;\n}\nexport interface PostInput {\n  title: string;\n  body: string;\n  type: 'BLOG' | 'ANNOUNCEMENT' | 'BOOK';\n  isPublished: boolean;\n}\nexport interface PostWithAuthor extends Post {\n    authorDisplayName: string;\n    authorAvatarUrl?: string;\n}\n\nexport interface Event {\n  id:string;\n  tenantId: string;\n  createdByUserId: string;\n  title: string;\n  description: string;\n  startDateTime: Date;\n  endDateTime: Date;\n  locationText: string;\n  isOnline: boolean;\n  onlineUrl?: string;\n}\nexport interface EventWithCreator extends Event {\n    creatorDisplayName: string;\n    creatorAvatarUrl?: string;\n}\n\nexport interface MediaItem {\n  id: string;\n  tenantId: string;\n  authorUserId: string;\n  type: 'SERMON_VIDEO' | 'PODCAST_AUDIO';\n  title: string;\n  description: string;\n  embedUrl: string;\n  publishedAt: Date;\n}\nexport interface EnrichedMediaItem extends MediaItem {\n    authorDisplayName: string;\n    authorAvatarUrl?: string;\n}\n\nexport interface ChatMessage {\n  id: string;\n  conversationId: string;\n  userId: string;\n  text: string;\n  createdAt: Date;\n  isDeleted?: boolean;\n}\n\nexport interface EnrichedChatMessage extends ChatMessage {\n  userDisplayName: string;\n  userAvatarUrl?: string;\n}\n\nexport interface Conversation {\n  id: string;\n  isDirect: boolean;\n  tenantId: string | null;\n  isPrivateGroup: boolean;\n  name?: string; // For group channels\n  description?: string; // Description for channels\n  createdByUserId: string;\n  isDefaultChannel: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface ConversationParticipant {\n  id: string;\n  conversationId: string;\n  userId: string;\n  lastReadMessageId?: string | null;\n}\n\nexport interface EnrichedConversation extends Conversation {\n    participants: User[];\n    unreadCount: number;\n    lastMessage?: EnrichedChatMessage;\n    displayName: string;\n}\n\n\n// --- ADMIN & AUDIT TYPES ---\n\nexport enum ActionType {\n  IMPERSONATE_START = 'IMPERSONATE_START',\n  IMPERSONATE_END = 'IMPERSONATE_END',\n  CREATE_POST = 'CREATE_POST',\n  DELETE_POST = 'DELETE_POST',\n  BAN_USER = 'BAN_USER',\n  UNBAN_USER = 'UNBAN_USER',\n  DELETE_MESSAGE = 'DELETE_MESSAGE',\n  USER_JOINED_TENANT = 'USER_JOINED_TENANT',\n  MEMBERSHIP_STATUS_UPDATED = 'MEMBERSHIP_STATUS_UPDATED',\n  MEMBER_ROLES_UPDATED = 'MEMBER_ROLES_UPDATED',\n  MEMBERSHIP_PROFILE_UPDATED = 'MEMBERSHIP_PROFILE_UPDATED',\n  USER_REGISTERED = 'USER_REGISTERED',\n  USER_PROFILE_UPDATED = 'USER_PROFILE_UPDATED',\n  ADMIN_UPDATED_USER_PROFILE = 'ADMIN_UPDATED_USER_PROFILE',\n  TENANT_PERMISSIONS_UPDATED = 'TENANT_PERMISSIONS_UPDATED',\n}\n\nexport interface AuditLog {\n  id: string;\n  actorUserId: string;\n  effectiveUserId?: string;\n  actionType: ActionType;\n  entityType?: string;\n  entityId?: string;\n  metadata?: Record<string, any>;\n  createdAt: Date;\n}\n\n// --- NOTIFICATION MODELS ---\nexport type NotificationType =\n  | 'NEW_DIRECT_MESSAGE'\n  | 'NEW_ANNOUNCEMENT'\n  | 'MEMBERSHIP_APPROVED'\n  | 'NEW_CONTACT_SUBMISSION';\n\nexport interface Notification {\n  id: string;\n  userId: string; // The recipient\n  actorUserId?: string; // The user who caused the notification\n  type: NotificationType;\n  message: string;\n  link?: string; // e.g., messages, tenant/tenant-1\n  isRead: boolean;\n  createdAt: Date;\n}\n\n// --- DONATION MODELS ---\nexport interface DonationSettings {\n  mode: 'EXTERNAL' | 'INTEGRATED';\n  externalUrl?: string;\n  integratedProvider?: 'STRIPE' | 'PAYPAL';\n  currency: string;\n  suggestedAmounts: number[];\n  allowCustomAmounts: boolean;\n  leaderboardEnabled: boolean;\n  leaderboardVisibility: 'PUBLIC' | 'MEMBERS_ONLY';\n  leaderboardTimeframe: 'ALL_TIME' | 'YEARLY' | 'MONTHLY';\n}\n\nexport interface DonationRecord {\n  id: string;\n  tenantId: string;\n  userId: string | null; // null for anonymous from public page\n  displayName: string; // denormalized for anonymous/guest donations\n  amount: number;\n  currency: string;\n  donatedAt: Date;\n  isAnonymousOnLeaderboard: boolean;\n  message?: string;\n}\n\nexport interface EnrichedDonationRecord extends DonationRecord {\n    userAvatarUrl?: string;\n}\n\n// --- VOLUNTEER MODELS ---\nexport interface VolunteerNeed {\n  id: string;\n  tenantId: string;\n  eventId?: string; // Optional link to an Event\n  title: string;\n  description: string;\n  date: Date;\n  slotsNeeded: number;\n}\n\nexport interface VolunteerSignup {\n  id: string;\n  needId: string;\n  userId: string;\n  signedUpAt: Date;\n  status: VolunteerStatus;\n}\n\n// Enriched types for UI\nexport interface EnrichedSignup {\n  signup: VolunteerSignup;\n  user: User;\n}\n\nexport interface EnrichedVolunteerNeed extends VolunteerNeed {\n  signups: EnrichedSignup[];\n}\n\n// --- SMALL GROUP MODELS ---\nexport interface SmallGroup {\n  id: string;\n  tenantId: string;\n  name: string;\n  description: string;\n  leaderUserId: string;\n  meetingSchedule: string; // e.g., \"Tuesdays at 7 PM\"\n  isActive: boolean;\n}\n\nexport interface SmallGroupMembership {\n  id: string;\n  groupId: string;\n  userId: string;\n  role: SmallGroupRole;\n  joinedAt: Date;\n}\n\n// Enriched types for UI\nexport interface EnrichedGroupMember {\n    membership: SmallGroupMembership;\n    user: User;\n}\n\nexport interface EnrichedSmallGroup extends SmallGroup {\n    leader: User;\n    members: EnrichedGroupMember[];\n}\n\n// --- COMMUNITY BOARD / PRAYER WALL MODELS ---\nexport interface CommunityPost {\n    id: string;\n    tenantId: string;\n    authorUserId: string | null; // Null for anonymous\n    type: CommunityPostType;\n    body: string;\n    isAnonymous: boolean;\n    status: CommunityPostStatus;\n    createdAt: Date;\n}\n\nexport interface EnrichedCommunityPost extends CommunityPost {\n    authorDisplayName: string;\n    authorAvatarUrl?: string;\n}\n\n// --- RESOURCE CENTER MODELS ---\nexport interface ResourceItem {\n    id: string;\n    tenantId: string;\n    uploaderUserId: string;\n    title: string;\n    description: string;\n    fileUrl: string; // For mock, this is just a string. In real app, it would be a URL to a file.\n    fileType: FileType;\n    visibility: ResourceVisibility;\n    createdAt: Date;\n}\n\nexport interface EnrichedResourceItem extends ResourceItem {\n    uploaderDisplayName: string;\n    uploaderAvatarUrl?: string;\n}\n\n// --- CONTACT & SUBMISSIONS ---\nexport interface ContactSubmission {\n    id: string;\n    tenantId: string;\n    name: string;\n    email: string;\n    message: string;\n    status: ContactSubmissionStatus;\n    createdAt: Date;\n}","import React, { useState } from 'react';\nimport type { ResourceItem } from '@/types';\nimport { FileType, ResourceVisibility } from '@/types';\nimport Input from '../../ui/Input';\nimport Button from '../../ui/Button';\n\ninterface ResourceFormProps {\n  onSubmit: (data: Omit<ResourceItem, 'id' | 'createdAt' | 'tenantId' | 'uploaderUserId'>) => void;\n  onCancel: () => void;\n}\n\nconst ResourceForm: React.FC<ResourceFormProps> = ({ onSubmit, onCancel }) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [fileUrl, setFileUrl] = useState('');\n  const [fileType, setFileType] = useState<FileType>(FileType.PDF);\n  const [visibility, setVisibility] = useState<ResourceVisibility>(ResourceVisibility.MEMBERS_ONLY);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!title || !fileUrl) {\n      alert('Please fill out the Title and File URL fields.');\n      return;\n    }\n    onSubmit({ title, description, fileUrl, fileType, visibility });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      <Input\n        label=\"Title\"\n        id=\"title\"\n        name=\"title\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        required\n      />\n      <div>\n        <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          Description\n        </label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          rows={3}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n        />\n      </div>\n       <Input\n        label=\"File URL (mock)\"\n        id=\"fileUrl\"\n        name=\"fileUrl\"\n        type=\"url\"\n        value={fileUrl}\n        onChange={(e) => setFileUrl(e.target.value)}\n        required\n        placeholder=\"https://example.com/file.pdf\"\n      />\n       <div>\n        <label htmlFor=\"fileType\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          File Type\n        </label>\n        <select\n          id=\"fileType\"\n          name=\"fileType\"\n          className=\"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900\"\n          value={fileType}\n          onChange={(e) => setFileType(e.target.value as FileType)}\n        >\n          {Object.values(FileType).map(type => (\n            <option key={type} value={type}>{type}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Visibility</label>\n        <div className=\"flex space-x-4\">\n            <label className=\"flex items-center space-x-2\">\n                <input type=\"radio\" name=\"visibility\" value={ResourceVisibility.MEMBERS_ONLY} checked={visibility === ResourceVisibility.MEMBERS_ONLY} onChange={() => setVisibility(ResourceVisibility.MEMBERS_ONLY)} className=\"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500\" />\n                <span>Members Only</span>\n            </label>\n             <label className=\"flex items-center space-x-2\">\n                <input type=\"radio\" name=\"visibility\" value={ResourceVisibility.PUBLIC} checked={visibility === ResourceVisibility.PUBLIC} onChange={() => setVisibility(ResourceVisibility.PUBLIC)} className=\"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500\" />\n                <span>Public</span>\n            </label>\n        </div>\n      </div>\n      <div className=\"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200\">\n        <Button type=\"button\" variant=\"secondary\" onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button type=\"submit\">\n          Save Resource\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default ResourceForm;","\"use client\";\n\nimport React, { useState, useMemo } from 'react';\nimport type { Tenant, User, ResourceItem } from '@/types';\nimport { getResourceItemsForTenant, getMembershipForUserInTenant, addResourceItem } from '@/lib/data';\nimport { can } from '@/lib/permissions';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ResourceForm from './forms/ResourceForm';\nimport ResourceItemCard from './ResourceItemCard';\n\ninterface ResourceCenterPageProps {\n  tenant: Tenant;\n  user: User;\n  onRefresh: () => void;\n}\n\nconst ResourceCenterPage: React.FC<ResourceCenterPageProps> = ({ tenant, user, onRefresh }) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  \n  const membership = useMemo(() => getMembershipForUserInTenant(user.id, tenant.id), [user.id, tenant.id]);\n  const isMember = membership?.status === 'APPROVED';\n  \n  const resources = useMemo(() => getResourceItemsForTenant(tenant.id, isMember), [tenant.id, isMember, onRefresh]);\n\n  const canUpload = can(user, tenant, 'canUploadResources');\n\n  const handleCreateResource = (data: Omit<ResourceItem, 'id' | 'createdAt' | 'tenantId' | 'uploaderUserId'>) => {\n    addResourceItem({\n      ...data,\n      tenantId: tenant.id,\n      uploaderUserId: user.id,\n    });\n    onRefresh();\n    setIsModalOpen(false);\n    alert('Resource uploaded successfully!');\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Resource Center</h2>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Downloadable files and resources from {tenant.name}.\n          </p>\n        </div>\n        {canUpload && (\n          <Button onClick={() => setIsModalOpen(true)}>+ Upload Resource</Button>\n        )}\n      </div>\n\n      {resources.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {resources.map(resource => (\n            <ResourceItemCard key={resource.id} resource={resource} currentUser={user} tenant={tenant} onUpdate={onRefresh} />\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center bg-white p-12 rounded-lg shadow-sm\">\n          <h3 className=\"text-lg font-medium text-gray-900\">No Resources Available</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            There are no resources here yet. {canUpload ? 'Why not upload one?' : ''}\n          </p>\n        </div>\n      )}\n      \n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Upload a New Resource\">\n        <ResourceForm onSubmit={handleCreateResource} onCancel={() => setIsModalOpen(false)} />\n      </Modal>\n    </div>\n  );\n};\n\nexport default ResourceCenterPage;","import React from 'react';\nimport type { EnrichedResourceItem, User, Tenant } from '@/types';\nimport { FileType, ResourceVisibility } from '@/types';\nimport { can } from '@/lib/permissions';\nimport { deleteResourceItem } from '@/lib/data';\nimport Card from '../ui/Card';\nimport Button from '../ui/Button';\n\ninterface ResourceItemCardProps {\n  resource: EnrichedResourceItem;\n  currentUser: User;\n  tenant: Tenant;\n  onUpdate: () => void;\n}\n\nconst FileTypeIcon: React.FC<{ type: FileType }> = ({ type }) => {\n  // FIX: Changed `JSX.Element` to `React.ReactElement` to resolve the \"Cannot find namespace 'JSX'\" error by using the explicit type from the imported React module.\n  const iconMap: { [key in FileType]: React.ReactElement } = {\n    [FileType.PDF]: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 11-2 0V4H6a1 1 0 11-2 0V4zm4.586 4.586a1 1 0 00-1.414 0L6 9.757V14a1 1 0 001 1h6a1 1 0 001-1V9.757l-1.172-1.171a1 1 0 00-1.414 0L10 9.586 8.586 8.586z\" clipRule=\"evenodd\" />\n      </svg>\n    ),\n    [FileType.DOCX]: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 11-2 0V4H6a1 1 0 11-2 0V4zm1 6a1 1 0 011-1h6a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H6z\" clipRule=\"evenodd\" />\n      </svg>\n    ),\n    [FileType.MP3]: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path d=\"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V3z\" />\n      </svg>\n    ),\n    [FileType.JPG]: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n      </svg>\n    ),\n    [FileType.PNG]: (\n       <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n      </svg>\n    ),\n    [FileType.OTHER]: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-full w-full\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n      </svg>\n    ),\n  };\n  return iconMap[type] || iconMap[FileType.OTHER];\n};\n\nconst ResourceItemCard: React.FC<ResourceItemCardProps> = ({ resource, currentUser, tenant, onUpdate }) => {\n  const canManage = can(currentUser, tenant, 'canManageResources');\n\n  const handleDelete = () => {\n    if (window.confirm('Are you sure you want to delete this resource? This action cannot be undone.')) {\n      deleteResourceItem(resource.id, currentUser.id);\n      onUpdate();\n    }\n  };\n  \n  const iconBgColor = resource.visibility === ResourceVisibility.MEMBERS_ONLY ? 'bg-indigo-100 text-indigo-600' : 'bg-gray-100 text-gray-600';\n\n  return (\n    <Card className=\"!p-0 flex flex-col h-full\">\n      <div className=\"p-6 flex-grow flex flex-col\">\n        <div className=\"flex items-start space-x-4\">\n          <div className={`w-12 h-12 flex-shrink-0 rounded-lg p-2 ${iconBgColor}`}>\n            <FileTypeIcon type={resource.fileType} />\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-lg font-semibold text-gray-900 line-clamp-2\">{resource.title}</h3>\n            {resource.visibility === ResourceVisibility.MEMBERS_ONLY && (\n              <span className=\"inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-indigo-800 mt-1\">\n                Members Only\n              </span>\n            )}\n          </div>\n        </div>\n        <p className=\"mt-4 text-sm text-gray-600 flex-grow line-clamp-3\">{resource.description}</p>\n      </div>\n      <div className=\"bg-gray-50 px-6 py-3 border-t border-gray-200\">\n        <div className=\"flex items-center justify-between text-xs text-gray-500\">\n          <span>{resource.uploaderDisplayName}</span>\n          <span>{resource.createdAt.toLocaleDateString()}</span>\n        </div>\n        <div className=\"mt-3 flex items-center space-x-2\">\n            <a href={resource.fileUrl} download className=\"w-full\">\n                <Button className=\"w-full\">Download</Button>\n            </a>\n            {canManage && (\n                <Button variant=\"danger\" size=\"sm\" onClick={handleDelete} className=\"!p-2.5\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                        <path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z\" clipRule=\"evenodd\" />\n                    </svg>\n                </Button>\n            )}\n        </div>\n      </div>\n    </Card>\n  );\n};\n\nexport default ResourceItemCard;\n"],"names":[],"mappings":"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"}