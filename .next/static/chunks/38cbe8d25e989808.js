(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83079,e=>{"use strict";var t=e.i(43476);e.s(["default",0,({children:e,variant:s="primary",size:a="md",className:r,...l})=>(0,t.jsx)("button",{className:`rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s]} ${{md:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[a]} ${r}`,...l,children:e})])},2265,e=>{"use strict";var t=e.i(43476);e.s(["default",0,({children:e,className:s,title:a,description:r})=>(0,t.jsxs)("div",{className:`bg-white shadow-md rounded-lg overflow-hidden ${s}`,children:[a&&(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:a}),r&&(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]}),(0,t.jsx)("div",{className:"p-6",children:e})]})])},44849,e=>{"use strict";var t=e.i(43476);e.s(["default",0,({label:e,id:s,containerClassName:a,...r})=>(0,t.jsxs)("div",{className:a,children:[(0,t.jsx)("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,t.jsx)("input",{id:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400",...r})]})])},41059,e=>{"use strict";var t=e.i(18228),s=e.i(8896);async function a(e,t){return s.prisma.userTenantMembership.findUnique({where:{userId_tenantId:{userId:e,tenantId:t}},include:{roles:{select:{role:!0}}}})}async function r(e,s,r){if(e.isSuperAdmin)return!0;let l=await a(e.id,s.id);if(!l||"APPROVED"!==l.status)return!1;for(let e of l.roles){let a=function(e){switch(e){case t.TenantRole.ADMIN:return"ADMIN";case t.TenantRole.STAFF:case t.TenantRole.CLERGY:return"STAFF";case t.TenantRole.MODERATOR:return"MODERATOR";case t.TenantRole.MEMBER:default:return"MEMBER"}}(e.role),l=s.permissions;if(l)if("ADMIN"===a){if(l.ADMIN&&l.ADMIN[r])return!0}else{let e=l[a];if(e&&e[r])return!0}}return!1}async function l(e,t,s){let r=await a(e,t);return!!r&&"APPROVED"===r.status&&r.roles.some(e=>s.includes(e.role))}async function n(e,t,s,a){return!!(e.isSuperAdmin||t.userId===e.id||!s.isDirectMessage&&await r(e,a,"canModerateChats"))}e.s(["can",()=>r,"canDeleteMessage",()=>n,"hasRole",()=>l])},41497,e=>{"use strict";var t=e.i(43476);e.s(["default",0,({label:e,enabled:s,onChange:a,description:r})=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"flex-grow flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e}),r&&(0,t.jsx)("span",{className:"text-sm text-gray-500",children:r})]}),(0,t.jsx)("button",{type:"button",className:`${s?"bg-amber-600":"bg-gray-200"} relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500`,role:"switch","aria-checked":s,onClick:()=>a(!s),children:(0,t.jsx)("span",{"aria-hidden":"true",className:`${s?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`})})]})])},58911,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.s(["default",0,({isOpen:e,onClose:a,title:r,children:l})=>((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a]),e)?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-start overflow-y-auto p-4 sm:p-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onClick:a,children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:r}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-6",children:l})]})}):null])},42670,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(44849),r=e.i(83079),l=e.i(41497);e.s(["default",0,({onSubmit:e,onCancel:n})=>{let[i,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[m,u]=(0,s.useState)("BLOG"),[x,h]=(0,s.useState)(!0);return(0,t.jsxs)("form",{onSubmit:t=>{(t.preventDefault(),i&&d)?e({title:i,body:d,type:m,isPublished:x}):alert("Please fill in both the title and body.")},className:"space-y-6",children:[(0,t.jsx)(a.default,{label:"Post Title",id:"title",name:"title",value:i,onChange:e=>o(e.target.value),required:!0,placeholder:"e.g., Annual Community Picnic"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 mb-1",children:"Body"}),(0,t.jsx)("textarea",{id:"body",name:"body",rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",value:d,onChange:e=>c(e.target.value),required:!0,placeholder:"Write your content here..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Post Type"}),(0,t.jsxs)("select",{id:"type",name:"type",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm rounded-md bg-white text-gray-900",value:m,onChange:e=>u(e.target.value),children:[(0,t.jsx)("option",{value:"BLOG",children:"Blog"}),(0,t.jsx)("option",{value:"ANNOUNCEMENT",children:"Announcement"}),(0,t.jsx)("option",{value:"BOOK",children:"Book"})]})]}),(0,t.jsx)(l.default,{label:"Publish Immediately",description:"If disabled, this post will be saved as a draft.",enabled:x,onChange:h}),(0,t.jsxs)("div",{className:"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)(r.default,{type:"button",variant:"secondary",onClick:n,children:"Cancel"}),(0,t.jsx)(r.default,{type:"submit",children:"Save Post"})]})]})}])},15197,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(31487),r=e.i(83079),l=e.i(2265);let n=({post:e})=>(0,t.jsxs)(l.default,{className:"!p-0 overflow-visible",children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{ANNOUNCEMENT:"bg-blue-100 text-blue-800",BLOG:"bg-green-100 text-green-800",BOOK:"bg-purple-100 text-purple-800"}[e.type]}`,children:e.type}),(0,t.jsx)("h3",{className:"mt-2 text-xl font-semibold text-gray-900 hover:text-amber-700 cursor-pointer",children:e.title})]}),(0,t.jsx)("div",{className:"flex-shrink-0 ml-4",children:(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})})]}),(0,t.jsx)("p",{className:"mt-3 text-sm text-gray-600 line-clamp-3",children:e.body})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("img",{className:"h-8 w-8 rounded-full",src:e.authorAvatarUrl,alt:e.authorDisplayName}),(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.authorDisplayName})]}),(0,t.jsx)("time",{dateTime:e.publishedAt.toISOString(),className:"text-gray-500",children:e.publishedAt.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]});var i=e.i(41059),o=e.i(58911),d=e.i(42670);e.s(["default",0,({tenant:e,user:l})=>{let[c,m]=(0,s.useState)(()=>(0,a.getPostsForTenant)(e.id)),[u,x]=(0,s.useState)(!1),h=(0,i.can)(l,e,"canCreatePosts");return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Posts & Announcements"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Read the latest updates from ",e.name,"."]})]}),h&&(0,t.jsx)(r.default,{onClick:()=>x(!0),children:"+ New Post"})]}),c.length>0?(0,t.jsx)("div",{className:"space-y-6",children:c.map(e=>(0,t.jsx)(n,{post:e},e.id))}):(0,t.jsxs)("div",{className:"text-center bg-white p-12 rounded-lg shadow-sm",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No Posts Yet"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["There are no posts here. ",h?"Why not create one?":""]})]}),(0,t.jsx)(o.default,{isOpen:u,onClose:()=>x(!1),title:"Create a New Post",children:(0,t.jsx)(d.default,{onSubmit:t=>{(0,a.addPost)({...t,tenantId:e.id,authorUserId:l.id}),m((0,a.getPostsForTenant)(e.id)),x(!1)},onCancel:()=>x(!1)})})]})}],15197)}]);