(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83079,e=>{"use strict";var s=e.i(43476);e.s(["default",0,({children:e,variant:l="primary",size:t="md",className:a,...i})=>(0,s.jsx)("button",{className:`rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-amber-600 text-white hover:bg-amber-700 focus:ring-amber-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[l]} ${{md:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[t]} ${a}`,...i,children:e})])},2265,e=>{"use strict";var s=e.i(43476);e.s(["default",0,({children:e,className:l,title:t,description:a})=>(0,s.jsxs)("div",{className:`bg-white shadow-md rounded-lg overflow-hidden ${l}`,children:[t&&(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900",children:t}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a})]}),(0,s.jsx)("div",{className:"p-6",children:e})]})])},44849,e=>{"use strict";var s=e.i(43476);e.s(["default",0,({label:e,id:l,containerClassName:t,...a})=>(0,s.jsxs)("div",{className:t,children:[(0,s.jsx)("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,s.jsx)("input",{id:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900 placeholder:text-gray-400",...a})]})])},58911,e=>{"use strict";var s=e.i(43476),l=e.i(71645);e.s(["default",0,({isOpen:e,onClose:t,title:a,children:i})=>((0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),e)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-start overflow-y-auto p-4 sm:p-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onClick:t,children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[(0,s.jsx)("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:a}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6",children:i})]})}):null])},41059,e=>{"use strict";var s=e.i(18228),l=e.i(8896);async function t(e,s){return l.prisma.userTenantMembership.findUnique({where:{userId_tenantId:{userId:e,tenantId:s}},include:{roles:{select:{role:!0}}}})}async function a(e,l,a){if(e.isSuperAdmin)return!0;let i=await t(e.id,l.id);if(!i||"APPROVED"!==i.status)return!1;for(let e of i.roles){let t=function(e){switch(e){case s.TenantRole.ADMIN:return"ADMIN";case s.TenantRole.STAFF:case s.TenantRole.CLERGY:return"STAFF";case s.TenantRole.MODERATOR:return"MODERATOR";case s.TenantRole.MEMBER:default:return"MEMBER"}}(e.role),i=l.permissions;if(i)if("ADMIN"===t){if(i.ADMIN&&i.ADMIN[a])return!0}else{let e=i[t];if(e&&e[a])return!0}}return!1}async function i(e,s,l){let a=await t(e,s);return!!a&&"APPROVED"===a.status&&a.roles.some(e=>l.includes(e.role))}async function r(e,s,l,t){return!!(e.isSuperAdmin||s.userId===e.id||!l.isDirectMessage&&await a(e,t,"canModerateChats"))}e.s(["can",()=>a,"canDeleteMessage",()=>r,"hasRole",()=>i])},64807,e=>{"use strict";var s,l,t,a,i,r,n,d,o,c,u=((s={}).MEMBER="MEMBER",s.STAFF="STAFF",s.CLERGY="CLERGY",s.MODERATOR="MODERATOR",s.ADMIN="ADMIN",s),m=((l={}).MEMBER="MEMBER",l.STAFF="STAFF",l.MODERATOR="MODERATOR",l),x=((t={}).REQUESTED="REQUESTED",t.APPROVED="APPROVED",t.REJECTED="REJECTED",t.BANNED="BANNED",t),E=((a={}).OPEN="OPEN",a.APPROVAL_REQUIRED="APPROVAL_REQUIRED",a),h=((i={}).PRAYER_REQUEST="PRAYER_REQUEST",i.TANGIBLE_NEED="TANGIBLE_NEED",i),R=((r={}).PENDING_APPROVAL="PENDING_APPROVAL",r.PUBLISHED="PUBLISHED",r.FULFILLED="FULFILLED",r),f=((n={}).PUBLIC="PUBLIC",n.MEMBERS_ONLY="MEMBERS_ONLY",n),p=((d={}).PDF="PDF",d.DOCX="DOCX",d.MP3="MP3",d.JPG="JPG",d.PNG="PNG",d.OTHER="OTHER",d),g=((o={}).UNREAD="UNREAD",o.READ="READ",o.ARCHIVED="ARCHIVED",o),N=((c={}).IMPERSONATE_START="IMPERSONATE_START",c.IMPERSONATE_END="IMPERSONATE_END",c.CREATE_POST="CREATE_POST",c.DELETE_POST="DELETE_POST",c.BAN_USER="BAN_USER",c.UNBAN_USER="UNBAN_USER",c.DELETE_MESSAGE="DELETE_MESSAGE",c.USER_JOINED_TENANT="USER_JOINED_TENANT",c.MEMBERSHIP_STATUS_UPDATED="MEMBERSHIP_STATUS_UPDATED",c.MEMBER_ROLES_UPDATED="MEMBER_ROLES_UPDATED",c.MEMBERSHIP_PROFILE_UPDATED="MEMBERSHIP_PROFILE_UPDATED",c.USER_REGISTERED="USER_REGISTERED",c.USER_PROFILE_UPDATED="USER_PROFILE_UPDATED",c.ADMIN_UPDATED_USER_PROFILE="ADMIN_UPDATED_USER_PROFILE",c.TENANT_PERMISSIONS_UPDATED="TENANT_PERMISSIONS_UPDATED",c);e.s(["ActionType",()=>N,"CommunityPostStatus",()=>R,"CommunityPostType",()=>h,"ContactSubmissionStatus",()=>g,"FileType",()=>p,"MembershipApprovalMode",()=>E,"MembershipStatus",()=>x,"ResourceVisibility",()=>f,"TenantRole",()=>u,"TenantRoleType",()=>m])},31478,e=>{"use strict";var s=e.i(43476),l=e.i(71645),t=e.i(64807),a=e.i(44849),i=e.i(83079);e.s(["default",0,({onSubmit:e,onCancel:r})=>{let[n,d]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[x,E]=(0,l.useState)(t.FileType.PDF),[h,R]=(0,l.useState)(t.ResourceVisibility.MEMBERS_ONLY);return(0,s.jsxs)("form",{onSubmit:s=>{(s.preventDefault(),n&&u)?e({title:n,description:o,fileUrl:u,fileType:x,visibility:h}):alert("Please fill out the Title and File URL fields.")},className:"space-y-6",children:[(0,s.jsx)(a.default,{label:"Title",id:"title",name:"title",value:n,onChange:e=>d(e.target.value),required:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",value:o,onChange:e=>c(e.target.value)})]}),(0,s.jsx)(a.default,{label:"File URL (mock)",id:"fileUrl",name:"fileUrl",type:"url",value:u,onChange:e=>m(e.target.value),required:!0,placeholder:"https://example.com/file.pdf"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700 mb-1",children:"File Type"}),(0,s.jsx)("select",{id:"fileType",name:"fileType",className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-white text-gray-900",value:x,onChange:e=>E(e.target.value),children:Object.values(t.FileType).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"radio",name:"visibility",value:t.ResourceVisibility.MEMBERS_ONLY,checked:h===t.ResourceVisibility.MEMBERS_ONLY,onChange:()=>R(t.ResourceVisibility.MEMBERS_ONLY),className:"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500"}),(0,s.jsx)("span",{children:"Members Only"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"radio",name:"visibility",value:t.ResourceVisibility.PUBLIC,checked:h===t.ResourceVisibility.PUBLIC,onChange:()=>R(t.ResourceVisibility.PUBLIC),className:"h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500"}),(0,s.jsx)("span",{children:"Public"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end items-center space-x-4 pt-4 border-t border-gray-200",children:[(0,s.jsx)(i.default,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),(0,s.jsx)(i.default,{type:"submit",children:"Save Resource"})]})]})}])},35743,e=>{"use strict";var s=e.i(43476),l=e.i(71645),t=e.i(31487),a=e.i(41059),i=e.i(83079),r=e.i(58911),n=e.i(31478),d=e.i(64807),o=e.i(2265);let c=({type:e})=>{let l={[d.FileType.PDF]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 11-2 0V4H6a1 1 0 11-2 0V4zm4.586 4.586a1 1 0 00-1.414 0L6 9.757V14a1 1 0 001 1h6a1 1 0 001-1V9.757l-1.172-1.171a1 1 0 00-1.414 0L10 9.586 8.586 8.586z",clipRule:"evenodd"})}),[d.FileType.DOCX]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 11-2 0V4H6a1 1 0 11-2 0V4zm1 6a1 1 0 011-1h6a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H6z",clipRule:"evenodd"})}),[d.FileType.MP3]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V3z"})}),[d.FileType.JPG]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),[d.FileType.PNG]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),[d.FileType.OTHER]:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})};return l[e]||l[d.FileType.OTHER]},u=({resource:e,currentUser:l,tenant:r,onUpdate:n})=>{let u=(0,a.can)(l,r,"canManageResources"),m=e.visibility===d.ResourceVisibility.MEMBERS_ONLY?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600";return(0,s.jsxs)(o.default,{className:"!p-0 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-6 flex-grow flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:`w-12 h-12 flex-shrink-0 rounded-lg p-2 ${m}`,children:(0,s.jsx)(c,{type:e.fileType})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:e.title}),e.visibility===d.ResourceVisibility.MEMBERS_ONLY&&(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-indigo-800 mt-1",children:"Members Only"})]})]}),(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-600 flex-grow line-clamp-3",children:e.description})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.uploaderDisplayName}),(0,s.jsx)("span",{children:e.createdAt.toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,s.jsx)("a",{href:e.fileUrl,download:!0,className:"w-full",children:(0,s.jsx)(i.default,{className:"w-full",children:"Download"})}),u&&(0,s.jsx)(i.default,{variant:"danger",size:"sm",onClick:()=>{window.confirm("Are you sure you want to delete this resource? This action cannot be undone.")&&((0,t.deleteResourceItem)(e.id,l.id),n())},className:"!p-2.5",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]})]})]})};e.s(["default",0,({tenant:e,user:d,onRefresh:o})=>{let[c,m]=(0,l.useState)(!1),x=(0,l.useMemo)(()=>(0,t.getMembershipForUserInTenant)(d.id,e.id),[d.id,e.id]),E=x?.status==="APPROVED",h=(0,l.useMemo)(()=>(0,t.getResourceItemsForTenant)(e.id,E),[e.id,E,o]),R=(0,a.can)(d,e,"canUploadResources");return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Resource Center"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Downloadable files and resources from ",e.name,"."]})]}),R&&(0,s.jsx)(i.default,{onClick:()=>m(!0),children:"+ Upload Resource"})]}),h.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(l=>(0,s.jsx)(u,{resource:l,currentUser:d,tenant:e,onUpdate:o},l.id))}):(0,s.jsxs)("div",{className:"text-center bg-white p-12 rounded-lg shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No Resources Available"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["There are no resources here yet. ",R?"Why not upload one?":""]})]}),(0,s.jsx)(r.default,{isOpen:c,onClose:()=>m(!1),title:"Upload a New Resource",children:(0,s.jsx)(n.default,{onSubmit:s=>{(0,t.addResourceItem)({...s,tenantId:e.id,uploaderUserId:d.id}),o(),m(!1),alert("Resource uploaded successfully!")},onCancel:()=>m(!1)})})]})}],35743)}]);